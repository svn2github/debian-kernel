From: "Stefan Lippers-Hollmann" <s.L-H@gmx.de>
Subject: staging: r8712u: Fix external firmware loading
Date: Fri, 29 Oct 2010 22:03:36 +0200

* select FW_LOADER
* declare MODULE_FIRMWARE for r8712u

Signed-off-by: Stefan Lippers-Hollmann <s.l-h@gmx.de>
---
 drivers/staging/rtl8712/Kconfig    |    1 +
 drivers/staging/rtl8712/hal_init.c |    1 +
 2 files changed, 2 insertions(+)

--- a/drivers/staging/rtl8712/Kconfig
+++ b/drivers/staging/rtl8712/Kconfig
@@ -3,6 +3,7 @@ config R8712U
 	depends on WLAN && USB
 	select WIRELESS_EXT
 	select WEXT_PRIV
+	select FW_LOADER
 	default N
 	---help---
 	This option adds the Realtek RTL8712 USB device such as the D-Link DWA-130.
--- a/drivers/staging/rtl8712/hal_init.c
+++ b/drivers/staging/rtl8712/hal_init.c
@@ -58,6 +58,7 @@ static u32 rtl871x_open_fw(struct _adapt
 	*ppmappedfw = (u8 *)((*praw)->data);
 	return (*praw)->size;
 }
+MODULE_FIRMWARE("rtl8712u/rtl8712u.bin");
 
 static void fill_fwpriv(struct _adapter *padapter, struct fw_priv *pfwpriv)
 {
