To: linus, alan
Cc: lkml
Subject: [PATCH] M68k PCI

First steps in making m68k PCI support compilable again

---
 arch/m68k/kernel/bios32.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

--- linux-m68k-2.6.21.orig/arch/m68k/kernel/bios32.c
+++ linux-m68k-2.6.21/arch/m68k/kernel/bios32.c
@@ -284,7 +284,7 @@ static void __init layout_bus(struct pci
 
 	DBG_DEVS(("layout_bus: starting bus %d\n", bus->number));
 
-	if (!bus->devices && !bus->children)
+	if (list_empty(&bus->devices) && list_empty(&bus->children))
 		return;
 
 	/*
