Subject: m68k: Use _AC() instead of #ifdef __ASSEMBLY__

m68k: Use _AC() instead of #ifdef __ASSEMBLY__ hackery

Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
---
 include/asm-m68k/page.h      |    8 +++-----
 include/asm-m68k/processor.h |    1 +
 2 files changed, 4 insertions(+), 5 deletions(-)

--- a/include/asm-m68k/page.h
+++ b/include/asm-m68k/page.h
@@ -4,17 +4,15 @@
 
 #ifdef __KERNEL__
 
+#include <linux/const.h>
+
 /* PAGE_SHIFT determines the page size */
 #ifndef CONFIG_SUN3
 #define PAGE_SHIFT	(12)
 #else
 #define PAGE_SHIFT	(13)
 #endif
-#ifdef __ASSEMBLY__
-#define PAGE_SIZE	(1 << PAGE_SHIFT)
-#else
-#define PAGE_SIZE	(1UL << PAGE_SHIFT)
-#endif
+#define PAGE_SIZE	(_AC(1, UL) << PAGE_SHIFT)
 #define PAGE_MASK	(~(PAGE_SIZE-1))
 
 #include <asm/setup.h>
--- a/include/asm-m68k/processor.h
+++ b/include/asm-m68k/processor.h
@@ -39,6 +39,7 @@ static inline void wrusp(unsigned long u
 #define TASK_SIZE	(0xF0000000UL)
 #else
 #ifdef __ASSEMBLY__
+#error This cannot happen
 #define TASK_SIZE	(0x0E000000)
 #else
 #define TASK_SIZE	(0x0E000000UL)
