From: Brian King <brking@linux.vnet.ibm.com>
Subject: [PATCH 1/1] ipr: add writeq definition if needed
Date: Wed, 09 Jun 2010 08:24:55 -0700

Compiling the driver will fail on 32 bit powerpc and other
architectures where writeq is not defined.  This patch adds a
definition for writeq.

Signed-off-by: Wayne Boyer <wayneb@linux.vnet.ibm.com>
Acked-by: Brian King <brking@linux.vnet.ibm.com>
---

 drivers/scsi/ipr.h |    8 ++++++++
 1 file changed, 8 insertions(+)

Index: b/drivers/scsi/ipr.h
===================================================================
--- a/drivers/scsi/ipr.h	2010-06-08 10:06:48.000000000 -0700
+++ b/drivers/scsi/ipr.h	2010-06-08 15:14:42.000000000 -0700
@@ -1860,4 +1860,12 @@ static inline int ipr_sdt_is_fmt2(u32 sd
 	return 0;
 }

+#ifndef writeq
+static inline void writeq(u64 val, void __iomem *addr)
+{
+	writel(((u32) (val >> 32)), addr);
+	writel(((u32) (val)), (addr + 4));
+}
 #endif
+
+#endif /* _IPR_H */


