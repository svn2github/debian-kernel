From: Ben Hutchings <ben@decadent.org.uk>
Date: Thu, 6 Feb 2014 00:46:51 +0000
Subject: [PATCH 2/3] perf trace: Add fallback definition of EFD_SEMAPHORE
Forwarded: http://mid.gmane.org/1391648435.3003.100.camel@deadeye.wl.decadent.org.uk

glibc 2.17 is missing this on sparc, despite the fact that it's
not architecture-specific.

Fixes: 49af9e93adfa ('perf trace: Beautify eventfd2 'flags' arg')
Signed-off-by: Ben Hutchings <ben@decadent.org.uk>
Cc: <stable@vger.kernel.org>
---
 tools/perf/builtin-trace.c | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/tools/perf/builtin-trace.c b/tools/perf/builtin-trace.c
index c9671bd..5c32dcf 100644
--- a/tools/perf/builtin-trace.c
+++ b/tools/perf/builtin-trace.c
@@ -35,6 +35,10 @@
 # define MADV_UNMERGEABLE	13
 #endif
 
+#ifndef EFD_SEMAPHORE
+# define EFD_SEMAPHORE		1
+#endif
+
 struct tp_field {
 	int offset;
 	union {
