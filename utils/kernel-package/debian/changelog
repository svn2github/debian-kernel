kernel-package (9.008.3) unstable; urgency=low

  * ramdisk generation tools now return 2 on --supported-* negative, so we can
    now add overrides for non- --supported-* supporting tools.

 -- Sven Luther <sven@localhost.localdomain>  Mon, 24 Oct 2005 10:34:46 +0200

kernel-package (9.008.2) unstable; urgency=low

  * Second take on the ramdisk generation tool resolution. Thanks go to Jonas
    Smedegaar and Steve Langasek for proposing this solution, and all others
    who discussed this. 
  * Removed again conflicts since we can now handle legacy ramdisk generation
    tools.

 -- Sven Luther <luther@debian.org>  Sun, 23 Oct 2005 16:21:46 +0200

kernel-package (9.008.1) unstable; urgency=low

  * NMU with maintainer's permission.
  * Implement the new ramdisk generation tool finding plan. Thanks go to
    Mattia Dongili for helping me out with the needed perl code.
  * Added conflict with older version of the ramdisk generating tools to the
    resulting kernel-image package. 
  * Upgraded manpage to reflect those changes.

 -- Sven Luther <luther@debian.org>  Thu, 20 Oct 2005 14:05:12 +0000

kernel-package (9.008) unstable; urgency=low

  * Bug fix: "xen.postinst contains illegal sed command", thanks to
    Michael Tautschnig                                    (Closes: #329373).
  * Bug fix: "Fix netboot for mips ELF32 arc firmware", thanks to Thiemo
    Seufer                                                (Closes: #329081).
  * Bug fix: "kernel-package: powerpc kernel packages don't remove
    cleanly", thanks to Eric Cooper                       (Closes: #327361).
  * Bug fix: "Give warnings during preconfigure, not during install",
    thanks to Bas Wijnen                                  (Closes: #328784).

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 28 Sep 2005 08:22:37 -0500

kernel-package (9.007) unstable; urgency=low

  * Update for MIPS kernels, thanks to Thiemo Seufer.     (Closes:  #323428).

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 31 Aug 2005 10:30:18 -0500

kernel-package (9.006) unstable; urgency=low

  * Bug fix: "kernel-package: Modules placed in wrong directory when
    building user mode linux kernels", thanks to Paul Dwerryhouse
                                                             (Closes:  #323018).
  * Ever since we added section 9 man pages to the kernel-doc package, one
    can no longer install two different versions of the kernel-doc package
    simultaneously. Since this was deemed to be undesirable, now we have
    split off a kernel-manual-X.Y.Z package to provide kernel man
    pages. This works for 2.6 kernels, and I hope does not cause issues
    for older kernels. Please note that while one may install any number
    of kernel-doc packages at one time, only one kernel-manual package is
    supposed to be installed at any given time.
  * Bug fix: "kernel-package: typo in make-kpkg.1.gz", thanks to Henrik
    Holmboe                                                   (Closes: #322693).

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 15 Aug 2005 23:42:08 -0500

kernel-package (9.005) unstable; urgency=low

  * Bug fix: "linux-2.6: [powerpc] does not include mkvmlinuz support",
    thanks to Sven Luther                                 (Closes: #320798).
  * Bug fix: "linux-headers-2.6.12: header_postinst_hook is called twice
    in postinst", thanks to Peter Marschall               (Closes: #320416).
  * Bug fix: "kernel-package: relink_src_link (in code)
    vs. relink_source_link (in man page) discrepancy", thanks to Peter
    Marschall                                             (Closes: #320424).
  * Bug fix: "'man make-kpkg' typos: "coumentation","similiar", "tp",
    etc.", thanks to A Costa                              (Closes: #320561).
  * Bug fix: "'man kernel-img' typos: "absense", "initail", "issueing" x
    2, "laoder", and  "varable"", thanks to A Costa       (Closes: #320562).
  * Bug fix: "'man kernel-pkg' typos: "Mutualy", "confguration", "differes",
    "instablity", "numberd", "similarily", and "usefule"", thanks to A
    Costa                                                 (Closes: #320563). 
  * Bug fix: "'man make-kpkg' typo: "ro"", thanks to Martin Zobel-Helas
                                                          (Closes: #321444). 

 -- Manoj Srivastava <srivasta@debian.org>  Sun,  7 Aug 2005 10:45:11 -0500

kernel-package (9.004) unstable; urgency=low

  * Bug fix: "new kernel-package creates ridiculous symlinks in /boot",
    thanks to Itai Seggev                       (Closes: #319543, #319657).
  * Bug fix: "kernel-package: Wrong symbolic link vmlinux in /boot",
    thanks to Bin Zhang                                  (Closes: #319452).
  * Bug fix: "new kernel-package creates ridiculous symlinks in /boot",
    thanks to Itai Seggev                                (Closes: #319515).
  * Bug fix: "Syntax error in kernel rules file", thanks to Jordi Mallach
                                                         (Closes: #319632).
  * Bug fix: "linux-image-2.6.12-1-686: /vmlinuz and /initrd symlinks were
    botched after installing 2.6.12", thanks to Andrew Moise
                                                         (Closes: #319664).
  * Bug fix: "kernel-package: Please support kernel building on the ppc64
    architecture", thanks to Andreas Jochens             (Closes: #320055).

 -- Manoj Srivastava <srivasta@debian.org>  Thu, 28 Jul 2005 00:13:15 -0500

kernel-package (9.003) unstable; urgency=low

  * Fix an unterminated variable reference.

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 20 Jul 2005 07:54:26 -0500

kernel-package (9.002) unstable; urgency=low

  * Bug fix: "kernel-package: Spelling error in rules file", thanks to
     Peter Marschall                                   (Closes: #317638).
  * Bug fix: "kernel-package: Spelling error in rules file", thanks to
    Aaron Howell                                        (Closes: #313338).
  * Bug fix: "kernel-package: Missing 'scripts' directory in
    kernel-headers produced by make-kpkg", thanks to Marc L. de
    Bruin. Also added Module.symvers, thanks to Ryan Underwood for
    pointing that out.                                  (Closes: #315858).
  * Bug fix: "describe -stem in the manpage", thanks to dann frazier
                                                        (Closes: #318397).
  * Bug fix: "kernel-package: possibly missing xargs option in rules
    file", thanks to Rob Browning                       (Closes: #318378).
  * Bug fix: "kernel-package: Please consider adding (or commenting on)
    this official powerpc/ppc64 patch", thanks to Sven Luther 
                                                        (Closes: #318431).
  * Bug fix: "kernel-package: please include more --config options",
    thanks to Andres Salomon                             (Closes: #318962).

 -- Manoj Srivastava <srivasta@debian.org>  Tue, 19 Jul 2005 10:34:06 -0500

kernel-package (9.001) unstable; urgency=low

  * The previous solution was only one half of the problem: we had made
    kernel_arch available to the maintainer scripts, but had not exported
    the variable to the hook scripts that the maintainer scripts run. This
    is the second half of that work.
  * Bug fix: "/u/s/k-p/image.postinst: $force_move logic recently broke",
    thanks to Aaron M.; "kernel-package: symlinks in /boot aren't update
    for packages created with make-kpkg", thanks to Itai Seggev.  These
    are the same bug, and indeed, as Aaron analyzed, were cause by a
    misplaced '}'.                                (Closes: #313312, #312917).
  * Thanks to Ubuntu and jbailey, there is now a new variable in
    /etc/kernel-img.conf: ramdisk, which allows the admin to choose a
    different program than /usr/sbin/mkinitrd for initrd generation.
  * Added a few bits and pieces for powerpc64 into the rules file. I am
    not sure I understand why one can't ever cross compile powerpc64
    images, but I am adding this in for the duration. This work reflects
    changes in Ubuntu.
  * Bug fix: "Fails with make: i486-linux-gnu-gcc: Command not found",
    thanks to Nacho MÃ¡s                                 (Closes: #313053).

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 13 Jun 2005 01:25:33 -0500

kernel-package (9.000) unstable; urgency=low

  * This is a bug fixing release, and hopefully stable. Next we embark on
    a cleanup, rewrite, and debconfification, so this may well be a
    version worth holding on to.
  * Bug fix: "kernel-package: Rearrange docs placement in kernel-doc",
    thanks to Eugene Konev                              (Closes: #308562).
  * Bug fix: "kernel-package: Please export KERNEL_ARCH variable to the
    post-install script", thanks to Jurij Smakov        (Closes: #309423).
  * Bug fix: "kernel-package: [INTL:es] updated make-kpkg manpage", thanks
    to Ruben Porras                                     (Closes: #310274).
  * Bug fix: "kernel-package: Does not clean up dangling 'source' symlink
    in postinst", thanks to Jurij Smakov                (Closes: #309981).
  * Bug fix: "kernel-package: Please disable the version mismatch check
    for official kernels", thanks to Jurij Smakov. As all the debian
    kernel images are built from the same source, but with different
    binary image versions (the binary image version is a combination of
    the sub-arch and a variation of the kernel ABI), this check is
    erroneously triggered for them, terminating the build. With the patch
    builds finish fine.  This does so by circumventing a sanity check,
    which has some value for the end user.              (Closes: #312280).
  * Bug fix: "kernel-package: make-kpkg manpage should state that newer
    Kernel have cramfs support", thanks to Andreas Pakulat 
                                                         (Closes: #308221).

 -- Manoj Srivastava <srivasta@debian.org>  Wed,  8 Jun 2005 03:43:37 -0500

kernel-package (8.135) unstable; urgency=medium

  * Bug fix: "kernel-package incompatible with experimental dpkg", thanks
    to Thomas Luzat. The problem is that dpkg-architecture
    -qDEB_HOST_GNU_SYSTEM output haschanged for Linux, resulting in
    kernel-package failing to figure out the system time. So, added
    DEB_HOST_ARCH_OS, which is only supported in the dpkg in experimental
    so far. This ain't ever gonna get into Sarge, but   shall be in
    Etch. Try to cope with the dpkg released with Sarge, as   well as the
    future dpkg that shall be in Etch. Discussed with RM, and this was
    deemed wrthy of pushing into Sarge                   (Closes: #307587). 
  * Bug fix: "kernel-package: [INTL:es] make-kpkg update", thanks to Ruben
    Porras                                                (Closes: #307713).

 -- Manoj Srivastava <srivasta@debian.org>  Sat,  7 May 2005 03:02:25 -0500

kernel-package (8.134) unstable; urgency=low

  * Bug fix: "kernel-package: Symlink confusion", thanks to Juergen
    Kreileder. There was indeed an issue with the image postrm, if the
    link_in_boot option was set.                           (Closes: #304140).

 -- Manoj Srivastava <srivasta@debian.org>  Mon,  2 May 2005 00:57:04 -0500

kernel-package (8.133) unstable; urgency=low

  * Bug fix: "typo in /usr/share/kernel-packages/rules", thanks to Bart
    Cortooms                                               (Closes: #307097).
  * Bug fix: "kernel-package: man make-kpkg does not document the
    binary-arch target", thanks to Intri Geri              (Closes: #305266).

 -- Manoj Srivastava <srivasta@debian.org>  Sun,  1 May 2005 14:20:43 -0500

kernel-package (8.132) unstable; urgency=low

  * Delete trailing whitespace in the rules file. This one change closes
    the next 4 bugs:
  * Bug fix: "kernel-package: does not build kernel_headers", thanks to
    Ingo Saitz                                            (Closes: #304568).
  * Bug fix: "kernel-package: Regression between 8.130 and 8.131", thanks
    to Roland Mas                                         (Closes: #304631).
  * Bug fix: "kernel-package: errors in script", thanks to Alberto Maurizi
                                                          (Closes: #304687).
  * Bug fix: "Compilation with make-kpkg fails", thanks to Johnny Morano
                                                          (Closes: #304851).

 -- Manoj Srivastava <srivasta@debian.org>  Fri, 15 Apr 2005 19:28:53 -0500

kernel-package (8.131) unstable; urgency=low

  * Bug fix: "kernel-package: README.modules should include targets
    called", thanks to Kevin Locke                        (Closes: #303833).
  * Updated spanish man pages.
  * Spit out a warning of the module dir does not exist. Earlier, we were
    silently ignoring missing third party modules.  
  * Bug fix: "Support for kfreebsd", thanks to Robert Millan
                                                          (Closes: #294235).

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 13 Apr 2005 01:53:41 -0500

kernel-package (8.130) unstable; urgency=low

  * Bug fix: "kernel-package fails to build mipsel kernels", thanks to
    Thiemo Seufer                                        (Closes: #301389).

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 28 Mar 2005 19:07:20 -0600

kernel-package (8.129) unstable; urgency=low

  * Bug fix: "sed errors with kernel-package &gt; 8.125", thanks to Edward
    J. Shornock. Need to quote $'s in make files.         (Closes: #300491).

 -- Manoj Srivastava <srivasta@debian.org>  Sun, 20 Mar 2005 00:33:49 -0600

kernel-package (8.128) unstable; urgency=low

  * Bug fix: "kernel-package: Script errors during kernel build on
    sparc64", thanks to Frans Pop. Comment out _all_ the lines of a
    stanza, nit just the last two.                       (Closes: #300371).

 -- Manoj Srivastava <srivasta@debian.org>  Sat, 19 Mar 2005 10:17:31 -0600

kernel-package (8.127) unstable; urgency=low

  * Bug fix: "kernel-package: make-kpkg uses run-parts -v option, which
    breaks woody->sarge upgrades", thanks to Sven Luther (Closes: #299863).
  * Bug fix: "kernel-package: Missing CROSS_ARG causes spurious warnings",
    thanks to Hirokazu Takata                            (Closes: #298509).

 -- Manoj Srivastava <srivasta@debian.org>  Thu, 17 Mar 2005 21:12:35 -0600

kernel-package (8.126) unstable; urgency=low

  * Bug fix: "[kernel-package] make-kpkg fails on mipsel without subarch",
    thanks to Florian Lohoff                               (Closes: #299218).
  * Inconsistent CROSS_COMPILE Breaks External Modules. Well, make sure
    that we do not end up with a XXX-- as the corss arg, thus allowing
    people to specify things with or without a trailing -. 
                                                    (Closes: #298371, #29850).
  * Bug fix: "kernel-package: Missing CROSS_ARG causes spurious warnings",
    thanks to Horms. Added [atch                            (Closes: #297677).
  * Bug fix: "kernel-package: Update Kernel Maintainer", thanks to Horms
                                                             (Closes: #297676).
  * Bug fix: "kernel-package: m32r architecture support", thanks to
    Hirokazu Takata                                          (Closes: #298647).

 -- Manoj Srivastava <srivasta@debian.org>  Thu, 17 Mar 2005 01:45:13 -0600

kernel-package (8.125) unstable; urgency=low

  * Update ARM netwinder rules to be correct, thanks to vince (Closes: #296443).
  * Bug fix: "kernel-package: [patch] Please add nubus support", thanks to
    Sven Luther                                               (Closes: #296450).
  * Bug fix: "kernel-package: should perhaps suggest or recommend bzip2",
    thanks to Krishna Sethuraman                              (Closes: #296696).
  * Bug fix: "add doc for initrd options", thanks to Alex     (Closes: #290697).

 -- Manoj Srivastava <srivasta@debian.org>  Tue,  1 Mar 2005 14:52:20 -0600

kernel-package (8.124.1) unstable; urgency=low

  * NMU for release management reasons and d-i rc3 (deadline today) schedule.
  * Adds nubus support, thus allowing an upload of the new 2.4.27 powerpc
    packages. (Closes: #296450)

 -- Sven Luther <luther@debian.org>  Mon, 28 Feb 2005 11:02:18 +0100

kernel-package (8.124) unstable; urgency=high

  * Bug fix: "/etc/kernel-img.conf mkimage option fails", thanks to Artur
    GÃ³rniak                                                 (Closes: #296084).

 -- Manoj Srivastava <srivasta@debian.org>  Sun, 20 Feb 2005 00:07:35 -0600

kernel-package (8.123) unstable; urgency=high

  * Implement and document a hook for cleaning the kernel image package, for
    symmetry.
  * Make minor tweaks to the kernel_version.mk file to eliminate
    complaints about missing .config files. 
  * Bug fix: "kernel-package: it fails to build my kernel with strange
    error message", thanks to Domenico Andreoli           (Closes: #295149).

 -- Manoj Srivastava <srivasta@debian.org>  Sat, 19 Feb 2005 10:19:34 -0600

kernel-package (8.122) unstable; urgency=low

  * Bug fix: "kernel-package: vmlinuz symlink breaks install", thanks to
    Michael Spang                                        (Closes: #295023).
  * Bug fix: "make-kpkg breaks make help", thanks to Uwe Zeisberger
                                                         (Closes: #295387).
  * Bug fix: "'/lib/modules/2.x.xx-whatever still exists' message uncalled
    for when only headers installed", thanks to Joshua Kwan. Create a work
    around for the breakage introduced in official kernel-header packages,
    which added a build symlink in the modules directory, causing a long
    standing sanity check to trigger.                    (Closes:  #295443).

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 16 Feb 2005 01:52:52 -0600

kernel-package (8.121) unstable; urgency=low

  * Bug fix: "FTBFS: cannot build powerpc 2.6 kernels, missing rule for
    conf.vars", thanks to Sven Luther                    (Closes: #294751).
  * Bug fix: "kernel-package: only postinst/rm scripts get =D and co
    substituted, while preinst/rm do not ...", thanks to Sven Luther
                                                         (Closes: #294736).
  * kernel-package locks up when building                (Closes: #294889).

 -- Manoj Srivastava <srivasta@debian.org>  Sat, 12 Feb 2005 00:06:22 -0600

kernel-package (8.120) unstable; urgency=medium

  * Bug fix: "Warning message about initrd is out of date", thanks to Tore
    Anderson. Toned down the warning a lot, but left it in place since it
    is not clear that the need it fully gone.            (Closes: #290675).
  * Bug fix: "kernel-package: Use versioned /etc/kernel/*.d directories to
    allow per kernel script launching.", thanks to Sven Luther 
                                                         (Closes: #294168).
  * Bug fix: "kernel-package: Using IMAGEDIR in /etc/kernel-pkg.conf make
    uninstall failed", thanks to Daniel 'NebuchadnezzaR' Dehennin 
    The chdir was in mostly for symmetry with other scripts; we certainly
    do not need to be in destdir, and indeed, destdir could be removed, as
    was the case here.
                                                         (Closes: #293738).
  * Bug fix: "--us --uc buildpackage doesn't work", thanks to
    Harald Dunkel. This helped point to a real mess in the way we handled
    the get root functionality, as well as the extra arguments to
    dpkg-buildpackage. Now we have separated out the functionality, and no
    longer overload int_root_cmd (helped get rid of int_get_root as well)
                                                         (Closes: #287212).
  * Bug fix: "kernel-package: LOCALVERSION alternate solution", thanks to
    Christian HÃ¶ltje. Thanks for the patch, this is indeed much cleaner.
                                                         (Closes: #285688).

 -- Manoj Srivastava <srivasta@debian.org>  Tue,  8 Feb 2005 15:09:24 -0600

kernel-package (8.119) unstable; urgency=low

  * Bug fix: "kernel-package: Improvements for kernel_grub_rm.sh script",
    thanks to Javier FernÃ¡ndez-Sanguino PeÃ±a. I created my own patch,
    rather than using the one in the report, but thanks for pointing this
    out.                                                 (Closes: #287937).
  * Bug fix: "mismatch between lilo.conf and the actual filename
    "initrd.old".", thanks to David Robin. The fix is actually
    thanks to Khalid Aziz, who noticed that in one corner case the
    symbolic link was moved to the wrong location.       (Closes: #288540).
  * Bug fix: "bash_completion.d/make-kpkg prints grep error messages if
    .config doesn't exist", thanks to Josh Triplett      (Closes: #285166).

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 10 Jan 2005 17:39:31 -0600

kernel-package (8.118) unstable; urgency=low

  * Bug fix: "bash_completion.d/make-kpkg prints grep error messages if
    .config doesn't exist", thanks to Josh Triplett (Closes: #285166).

 -- Manoj Srivastava <srivasta@debian.org>  Tue, 14 Dec 2004 12:20:46 -0600

kernel-package (8.117) unstable; urgency=low

  * Updated the spanish translation of the amke-kpkg man page, thanks to
    RubÃ©n Porras Campo <nahoo@inicia.es> 

 -- Manoj Srivastava <srivasta@debian.org>  Wed,  8 Dec 2004 09:48:47 -0600

kernel-package (8.116) unstable; urgency=low

  * Bug fix: "when generating buildinfo, should also consider [h]eld
    packages", thanks to Joshua Kwan. I sync-tree's with josjk's version,
    but did not actually use that code, since there have been changes made
    in the rules file since, and there are also some permission changes I
    did not want to revert. This shall allow him to star-merge back to get
    my fixes.                                             (Closes: #284700).
  * Bug fix: "kernel-package: improved CONCURRENCY_LEVEL docs", thanks to
    Bastian Kleineidam                                     (Closes: #284065).
  * Bug fix: "kernel-package: Clarify documentation on kernel patches",
    thanks to Ross Boylan. Added a note in the make-kpkg man page.
                                                           (Closes: #224212).

 -- Manoj Srivastava <srivasta@debian.org>  Wed,  8 Dec 2004 02:43:28 -0600

kernel-package (8.115) unstable; urgency=low

  * Bug fix: "SPARC/SILO: does not set the right initrd for the kernel",
    thanks to Joerg Friedrich.  We now mention that the generated
    silo.conf is a best effort kinda thing, and a human needs to check it.
                                                         (Closes: #282965).
  * Bug fix: "kernel-package: Simultaneously installing two kernel images,
    with initrds, makes lilo fail for the first one", thanks to Adam Rice
    Actually, this was an instance of upgrading two images at the same
    time.                                                (Closes: #282749).

 -- Manoj Srivastava <srivasta@debian.org>  Fri, 26 Nov 2004 01:17:10 -0600

kernel-package (8.114) unstable; urgency=low

  * Do up remove initrd symbolic links on upgrades.        (Closes: #281953).

 -- Manoj Srivastava <srivasta@debian.org>  Sat, 20 Nov 2004 16:00:21 -0600

kernel-package (8.113) unstable; urgency=low

  * Bug fix: "--stem option to enable alternative package naming schemes",
    thanks to Matt Zimmerman                                  (Closes: #281465).

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 17 Nov 2004 11:09:40 -0600

kernel-package (8.112) unstable; urgency=low

  * Bug fix: "kernel-source-2.6.9: make mrproper fails", thanks to Leif W
    horms@debian.org provided the fix                          (Closes: #279678).
  * Bug fix: "Updated mips/mipsel rules for kernel-package", thanks to
    Thiemo Seufer                                              (Closes: #280341).

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 10 Nov 2004 11:13:58 -0600

kernel-package (8.111) unstable; urgency=medium

  * Strip trailing white space from the rules file.
  * Bug fix: "lc_version change is buggy", thanks to Adam Heath 
                                                        (Closes: #279564).

 -- Manoj Srivastava <srivasta@debian.org>  Wed,  3 Nov 2004 17:42:18 -0600

kernel-package (8.110) unstable; urgency=low

  * Updated french man page, thanks to Sylvain Cherrier <sylvain.cherrier@free.fr>

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 25 Oct 2004 03:57:45 -0500

kernel-package (8.109) unstable; urgency=low

  * Aaargh. Fix the sense of the test for MAKING_VIRTUAL_IMAGE for source,
    doc, and header packages. Many thanks to Andreas Salomon for pointing
    this out.

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 25 Oct 2004 01:43:24 -0500

kernel-package (8.108) unstable; urgency=low

  * Fix the uml rules to accommodate the changes made in version 2.6.9. 
  * Bug fix: "kernel-package doesn't support kernel versions with
    uppercase letters", thanks to Adam Heath. Now, if an environment
    variable IGNORE_UPPERCASE_VERSION is set, the error is turned into a
    warning. Use at your own risk.                    (Closes: #277680).

 -- Manoj Srivastava <srivasta@debian.org>  Sun, 24 Oct 2004 21:45:58 -0500

kernel-package (8.107) unstable; urgency=low

  * Fix the tests for making a virtual image. Other wise, arch=um|xen
    failed with cross compile errors, and things for non um,xen targets
    were missing. Thanks to Nuutti Kotivuori for pointing this out.

 -- Manoj Srivastava <srivasta@debian.org>  Fri, 22 Oct 2004 17:29:54 -0500

kernel-package (8.106) unstable; urgency=low

  * Bug fix: "kernel-image-2.6.8-1-686: Badly constructed pathname for
    Initial rootdisk image", thanks to Greg Kochanski (the path had a //
    in it, corrected in a patch by Horms <horms@debian.org> (Closes: #275629).
  * Bug fix: "kernel-image-2.6-686: apt-get remove does not put back the
    old kernel", thanks to Greg Kochanski. Well, there is a partial
    solution -- the postinst now checks, and removes, damaged and dangling
    symlinks, and warns the person doing the uninstall that lilo may need
    to be run. However, it does not try to figure out itself which kernel
    image should be promoted, and it does not change any symbolic link in
    / (apart from removing dangling ones).                  (Closes: #275688).

 -- Manoj Srivastava <srivasta@debian.org>  Thu, 21 Oct 2004 18:16:10 -0500

kernel-package (8.105) unstable; urgency=low

  * Bug fix: "kernel-package: Wish it had Xeno Architecture Support",
    thanks to Paul Boehm. Most of the porting and testing has been done by
    Felix Erkinger <erkinger@gmx.net>, and all the credit goes to him. 
                                                          (Closes: #215318).
  * Bug fix: "typo error", thanks to Tommaso Moroni       (Closes: #277093).
  * Added Rules.make and arch dependent Makefile to the kernel-header
    package. 

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 20 Oct 2004 00:34:05 -0500

kernel-package (8.104) unstable; urgency=medium

  * Ignore leading white spaces in preinst answers.
  * Bug fix: "kernel-package: incorrect lookup of kernel-source version in
    rules", thanks to Julian Gilbey                      (Closes: #276257).
  * Bug fix: "kernel-package: rules doesn't test for valid_patches empty
    in stamp-build", thanks to Julian Gilbey              (Closes: #276258).
  * Updated french translation for the make-kpkg man page.

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 13 Oct 2004 03:26:17 -0500

kernel-package (8.103) unstable; urgency=high

  * Bug fix: "make-kpkg: fails to unpatch the source", thanks to martin f
    krafft. This was due to recent idiocy in upstream kernel sources,
    where the kernel now assumes responsibility of ./debian directory
    (despite Debian having used this directory for years). The people in
    charge of this code in upstream kernel were not competent enough to
    implement the deb target  in a fashion that it does not break a
    facility that Debian has used for years.  Well, all the kernel-patch
    packages are affected; since nothing shall unpatch correctly with
    2.6.8.1+ kerel versions. It also makes life a pain for official kernel
    image developers, since their ./debian is a dorectory that is not
    recreated by kernel-package (or the broken upstream code); and at
    least one developer has lost an uncheked in  custom ./debian dir
  
    It is not as if they needed to claim ./debian, since they do not use
    dpkg, and a fix was discussed in August, but no one has seen fit to
    implement that fix and solve this breakage -- so now kerel-package
    works around this idiocy. This makes this update very urgent.
  
    The generated .debs also do not pay attention to kernel-img.conf (thus
    creating a surprise for unsuspecting end users), they do not massage
    the build and source symlinks, do not run boot loaders, do not handle
    bootloaders that may use initrd in their config, and probably would
    end up generating a slew of bugs that can't be fixed in Debian.
  
                                                         (Closes: #270169).
  * Bug fix: "make-kpkg doesn't handle CONFIG_LOCALVERSION", thanks to
    Michal ÄihaÅ. The only implementation for LOCALVERSION I saw (in
    linux-2.6.9-rc3/Makefile), is a broken Makefile
    snippet. kernel-package now tries to implement what the documentation
    and comment say should be done                       (Closes: #273147).
  * Added support for hook directories. Apart from hook variables that the
    local admin may set, there are a set of directories where packages, or
    the local admin, may drop in script files. The directories are
      - /etc/kernel/preinst.d/,
      - /etc/kernel/postinst.d/,
      - /etc/kernel/prerm.d/, and 
      - /etc/kernel/postrm.d/.
    If they exists, the kernel-image package shall run a run-parts program
    over the directory, giving the version being installed or removed as
    an argument, in the corresponding phase of installation or
    removal. Since these directories do not exist by default, this should
    have no impact on current installations.
  
 -- Manoj Srivastava <srivasta@debian.org>  Fri,  8 Oct 2004 14:05:06 -0500

kernel-package (8.101) unstable; urgency=low

  * Bug fix: "uml kernel packages have weird files in weird places",
    thanks to martin f krafft. There is no need to test for empty patches,
    since these files are not installed unless the sources are patched. 
                                                           (Closes: #275407).

 -- Manoj Srivastava <srivasta@debian.org>  Thu,  7 Oct 2004 19:36:55 -0500

kernel-package (8.100) unstable; urgency=low

  * Strip the uml binary (honoring DEB_BUILD_OPTIONS).
  * Well, we conflict, replace, and provide user-mode-linux -- which has
    problems when we try to install two different kenrl-uml-* packages,
    since they now conflict with each other. Now, we just conflict with
    user-mode-linux (>= 2.0), which means all kernel-uml-* packages shall
    conflict with real user-mode-linux packages, but not with other
    kernel-uml packages.

 -- Manoj Srivastava <srivasta@debian.org>  Mon,  4 Oct 2004 00:21:19 -0500

kernel-package (8.099) unstable; urgency=low

  * Bug fix: "kernel-package: 2.4.27 compile fails", thanks to Gordon
    Haverland                                                 (Closes: #274616).

 -- Manoj Srivastava <srivasta@debian.org>  Sun,  3 Oct 2004 00:17:00 -0500

kernel-package (8.098) unstable; urgency=low

  * Replace and provide user-mode-linux, since each kernel-uml packages
    does indeed do that.

 -- Manoj Srivastava <srivasta@debian.org>  Sat,  2 Oct 2004 15:28:51 -0500

kernel-package (8.097) unstable; urgency=low

  * Bug fix: "kernel-package: information on source package and patch
    package versions in buildinfo.gz", thanks to Norbert Buchmuller
                                                     (Closes: #274465).
  * Fix a typo in the rules file.

 -- Manoj Srivastava <srivasta@debian.org>  Sat,  2 Oct 2004 01:04:40 -0500

kernel-package (8.096) unstable; urgency=low

  * More modifications to the kernel-uml-$version packages created. Now
    the modules live in /usr/lib/modules/ instead of in
    /usr/share/uml. The package now uses alternatives to allow people to
    have multiple uml images on the machine at the same time, while still
    retaining a /usr/bin/linux and a man page for that.  Rewrote the man
    page from scratch.                                       (Closes: #176288).
  * Bug fix: "kernel-package: Could be more conservative about initrd
    creation", thanks to Matt Zimmerman                      (Closes: #274165).

 -- Manoj Srivastava <srivasta@debian.org>  Fri,  1 Oct 2004 15:59:22 -0500

kernel-package (8.095) unstable; urgency=high

  * Urgency high since unpatching should indeed reverse the order in which
    patches are reversed.
  * Bug fix: "kernel-package: incorrect handling of --cross-compile
    option", thanks to Eric C. Cooper                        (Closes: #272786).
  * Bug fix: "kernel-package: typo in the kernel-pkg.conf.5 man page",
    thanks to Nicolas FranÃ§ois                               (Closes: #272244).
  * Bug fix: "implicit rules for unpatching don't reverse list of
    patches", thanks to Joshua Kwan                           (Closes: #273456).
  * kernel-package: wish it had support for UML. This enhancement has been
    solely the work of  Ralph PaÃgang <ralph@debianbase.de>, who worked
    hard withing the current infrastructure to implement the creation of
    UML packages. Try something like this:
      make-kpkg --revision 1um-1 --arch um  kernel-image
    the resulting package will be called:
      kernel-uml-<version>_<revision>_<buildarch>.deb
    It will include the linux executable in /usr/bin, and the uml modules
    in /usr/share/kernel-uml/modules/$VERSION/
                                                              (Closes: #273456).
  * Bug fix: "kernel-package: make-kpkg goes into endless loop while
    calling /sbin/depmod", thanks to Elias Pschernig           (Closes: #272129).

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 27 Sep 2004 20:26:04 -0500

kernel-package (8.094) unstable; urgency=high

  * Urgency High since there are severe bugs related to patching and
    unpatching kernel patches which are buggy.
  * Bug fix: "kernel-package: subarch detection fails on powerpc XServe G5
    systems", thanks to Colin Watson                        (Closes: #270314).
  * Bug fix: "make-kpkg: fails to unpatch the source", thanks to martin f
    krafft                                                  (Closes: #270169).
  * Bug fix: "kernel-package: applied_patches lists patches that didn't
    apply", thanks to martin f krafft                       (Closes: #270158).
  * Bug fix: "kernel-package: files should move to examples/", thanks to
    martin f krafft                                         (Closes: #269411).
  * Bug fix: "kernel-package: non-interactive install: reverse the abort
    yes/no, please", thanks to Alexander Zangerl            (Closes: #267926).
  * Bug fix: "Please install kernel image files *before* calling
    post-install script", thanks to Jens Schmalzing         (Closes: #267397).
  * Bug fix: "kernel-package: typo in manpage", thanks to martin f krafft
                                                            (Closes: #270611).

 -- Manoj Srivastava <srivasta@debian.org>  Fri, 10 Sep 2004 10:41:12 -0500

kernel-package (8.093) unstable; urgency=low

  * Bug fix: "kernel-package: [INTL:es] spanish manpage update", thanks to
    Ruben Porras                                           (Closes: #263060).
  * Bug fix: "French manpage", thanks to Sylvain Cherrier  (Closes: #263990).
  * Bug fix: "bash:ism in kernel_grub_conf.sh", thanks to David Weinehall
                                                           (Closes: #261963).
  * Bug fix: "kernel-package - produced initrd enabled packages depends
    against initrd-tools but checks for mkinitrd in preinst", thanks to
    Bastian Blank                                           (Closes: #263214).
  * Bug fix: "kernel-package: please support powerpc64", thanks to Rafael
    Ãvila de EspÃ­ndola                                      (Closes: #263746).

 -- Manoj Srivastava <srivasta@debian.org>  Fri,  6 Aug 2004 16:16:25 -0500

kernel-package (8.092) unstable; urgency=low

  * Bug fix: "make-kpkg(1) could be more explicit about MODULE_LOC",
    thanks to Lars Wirzenius                                (Closes: #258393).
  * Bug fix: "kernel-package: wrong macro in kernel-img.conf.5", thanks to
    Philippe Batailler                                      (Closes: #257584).
  * Bug fix: "XSI:isms and other nitpicking", thanks to David Weinehall
                                                            (Closes: #256107).
  * Bug fix: "kernel-package: extra sentence in manpage", thanks to martin
    f krafft                                                (Closes: #257721).
  * Bug fix: "kernel-package: problem in the manpage kernel-img.conf",
    thanks to Philippe Batailler                            (Closes: #258836).
  * Bug fix: "kernel-package: modules_clean target does not pay attention
    to --added_modules", thanks to Oystein Gisnas           (Closes: #258586).
  * Bug fix: "kernel-package: [INTL:es] spanish manpage updates", thanks
    to Ruben Porras                                         (Closes: #257826).

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 21 Jul 2004 15:21:24 -0500

kernel-package (8.091) unstable; urgency=low

  * Bug fix: "kernel-package: comment typo", thanks to dann frazier
                                                      (Closes: #252016).
  * Bug fix: "kernel-package: revision seems to be ignored when set in
    /etc/kernel-pkg.conf", thanks to Greg Norris      (Closes: #254488).
  * Bug fix: "kernel-package: Behaviour does not seem to follow
    documentation on some points", thanks to Adam C. Emerson
                                                      (Closes: #251548).
  * Bug fix: "Typo in real_stamp_source target prevents README.Debian
    installation", thanks to Jens Schmalzing          (Closes: #255372).

 -- Manoj Srivastava <srivasta@debian.org>  Tue, 22 Jun 2004 01:53:07 -0500

kernel-package (8.090) unstable; urgency=low

  * Bug fix: "kernel-package: Including 2.6's Kconfig files in kernel_doc
    packages", thanks to Andreas Metzler                 (Closes: #245800).
  * kernel-source-2.4.26_2.4.26-2(unstable): FTBFS: syntax error. Removed
    spurious close paren.                                (Closes: #247600).
  * Bug fix: "kernel-package: Improper test for non-modules targets when
    checking build dir", thanks to Kevin McCarty          (Closes: #247540).

 -- Manoj Srivastava <srivasta@debian.org>  Thu,  6 May 2004 18:46:05 -0500

kernel-package (8.089) unstable; urgency=low

  * make kernel-package not stop if the revision contains a hypen unless
    the said revision fails to meet policy. 
  * Bug fix: "kernel-package: Including 2.6's Kconfig files in kernel_doc
    packages", thanks to Andreas Metzler. I modified the patch, and only
    trigger the Kconfig collection for post 2.5 kernels. (Closes: #245800).
  * Bug fix: "/usr/bin/make-kpkg: make-kpkg: Typo in failure message",
    thanks to Goswin Brederlow                           (Closes: #245482).
  * Fixed a few over zealous escapes of hyphens in the make-kpkg man page.
  * Bug fix: "Support for bare vmlinux", thanks to Nicolas George. Use the
    configuration option install_vmlinux to additionally install the bare
    vmlinux image as well as the default image          (Closes: #243927).


 -- Manoj Srivastava <srivasta@debian.org>  Mon, 26 Apr 2004 15:32:11 -0500

kernel-package (8.088) unstable; urgency=low

  * Bug fix: "New kernel-package fails to build kernel", thanks to Roberto
    Sanchez. Oh, sheez: forgot to escape a $ from make in a shell command.
                                                           (Closes: #245010).

 -- Manoj Srivastava <srivasta@debian.org>  Tue, 20 Apr 2004 20:47:00 -0500

kernel-package (8.087) unstable; urgency=low

  * Bug fix: "Bug#244380: kernel-package: Unescaped dashes in manpage
    break copy and paste", thanks to Andreas Metzler Also fixed the
    spanish man pages, since this is merely about behaviour of man
                                                     (Closes: #244380).
  * Bug fix: "kernel-package: ignore_depmod_error is ignore_depmod_err",
    thanks to Marc Haber                              (Closes: #243526).
  * Bug fix: "kernel-package: UTS Release version does not match current
    version", thanks to YuLei                          (Closes: #243896).

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 19 Apr 2004 17:35:30 -0500

kernel-package (8.086) unstable; urgency=low

  * Bug fix: "kernel-package: &gt;=2.6.5 make clean removes version.h,
    modules_image fails", thanks to Ralf Neubauer. At this point, the
    automated cleaning of the build tree causes more problems than it
    solves -- at the very least, it violates the principle of least
    surprise. The do_cloean mechanism still exists for people who want to
    have the sources cleaned, but from now on, the default is not to clean
    the sources out.                                     (Closes: #242038). 

 -- Manoj Srivastava <srivasta@debian.org>  Tue,  6 Apr 2004 11:40:11 -0500

kernel-package (8.085) unstable; urgency=low

  * Fixed missing ;'s. Thanks to Radek Hnilica <Radek@hnilica.cz> and J G
    Miller <miller@yoyo.org> for noticing this.

 -- Manoj Srivastava <srivasta@debian.org>  Sat,  3 Apr 2004 10:44:00 -0600

kernel-package (8.084) unstable; urgency=low

  * Warn if module doesn't like the fact that it isn't being build as root
    and it is ignoring the --roocmd extension, and ask users to file a
    bug. 
  * Delete dangling build links when asked to, even if there is no
    replacement handy.
  * Bug fix: "kernel-package: Typo in Problems.gz", thanks to LT-P
                                                          (Closes: #238983).
  * Bug fix: "changelog should be called changelog.Debian", thanks to
    Martin Michlmayr                                      (Closes: #238425).
  * Bug fix: "kernel-package - don't recognize s390x", thanks to Bastian
    Blank                                                 (Closes: #232711).
  * Updated spanish manual pages.

 -- Manoj Srivastava <srivasta@debian.org>  Fri,  2 Apr 2004 00:12:20 -0600

kernel-package (8.083) unstable; urgency=low

  * Bug fix: "kernel-source-2.4.25: Configure error prevents
    installation", thanks to Bruce Miller. Do not try to change the
    include/asm symlinks for source and doc packages, since we do not own
    that dir. Only the headers package ought to be doing that.
                                                         (Closes: #235706).
  * Bug fix: "kernel-package: silent_modules should be YES on powerpc even
    on first install of official images.", thanks to Sven
    Luther. Accomodate the official powerpc kernel images to not prompt
    even on initial install when /lib/modules/$version/ already
    exists. This allows the separation of the modules from the kernel
    image, since different powerpc subarches all require different images,
    but can  share the modules.                           (Closes: #230251).
  * Bug fix: "kernel-package: avoid silent failure when out of space",
    thanks to dann frazier. I skiimed the rules file for other examples of
    this ilk, but I think a real clean up would have to wait until we break
    up the Makefile post Sarge.                           (Closes: #234316).
  * Bug fix: "kernel-package: should include the changelog from
    kernel-source-xx", thanks to Christoph Martin. Hmm. Create a file
    called Changelog.src.Debian in hte top of the tarball that we create
    for kernel-source-X.XX packages. Subsequently, when creating image
    packages, if that file exists, copy it into the doc dir for the
    kernel-image packages, and compress it.                (Closes: #234908).
  * Updated spanish man pages.
  * Bug fix: "kernel-package: Typo in documentation intrd",
    thanks to Andreas Metzler                              (Closes: #235421).

 -- Manoj Srivastava <srivasta@debian.org>  Tue,  2 Mar 2004 23:14:27 -0600

kernel-package (8.082) unstable; urgency=low

  * Bug fix: "Add amd64 support to kernel-package", thanks to Stephen
    Frost                                               (Closes: #233252).
  * Bug fix: "kernel-image: postrm doesnt remove dangling initrd.img
    symlink", thanks to Mario 'BitKoenig' Holbe         (Closes: #233243).
  * Add a note in the man page that the clean target should not be cobined
    with other targets. 
  * Bug fix: "/usr/bin/make-kpkg:make-kpkg --rootcmd=fakeroot clean
    kernel_image after patching sources doesn't work", thanks to
    Amit Shah. Since this is now documented, I am closing this report.
                                                          (Closes: #233478).
  * Bug fix: "kernel-package: Grub install scripts broken", thanks to
    Roland Mas                                            (Closes: #233585).
  * Make the sample posthook script executable, to shut up lintian
  * Bug fix: "confusing comments in kernel-img.conf", thanks to Jamie
    Heilman                                               (Closes: #233184).
  * Bug fix: "misspellings", thanks to Matt Kraai         (Closes: #233132).
  * Bug fix: "kernel-package: --append-to-version and modules_image don't
    get along", thanks to Daniel Jacobowitz. Starting with kernel version
    2.6.X, the build process for third party modules has been modified;
    now modules are expected to build in hte kenrel sources dir, and you
    set the SUBDIR arg to point to the source for the module itself. This
    arranges for the kernel makefiles to do all the boilerplate work of
    building/running modpost, dependencies, et cetera. The problem is that
    unless the module passes in the same  EXTRAVERSION=XYZ argument that
    the main kernel build process did,  include/linux/version.h shall be
    regenerated, with a different value  now than when the kernel was
    compiled. The only way to avoid this is to make sure the module passes
    EXTRAVERSION also; the 2.6 kernel makefile is very enthusiastic about
    making sure version.h is up to  date. So, make-kpkg now passes a new
    parameter, KPKG_EXTRAV_ARG, to the module; the value is either empty,
    or a string like "EXTRAVERSION=X.Y.Z". The idea is that you can call
    $(MAKE) $(KPKG_EXTRAV_ARG) ... in the modules package and have the
    same version.h info as the main kernel image does.  (Closes: #233152).

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 18 Feb 2004 18:12:45 -0600

kernel-package (8.081) unstable; urgency=low

  * Fixed top level makefile to make it usable stand alone
  * Bug fix: "/usr/bin/make-kpkg: Minor warning message", thanks to Andrew
    Ferrier                                               (Closes: #231902).
  * Bug fix: "kernel-package: make-kpkg spanish manpage updated", thanks
    to Ruben Porras                                       (Closes: #232007).

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 16 Feb 2004 18:47:09 -0600

kernel-package (8.080) unstable; urgency=low

  * Bug fix: "debian.README.gz out of date", thanks to Thomas Hood. Now
    mention linux-kerel-headers under the new method section.
                                                        (Closes: #230083).
  * Bug fix: "kernel-package: several typos", thanks to Jochen Voss
                                                        (Closes: #227191).
  * Bug fix: "kernel-package: make-kpkg spanish manpage updated", thanks
    to Ruben Porras                                     (Closes: #227898).
  * Bug fix: "kernel-package: silent_modules should be YES on powerpc even
    on first install of official images.", thanks to Sven Luther
                                                        (Closes: #230251).
  * Bug fix: "manpage: hint how to select the compiler used", thanks to
    Jens Thiele \(karme\)                               (Closes: #230272).
  * Bug fix: "kernel-package: trivial change for sparc", thanks to Ben
    Collins.                                            (Closes: #230288).
  * Bug fix: "kernel-package: Typo in kernel-pkg.conf: "espescially"
    should be "especially", thanks to Philip Miller     (Closes: #227363).
  * Bug fix: "kernel-package: support for Kerntypes", thanks to dann
    frazier                                             (Closes: #231145).

 -- Manoj Srivastava <srivasta@debian.org>  Thu,  5 Feb 2004 14:04:09 -0600

kernel-package (8.079) unstable; urgency=low

  * Bug fix: "kernel-package: no way for non-interactive initrd build?",
    thanks to Hein Roehrig. Document the INITRD_OK variable better.
                                                         (Closes: #227128).
  * Bug fix: "kernel-package: Looks for debian/rules in $MODULE_LOC/,
    should look only in subdirectories", thanks to Frank KÃ¼ster
                                                         (Closes: #226455).
  * Bug fix: "kernel-package: check that EXTRAVERSION doesn't begin with a
    digit", thanks to Mark Sheppard                      (Closes: #226790).

 -- Manoj Srivastava <srivasta@debian.org>  Sun, 11 Jan 2004 11:56:14 -0600

kernel-package (8.078) unstable; urgency=low

  * Bug fix: "kernel-package: Typo in `man kernel-pkg.conf': "laoded" in
    Description should be "loaded", thanks to Philip Miller
                                                       (Closes: #224607).

 -- Manoj Srivastava <srivasta@debian.org>  Fri,  2 Jan 2004 11:39:18 -0600

kernel-package (8.077) unstable; urgency=low

  * Bug fix: "kernel-package: Does not detect errors correctly during
    build", thanks to Horms.                         (Closes: #223633).
  * Bug fix: "kernel-package: Installed files may have incorrect
    permissions", thanks to Horms. I set umask 000, rather than brute
    force the permissions using chmod, in as many cases as possible. 
                                                        (Closes: #223638).

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 10 Dec 2003 23:59:29 -0600

kernel-package (8.076) unstable; urgency=low

  * Bug fix: "kernel-package: warning message : Search pattern not
    terminated at -e line 1.", thanks to Jean-Luc Coulon. Had to double a
    $ in the perl one-liner in the rules file.         (Closes: #223237). 
  * Bug fix: "Compiling kernel fails with "cannot stat 'conf.vars'"",
    thanks to Mariano Kamp. Hopefully, all that can be laid to rest now.
    (Closes: #223233)

 -- Manoj Srivastava <srivasta@debian.org>  Sun,  7 Dec 2003 11:19:21 -0600

kernel-package (8.075) unstable; urgency=low

  * Bug fix: "kernel-package: kpkg_version is not defined", thanks to
    Andreas Beckmann.  Pass along the version number from ./debian/rules
    into the make call.                                (Closes: #223113).

 -- Manoj Srivastava <srivasta@debian.org>  Sat,  6 Dec 2003 17:18:08 -0600

kernel-package (8.074) unstable; urgency=low

  * Bug fix: "kernel-package: fails in kernel_headers target", thanks to
    Modestas Vainius                                     (Closes: #223054).
  * Bug fix: "cannot stat `conf.vars': No such file or directory", thanks
    to Harald Dunkel                                     (Closes: #223056).
  * Bug fix: "kernel-package: A bug (typo) in constructing "valid_modules"
    variable (prevents modules_* from working)", thanks to Modestas
    Vainius                                              (Closes: #223069).
  * Bug fix: "kernel-package: Having underscore (_) in kernel's version is
    illegal but not checked", thanks to Ari SovijÃÃ¯Â¿ÅÃÂâ¬rvi   (Closes: #222467).

 -- Manoj Srivastava <srivasta@debian.org>  Sat,  6 Dec 2003 10:43:15 -0600

kernel-package (8.073) unstable; urgency=low

  * Need to escape # in the UTS_RELEASE calculation in the rules
    file. Thanks to Tomas Hoger for the quick catch.

 -- Manoj Srivastava <srivasta@debian.org>  Fri,  5 Dec 2003 11:06:43 -0600

kernel-package (8.072) unstable; urgency=low

  * Strange set of error messages about build link on fresh
    install, quoth Joey Hess. This was related to the postinst trying to
    handle the dangling build link. Now actually test to see if the link
    was present, and is a bit more chatty.             (Closes: #221286).
  * Tomas Hoger tracked down the problem with unpatching old patches when
    make was interrupted while building. The path was all wrong, since
    it pointed to the patch script, and the unpatching was not done in
    reverse order.  Now we do the same things with relics of old patches
    found in the dir as we do with the ordinary patches.
  * Bug fix: "kernel-package: Inconsistent default kernel-image package
    revision", thanks to Roland Stigge.  Made it 10.0.Custome all over.
                                                        (Closes: #221916).
  * Bug fix: "kernel-package: conf.vars should list kernel Makefile
    variables instead of environment variables", thanks to Andreas
    Beckmann.                                           (Closes: #222084).
  * Bug fix: "kernel-package: The UTS Release version does match current
    version", thanks to Andreas Beckmann. Applied previous fix from
    make-kpkg to the rules file.                         (Closes: #222087).
  * Bug fix: "tries to access lib/modules/<version>/build even when
    it doesn't exist", thanks to Peter Palfrader.         (Closes: #222239).
  * Bug fix: "kernel-package: valid_modules contains parent directory",
    thanks to Frank KÃÃ¯Â¿ÅÃÂÅster.  Now we test to amek sure that each module has
    a ./debian/rules file before declaring it valid.    (Closes: #222707).
  * Bug fix: "kpkg-make bug for subarch PRPMC (on PowerPC)", thanks to
    Hubert Figuiere. Applied provided patch.          (Closes: #222808).

 -- Manoj Srivastava <srivasta@debian.org>  Fri,  5 Dec 2003 02:45:16 -0600

kernel-package (8.071) unstable; urgency=low

  * Bug fix: "kernel-package: CONCURRENCY_LEVEL in manual page", thanks to
    Piotr Roszatycki                                     (Closes: #221269).
  * Bug fix: "kernel-package: add elilo.conf editing hint", thanks to dann
    frazier. The provided patch adds the prompt in the preinst.
                                                         (Closes: #220783).

 -- Manoj Srivastava <srivasta@debian.org>  Tue, 18 Nov 2003 16:26:15 -0600

kernel-package (8.070) unstable; urgency=low

  * The patch, thanks to Rob Radez,  adds back in setting KPKG_SUBARCH if
    it's not set, and also sets KERNEL_ARCH properly for sparc.

 -- Manoj Srivastava <srivasta@debian.org>  Thu, 13 Nov 2003 01:56:02 -0600

kernel-package (8.069) unstable; urgency=high

  * Bug fix: "kernel-package: too many endifs", thanks to Guido Guenther
    and Martin Thorsen Ranang. The recent fix for sparc left around a
    spurious endif, I think.                    (Closes: #220320, #220319).

 -- Manoj Srivastava <srivasta@debian.org>  Tue, 11 Nov 2003 18:32:34 -0600

kernel-package (8.068) unstable; urgency=low

  * Bug fix: Added support for gconfig.  Mention that it is only for 2.6.X
    kernels, and that 2.6.X kernels have changed the requirements for make
    xconfig as well. Make sure the make-kpkg does not barf on
    gconfig. "kernel-source-2.6.0-test9: packages needed for QTand GTK+
    config. interfaces", thanks to Laurent Ghys        (Closes: #219324).
  * Bug fix: "kernel-package: typo in conf.vars rule", thanks to Peter
    Cordes                                             (Closes: #220149).
  * Bug fix: "kernel-package: update spanish manpages", thanks to Ruben
    Porras                                             (Closes: #218716).
  * Changed sparc/sparc64 subarch logic, thanks to Ben Collins
    <bcollins@debian.org> and Rob Radez <rob@osinvestor.com>

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 10 Nov 2003 22:02:02 -0600

kernel-package (8.067) unstable; urgency=low

  * Change docbook-utils from recommends to suggests  closes: Bug#215177
  * Make sure we do create a symlink if the user sys yes.
                                                      closes: Bug#216814
  * Stop make-kpkg.1 speaking like a buccaneer.       closes: Bug#216991
  * Typycally -> typically                            closes: Bug#217186
  * allow compiling kernel package bootable on PrPMC 750/PrPMC 800 cards
    made by Motorola. Patch from Hubert Figuiere
    <hub-linux-ppc@trantor.staff.proxad.net>          closes: Bug#216681
  * Bug out with a diagnostic if kimagesrc or kimagedest were undefined;
    typically the case if we can't determine the arch closes: Bug#216676

 -- Manoj Srivastava <srivasta@debian.org>  Fri, 31 Oct 2003 11:20:34 -0600

kernel-package (8.066) unstable; urgency=low

  * to default target for mips(el) changed between 2.4 and 2.5. Applied a
    patch from Guido Guenther <agx@debian.org> to fix this.
                                                       closes: Bug#214590
  * Disable the "out of the way" warning in image.preinst
    when these conditions are met:
       1. This is an official kernel (perhaps a substitution in the preinst?)
       2. This is an upgrade.
    The reason is that when I make bug fix releases that do not change the
    ABI, modules compiled for the previous kernel will continue to
    work. Unfortunately, the users tend to be scared off by the "out of
    the way" warning and end up aborting the install and filing a bug.
    Made it so.                                        closes: Bug#214529

 -- Manoj Srivastava <srivasta@debian.org>  Tue,  7 Oct 2003 11:23:43 -0500

kernel-package (8.065) unstable; urgency=low

  * Added a HOWTO for installing 2.6 kernels on a Woody machine to the
    docs. The HOWTO comes from Marc Herbert.
  * Since the mkimage command may legitimately contain /'s, use @ as sed
    separator -- it is an unlikely character to be in that string. 
                                                       closes: Bug#213722
  * Make modules_clean depend on .config, not on configure.
                                                       closes: Bug#214183

 -- Manoj Srivastava <srivasta@debian.org>  Mon,  6 Oct 2003 11:17:11 -0500

kernel-package (8.064) unstable; urgency=high

  * Fixes for the mips64el arches.                     closes: Bug#213621
  * 8.062 was a critical fix, and hasn't propagated to testing because of
    subsequent bug fixes. This retains the hihg priority that 8.062
    had. Hopefully, at some point the updates to kernel-package shall stop
    being a daily occurrence.

 -- Manoj Srivastava <srivasta@debian.org>  Wed,  1 Oct 2003 11:33:35 -0500

kernel-package (8.063) unstable; urgency=low

  * Add chrp-rs6k support, and also allow setting of GUESS_SUBARCH
    manually. Patch from Sven Luther
  * patch allows to build mips64{,el} kernels using --subarch mips64{,el}
    or --subarch <any>-64.  patch from Guido Guenther closes: Bug#213294

 -- Manoj Srivastava <srivasta@debian.org>  Tue, 30 Sep 2003 00:31:52 -0500

kernel-package (8.062) unstable; urgency=high

  * Install additional useful documentation files in the kernel-doc
    package.                                             closes: Bug#212848
  * Added more voluble informational messages trying to track down
    Bug#212965. Removed Quotes from around the UTS_RELEASE_VERSION
                                                         closes: Bug#212965
  * Added an option to make-kpkg to allow people to specify the command to
    build an initrd image. This is useful if there are many kernel images
    in the system with different initrd filesystem. Also added an option
    to kernel-img.conf to over ride that variable on a per target basis.
                                                         closes: Bug#212602
  * Ship man pages and html documentation of the kernel in the kerel-doc
    packages. Note that you need to have docbook-utils installed to take
    advantage of this.                                   closes: Bug#210630

 -- Manoj Srivastava <srivasta@debian.org>  Sat, 27 Sep 2003 20:00:10 -0500

kernel-package (8.061) unstable; urgency=low

  * make make-kpkg parse extraversion values with non alphanumeric chars
    in them, just like the rules file does.             closes: Bug#212477

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 24 Sep 2003 02:10:54 -0500

kernel-package (8.060) unstable; urgency=low

  * The preinst, prerm, postrm -- were all parsing force_build_link from
    the config file, -- all except the postinst. Fixed. closes: Bug#212313
  * make make-kpkg allow mismatches between the new version and that in
    version.h, since we now have a method that allows us to recover from
    that. 

 -- Manoj Srivastava <srivasta@debian.org>  Tue, 23 Sep 2003 10:42:05 -0500

kernel-package (8.059) unstable; urgency=low

  * Added handling of the /lib/modules/`uname -r`/build symbolic link, if
    it is dangling. A link to the corresponding kernel-headers location is
    added if it exists. One can also force not checking for the existence
    of the kernel-headers link.                         closes: Bug#211949
  * In some cases, the symlink creation code created a dangling relative
    link, instead of an absolute, non dangling link, since the test
    relative code only looked at the directory names of the source, rather
    than testing for the actual file we needed to link to.
                                                        closes: Bug#211140
  * We used to silently ignore individual patches and unpatches that were
    not found from the list of user requested patches; only complaining if
    none of the user requested patches were found. Now we stop early
    (before doing any patching at all) if any of the requested patches
    can't be found.                                     closes: Bug#211406
  * No longer recommend debianutils, since it is an essential package.
                                                        closes: Bug#210686

 -- Manoj Srivastava <srivasta@debian.org>  Sun, 21 Sep 2003 14:22:49 -0500

kernel-package (8.058) unstable; urgency=low

  * The module version mismatch problem makes it impossible to use kernel
    sources and a config file to re-create the conditions required for
    building modules that would install correctly into a pre-buit
    kernel. Document this, remove faulty instructions from README.modules. 
                                                        closes: Bug#209278

 -- Manoj Srivastava <srivasta@debian.org>  Mon,  8 Sep 2003 23:19:55 -0500

kernel-package (8.057) unstable; urgency=low

  * Fixed an error in the kernel-img.conf man page. (.TP -> .TP .B).
    Thanks to Nicolas FranÃÃ¯Â¿ÅÃÂÂ§ois <nicolas.francois@centraliens.net>
                                                         closes: Bug#209066
  * Make make-kpkg remove the " from UTS Versions.       closes: Bug#209067
  * README.modules typo fix: --add-to-version -> --append-to-version
                                                         closes: Bug#209108

 -- Manoj Srivastava <srivasta@debian.org>  Mon,  8 Sep 2003 05:42:58 -0500

kernel-package (8.056) unstable; urgency=low

  * Updated the preinst to separate out the LILO instructions. 
                                                         closes: Bug#207907
  * Fixed regexp issues and an error in creating the kernel version for
    comparison. Patch thanks to Toni Timonen <ttimonen@users.sourceforge.net>
                                                     closes: Bug#208897
  
 -- Manoj Srivastava <srivasta@debian.org>  Fri,  5 Sep 2003 20:42:09 -0500

kernel-package (8.055) unstable; urgency=low

  * Updated README.modules to correct the procedure of building modules
    destined for an official kernel-image package.   closes: Bug#208482
  * Give in and let make-kpkg parse include/linux/version.h, so that it
    either aborts, or proceeds silently, when the file is present.

 -- Manoj Srivastava <srivasta@debian.org>  Thu,  4 Sep 2003 10:46:04 -0500

kernel-package (8.054) unstable; urgency=low

  * Expaded the user instructions in README.modules to handle building
    kernel modules for official kernel images.
  * Fixed a typo in kernel-pkg.conf man page.        closes: Bug#208187
  * For 2.6 kernels, add make prepare in the palce of the make dep for 2.4
    kernels.                                         closes: Bug#207986

 -- Manoj Srivastava <srivasta@debian.org>  Mon,  1 Sep 2003 11:28:49 -0500

kernel-package (8.053) unstable; urgency=low

  * The change for module compilation in header-only dirs doesn't work,
    because $#empty_array == -1 in perl.

 -- Manoj Srivastava <srivasta@debian.org>  Thu, 28 Aug 2003 01:04:29 -0500

kernel-package (8.052) unstable; urgency=low

  * UTS_RELEASE_VERSION calculation was off (need to double $ in a
    makefile).
  * Mention module-init-tools in the README files, though I doubt it shall
    do any good.

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 25 Aug 2003 20:42:11 -0500

kernel-package (8.051) unstable; urgency=low

  * Add a postinst hook for source and header images as well. This allows
    people to create scripts to do whatever they feel like doing when
    headers are instralled, including changing build symlinks if they
    wish.                                               closes: Bug#207145
  * Remove warnings if not in a kernel directory, but in a kernel-headers
    created directory, and if the only target command is a module related
    one. This is a massively reworked variation of the patch in the
    report, and should have the same functionality.     closes: Bug# 207194

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 25 Aug 2003 15:31:39 -0500

kernel-package (8.050) unstable; urgency=low

  * When creating the buildinfo file, look for versions of libc6, not just
    libc, since that pulls in all libraries staring with libc. 
                                            closes: Bug#206786, Bug#206788

 -- Manoj Srivastava <srivasta@debian.org>  Sat, 23 Aug 2003 11:20:24 -0500

kernel-package (8.049) unstable; urgency=low

  * In the spanish man pages, it is make-kpkg.1, not make-kpkg.8. Fixed.
  * Added a new config file option kpkg_follow_symlinks_in_src, and hte
    corresponding ENV variable, KPKG_FOLLOW_SYMLINKS_IN_SRC, for people
    who use symlink farms to compile kernels and also want to package
    kernel-source and kernel-headers packages.
  * Added a new section in the README file titled "MODULES_LOC, symlink
    farming, and more". 

 -- Manoj Srivastava <srivasta@debian.org>  Fri, 22 Aug 2003 12:18:22 -0500

kernel-package (8.048) unstable; urgency=low

  * Fixed usage of chown root.root in the rules files.
  * Also put the kernel-packageconfig spanish man page in the correct
    place.                                            closes: Bug#204365

 -- Manoj Srivastava <srivasta@debian.org>  Thu, 14 Aug 2003 12:15:05 -0500

kernel-package (8.047) unstable; urgency=low

  * Since the sample module rules were horribly out of date, and had
    serious shortcomings, and there are a number of modules packages
    extant to provide an example, the sample rules file was removed from
    the apckage. I really do think it was doing more harm than good.
                                            closes: Bug#150497, Bug#144207
  * Added a new sample postint hook script, that shows how local admins
    can enhance the symlinks policy to better suit their needs. This
    sample script implements the wishlist items requested by multiple
    people. I do not think that these should become the mainstream model;
    since the numbers of kernels linked to, the numbers of streams (2.4,
    2.5, -selinux, etc) depend so much on the local install. Instead, the
    vanilla symlink policy should be the default, as it is now, but now
    people can implement whatever policy they choose. 
                                           closes: Bug#201043, Bug#193201

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 11 Aug 2003 14:45:03 -0500

kernel-package (8.046) unstable; urgency=low

  * Man, the missing quotes thing does not want to go away. And testing at
    4 am does not work out. Yet another place quotes were missing.

 -- Manoj Srivastava <srivasta@debian.org>  Sun, 10 Aug 2003 11:51:42 -0500

kernel-package (8.045) unstable; urgency=low

  * Fix missing double quotes in the rules file. I don't know how this
    escaped testing ...                              closes: Bug#204797
  * Make the prompting to continue after a depmod problem optional in the
    kernel package postinstall script

 -- Manoj Srivastava <srivasta@debian.org>  Sun, 10 Aug 2003 04:41:14 -0500

kernel-package (8.044) unstable; urgency=low

  * This patch makes it possible to do things like --subarch=sparc64-smp,
    and --subarch=sparc-myhacks, and the rules file will still know that
    sparc64 == ARCH==sparc64, etc.                    closes: Bug#203936
  * Test the UTS_RELEASE in include/linux/version.h, and touch the
    Makefile if it does not match what we think the version is, so that
    the version.h file shall be rebuilt.              closes: Bug#204592
  * Add parentheses to fix bug cause by ! binding tightly in the check for
    the existence of version.h added last upload.     closes: Bug#204173
  * Fixed the name of spanish manpages. Reverted all pages to ISO-8859-1,
    since otherwise the spanish characters are broken closes: Bug#204365

 -- Manoj Srivastava <srivasta@debian.org>  Fri,  8 Aug 2003 14:13:44 -0500

kernel-package (8.043) unstable; urgency=low

  * Changed rules to facilitate building 64 Bit kernels on spac32, and
    vice versa. Patch from Ben Collins
  * Do not compress files in kernel-doc marked as executable. This caused
    lintian warnings.                                   closes: Bug#202177
  * Optionally silence the warning message with interactive prompt for
    --initrd switch (set INITRD_OK).                    closes: Bug#202406
  * Document the fact that make-kpkg scans to configuration for some basic
    config detaisl, namely, whetrher modules are enabled or not, so that
    toggling the state in delayed configuration using the --config switch
    is unsupported andshall cause the build to fail. The correct solution
    is to create a .config file as close to the desired one using make
    {x,meny,}config before calling make-kpkg (the --config switch is
    mostly useful for answering any additional questions introduced by
    patches).                                            closes: Bug#203112

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 30 Jul 2003 17:28:45 -0500

kernel-package (8.042) unstable; urgency=low

  * Remove stamps late in the game, so unpatching has a chance to actually
    work.                                                closes: Bug#200695
  * Tweak the initrd symlink creation; perhaps this iteration would fix
    the related Bug#200512.

 -- Manoj Srivastava <srivasta@debian.org>  Fri, 11 Jul 2003 02:21:37 -0500

kernel-package (8.041) unstable; urgency=low

  * Added clarifying text to the howto from Peter Hugosson-Miller and Doug
    MacFarlane about --revision and --append-to-version in the README files.
  * Fix a typo in the help output.                        closes: Bug#199354
  * Fix a image name mismatch that occurred while trying to install
    netwinder kernel images.

 -- Manoj Srivastava <srivasta@debian.org>  Tue,  1 Jul 2003 10:59:56 -0500

kernel-package (8.040) unstable; urgency=low

  * Removed latin1 chars from this changelog. Now we are all utf-8 cmopatible. 
  * Got a new rules file from Ben Collins that cleaned out the sparc
    section, and gave it new default names and all.       closes: Bug#196752

 -- Manoj Srivastava <srivasta@debian.org>  Mon,  9 Jun 2003 14:11:54 -0500

kernel-package (8.039) unstable; urgency=low

  * Added documentation (including MAKEFLAGS stuff)
  * Added spanish manual pages. Many thanks to Ruben Porras for providing
    the translation.                                      closes: Bug#195434
  * add stamp-kernel-configure to the list of stamps to clean up

 -- Manoj Srivastava <srivasta@debian.org>  Thu,  5 Jun 2003 15:44:56 -0500

kernel-package (8.038) unstable; urgency=low

  * rotate the initrd link even if the current image is not an initrd
    image; since if this is not an initrd image, the initrd symlink does
    not point to us, and should be rotated just like the image symlink was
    rotated.

 -- Manoj Srivastava <srivasta@debian.org>  Tue, 13 May 2003 02:11:31 -0500

kernel-package (8.037) unstable; urgency=low

  * Make a failed poatch a failure, since it may mess up the sources. 

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 12 May 2003 19:25:42 -0500

kernel-package (8.036) unstable; urgency=low

  * Warn if the target machine does not have mkinitrd iv we are installing
    an initrd image.                                         closes: Bug#192195

 -- Manoj Srivastava <srivasta@debian.org>  Tue,  6 May 2003 19:12:22 -0500

kernel-package (8.035) unstable; urgency=low

  * use mkdir in favour of $(make_directory) while creating the debian dir. 

 -- Manoj Srivastava <srivasta@debian.org>  Mon,  5 May 2003 12:28:37 -0500

kernel-package (8.034) unstable; urgency=high

  * reverse the sense of a conditional.                      closes: Bug#191429

 -- Manoj Srivastava <srivasta@debian.org>  Thu,  1 May 2003 04:46:38 -0500

kernel-package (8.033) unstable; urgency=high

  * Fixed missing space before right bracket errors pointed out by Daniel
    Schepler, which completely broke things for 2.4.20 kernels 
                                                 closes: Bug#191429, Bug#191430

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 30 Apr 2003 12:41:37 -0500

kernel-package (8.032) unstable; urgency=low

  * Make the compilation abort if no valid patches were found (since this
    is likely to be a typo of some sort).                    closes: Bug#191003

 -- Manoj Srivastava <srivasta@debian.org>  Sun, 27 Apr 2003 18:54:21 -0500

kernel-package (8.031) unstable; urgency=medium

  * Fix a problem with stamp-kernel-configure for 2.5 kernel
    builds. Thanks to Marcelo E. Magallon for the heads up.

 -- Manoj Srivastava <srivasta@debian.org>  Sun, 27 Apr 2003 14:18:34 -0500

kernel-package (8.030) unstable; urgency=low

  * No longer install /usr/doc links for kernel images. Have
    kernel-package now depend on perl, not perl5.            closes: Bug#189756
  * Pass on CONCURRENCY_LEVEL in the environment for all modules to
    use. Document it in README.modules.                      closes: Bug#189765

 -- Manoj Srivastava <srivasta@debian.org>  Sat, 19 Apr 2003 23:37:13 -0500

kernel-package (8.029) unstable; urgency=low

  * A whole bunch of typo fixes from RubÃÃ¯Â¿ÅÃÂÃ¯Â¿ÅÂ¯ÃÂ¿ÃÃÅn Porras 
                                     closes: Bug#189556, Bug#189557, Bug#189558

 -- Manoj Srivastava <srivasta@debian.org>  Fri, 18 Apr 2003 15:48:58 -0500

kernel-package (8.028) unstable; urgency=low

  * Make sure the docs do not recommend make-kpkg clean <any_other_target>
  * make make-kpkg complain less o clean targets

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 14 Apr 2003 13:22:20 -0500

kernel-package (8.027) unstable; urgency=low

  * Fix sparc rules once again, to account for newer kernel versions

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 14 Apr 2003 04:07:44 -0500

kernel-package (8.026) unstable; urgency=low

  * ignore bind mounts in fstab.                             closes: Bug#186401
  * Improved sparc rules from Ben Collins.                   closes: Bug#188406

 -- Manoj Srivastava <srivasta@debian.org>  Sun, 13 Apr 2003 15:14:26 -0500

kernel-package (8.025) unstable; urgency=low

  * Yike. typo fix.

 -- Manoj Srivastava <srivasta@acm.org>  Mon, 24 Mar 2003 23:17:40 -0600

kernel-package (8.024) unstable; urgency=low

  * Re named MODDIR to KDIST_DEST_DIR to avoid name space clashed. 
                                                 closes: Bug#185279, Bug#186181
  * Fix settin up OOT_CMD                                    closes: Bug#186177
  * Also pass in $(maintainer) to the modules, since this could be
    different from $(pgp).  This is for Bug#186187
  * Due to dependencies, 'make-kpkg buildpackage' results in the kernel
    being patched, configured, unpatched, cleaned, repatched and
    configured again before building starts.  Adding the -nc options to
    the commandline for dpkg-buildpackage would prevent it from calling
    'debian/rules clean' before it calls 'debian/rules binary'.  To insure
    the package is in a sane state if it was previously built, make
    buildpackage rely on 'clean' (this appears safe for a fresh kernel
    which does not even have the debian directory yet). Most of these
    fixes are thanks to chirik@castlefur.com.                closes: Bug#186190


 -- Manoj Srivastava <srivasta@acm.org>  Mon, 24 Mar 2003 23:02:52 -0600

kernel-package (8.023) unstable; urgency=low

  * Export MODDIR to modules so that they have an idea where to put the
    final debs, rather than just $(KSRC)/... This allows people building
    the .debs to be able to specify where the modules .debs go to. Also
    mentioned all the variables that are set in README.modules, since that
    file was out of date.                                    closes: Bug#185279
  * Also add MODULE_LOC to the list of ENVIRONMENT VARIABLES in the
    make-kpkg man page (it was already documented in the manual page, just
    not in the list)                                         closes: Bug#185859

 -- Manoj Srivastava <srivasta@acm.org>  Sat, 22 Mar 2003 12:58:48 -0600

kernel-package (8.022) unstable; urgency=low

  * Mention CC and HOSTCC in the README files.
  * Removed obsolete maintainer scripts, now that we no longer have to
    maintain the /usr/doc symbolic links.
  * revert the clean order since we now have non empty stamp files.
  * Fixt the cut-and-paste typo in postinst re warn_initrd.      closes: 183539

 -- Manoj Srivastava <srivasta@acm.org>  Thu,  6 Mar 2003 17:03:56 -0600

kernel-package (8.021) unstable; urgency=low

  * Fixed type in man page                                   closes: Bug#180543
  * Fixed typo in README                                     closes: Bug#181180
  * Improvements to kernel_grub_conf.sh and kernel_grub_rm.sh thanks to
    Gilles Sadowski. 
  * patch for arm related images which makes Image for netwinders and
    zImage for the rest from  Othmar Pasteka <pasteka@kabsi.at>
  * Run dist clean _after_ unpatching, since distclean removes the stamp
    files. Also, stamp files are not empty to start with now closes: Bug#182729
  * s|/usr/src/modules/|$(MODULE_LOC:-/usr/src/modules/)| in a few places,
    thanks to a suggestion by Helge Kreutzmann               closes: Bug#181181

 -- Manoj Srivastava <srivasta@acm.org>  Tue,  4 Mar 2003 10:53:46 -0600

kernel-package (8.020) unstable; urgency=low

  * Modified language in make-kpkg(1) to specify what one means when one
    says patch.                                              closes: Bug#180417

 -- Manoj Srivastava <srivasta@acm.org>  Mon, 10 Feb 2003 00:10:38 -0600

kernel-package (8.019) unstable; urgency=low

  * Pass the --pgpsign option to dpkg-buildpackage           closes: Bug#171124
  * Fix typo in rules for sparc                  closes: Bug#175512, Bug#174327
  * it is --rootcmd fakeroot, not -rfakeroot                 closes: Bug#177281
  * Change the behaviour of the 'PATCH_THE_KERNEL option to AUTO
                                                             closes: Bug#174216

 -- Manoj Srivastava <srivasta@acm.org>  Thu,  6 Feb 2003 13:31:50 -0600

kernel-package (8.018) unstable; urgency=low

  * Fix the sparc patch I added yesterday.
  * Thanks to Marc Haber, I think we have a handle on why make-kpkg seemed
    to ignore errors.                                        closes: Bug#139276

 -- Manoj Srivastava <srivasta@debian.org>  Tue, 24 Dec 2002 11:40:12 -0600

kernel-package (8.017) unstable; urgency=low

  * Hmm. move an apostrophe in hte man page.                 closes: Bug#169521
  * Add the currently running kernels configuration as a choice of last
    resort, to be used if there is no other way to get at a configuration
    file.                                                    closes: Bug#171416
  * use the compressed target on IA64, resulting in much smaller images.
    Thanks to Ian Wienand <ianw@gelato.unsw.edu.au>.         closes: Bug#173396
  * It's looking like 2.4 and 2.6 will have different targets and output
    locations for sparc. Made kernel-package aware of that.
  * Try and solve the removal of applied patches issue. untested, but
    should work.                                             closes: Bug#170612

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 23 Dec 2002 17:28:57 -0600

kernel-package (8.016) unstable; urgency=low

  * Added explanatory text to the make-kpkg manual page.     closes: Bug#169122

 -- Manoj Srivastava <srivasta@debian.org>  Thu, 14 Nov 2002 17:30:40 -0600

kernel-package (8.015) unstable; urgency=low

  * Fix typo in make-kpkg that prevented running code for detecting version
    mismatch.                                                closes: Bug#163744

 -- Manoj Srivastava <srivasta@debian.org>  Fri,  8 Nov 2002 18:42:35 -0600

kernel-package (8.014) unstable; urgency=low

  * Fix typo in man page                                     closes: Bug#167861
  * Depend on c-compiler, not gcc                            closes: Bug#167970
  * Allow for a new option to also install vmlinux (only useful as yet on
    i386 machines. Johannes Stezenbach provided the initial patch, which I
    reworked to not fail on other architectures. 
  * recognize the supercesion of fileutils by coreutils      closes: Bug#167809

 -- Manoj Srivastava <srivasta@debian.org>  Wed,  6 Nov 2002 03:05:46 -0600

kernel-package (8.013) unstable; urgency=low

  * Incorporated kernel modules packager HOWTO.              closes: Bug#167483
  * Fix initrd handling for official kernels                 closes: Bug#167497
  * Include the top level Makefile with the kernel headers, as some
    modules seem to eed that (openafs-modules-source)

 -- Manoj Srivastava <srivasta@debian.org>  Sat,  2 Nov 2002 21:27:11 -0600

kernel-package (8.012) unstable; urgency=low

  * Document the HEADER_CLEAN_HOOK and DOC_CLEAN_HOOK.

 -- Manoj Srivastava <srivasta@debian.org>  Tue, 29 Oct 2002 21:49:56 -0600

kernel-package (8.011) unstable; urgency=low

  * Added a note to the initrd section mentioning that it is the initrd
    cramfs patch that one is talking about.                  closes: Bug#166062
  * Added header_clean_hook and doc_clean_hook, analogous to
    source_clean_hook.                                       closes: Bug#160830
  * remove file utils from dependencies.                     closes: Bug#161450
  * fixed spelling error                                     closes: Bug#162070
  * Do not caution for initrd options for official images.   closes: Bug#162708
  * I give in. kernel-package now depends on gcc and make.   closes: Bug#166189
  * added patch for README.modules from  Nicolas Sabouret    closes: Bug#165151

 -- Manoj Srivastava <srivasta@debian.org>  Tue, 29 Oct 2002 15:10:20 -0600

kernel-package (8.010) unstable; urgency=low

  * Warn early on version mismatch.                          closes: Bug#160460
  * ensure that stamp-patch is added and removed at appropriate places. 
                                                             closes: Bug#160219
  * Changed the initrd relationship to be a dependency for an kernel image
    that uses initrd, as opposed to a suggestion, since the tools are
    really required.                                         closes: Bug#160276

 -- Manoj Srivastava <srivasta@debian.org>  Fri, 13 Sep 2002 00:00:41 -0500

kernel-package (8.009) unstable; urgency=low

  * Improved documentation for SOURCE_CLEAN_HOOK.            closes: Bug#159799
  * Allow removal of the kernel-image pointed to by /vmlinuz.
    kernel-package has never done promotion of /vmlinuz.old to /vmlinuz,
    and I am reluctant to start now (too many things can go wrong). In all
    cases, the postrm warns when removing dangling symlinks (/vmlinuz,
    /vmlinuz.old). Since there are diagnostics, and the human can take
    action, I am closing this report.                        closes: Bug#157184
  * Since the pcmcia maintainer has taken action this but report is now
    moot. However, the one point to be addressed in the report is what
    happens if the pcmcia-modules package is installed first; in that
    case, the kernel-image preinst shall throw a hissy fit, since
    /lib/modules/X.Y.ZZ/ dir shall exist, and make the human take
    corrective action (or expect breakage).                  closes: Bug#147077

 -- Manoj Srivastava <srivasta@debian.org>  Fri,  6 Sep 2002 00:10:04 -0500

kernel-package (8.008) unstable; urgency=low

  * Hack ake-kpkg so that a clean command by itself always sets debian
    revision, optionally reading from the changelog if it exists. This is
    a hack meant for people who have set options to make the debian
    revisions mandatory, but call clean on a pristince source directory.
    This then overrides whatever is in the conf file, but that should not
    matter, since we are just going to clean anyway.         closes: Bug#155749
  * Provide for means of setting up hook scripts that are run while
    packaging the sourc, and can poiunt to executable that massage the
    source tree before packaging. Can be used, for example, to get rid of
    version control trees, rune away unwanted architectures, etc. 
                                                             closes: Bug#157128
  * Clarified the option inage_on_boot. The new name is going to be
    link_in_boot.

 -- Manoj Srivastava <srivasta@debian.org>  Sat, 31 Aug 2002 20:14:44 -0500

kernel-package (8.007) unstable; urgency=low

  * Change CONFIG_PSMOUSE to y instead of m for the lone config file that
    had that value; since that kernel var is no longer a tristate var; and
    the m confused things.                                  closes: Bug#156478
  * document that an empty ./debian/official file is removed by make
    mrproper, and thus fails to prevent ./debian dir from being removced
    in a clea.                                              closes: Bug#156970

 -- Manoj Srivastava <srivasta@debian.org>  Sun, 18 Aug 2002 05:14:53 -0500

kernel-package (8.006) unstable; urgency=low

  * Fix typo in postrm. closes: Bug#156579, Bug#156927, Bug#156853, Bug#157132
  * Also closes: Bug#157101, Bug#157087, Bug#156292
  * Clean first, then unpatch.                               closes: Bug#157099

 -- Manoj Srivastava <srivasta@debian.org>  Sun, 18 Aug 2002 04:05:01 -0500

kernel-package (8.005) unstable; urgency=low

  * Fixed a typo in image postinst, allowing us to make relative links. 
                                                             closes: Bug#153788
  * Ask before unlinking modules.dep if we have initrd.      closes: Bug#154648
  * The postrm now knows that the initrd symlinks are in the same place
    that the image symlinks are.                             closes: Bug#150777
  * fix implementation of automated patcheing so that the configuration
    variable patch_the_kernel can be set to AUTO as well, not just the env
    variable. Caught by ingo at gmx.net as well.             closes: Bug#152653
  * Added big warnings that the initrd option requires a non-standard
    cramfs patch, enerally shipped with Debian supplied kernel sources,
    but not in the upstream sources.                         closes: Bug#149236
  * Make the patches unapply in reverse order                closes: Bug#151862
  * Chomp mount output                           closes: Bug#156078, Bug#156025

 -- Manoj Srivastava <srivasta@debian.org>  Sat, 10 Aug 2002 10:52:50 -0500

kernel-package (8.004) unstable; urgency=low

  * Mention that the symbolic links are not manipulated when the package
    is upgrade -- only on initial install.                   closes: Bug#146371
    This was actually done in 7.105 on user request (or else we were left
    with two symlinks pointing to the same image). At this point, I
    suggest that people use the post inst hooks to add symlinks, if they
    wish. 
  * use which instead of command -v
  * Added Kent's 10-Step Procedure to Compiling a Debian Kernel, derived
    from a posting on debian-user by Kent West <westk@nicanor.acu.edu>
  * Document that root-cmd is meant for the buildpackage target, and
    mention the env variable ROOT_CMD.                       closes: Bug#147770

 -- Manoj Srivastava <srivasta@debian.org>  Thu, 30 May 2002 11:50:38 -0500

kernel-package (8.003) unstable; urgency=low

  * fix typo.                                         really closes: Bug#145720
  * Fix the setting for CONFIG_SCSI_SYM53C8XX_MAX_TAGS for some
    pre-installed config files.                              closes: Bug#146351
  * fixed typo.                                  closes: Bug#146470, Bug#146770

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 13 May 2002 03:17:11 -0500

kernel-package (8.002) unstable; urgency=low

  * Fixed a couple of spelling errors in the man page.       closes: Bug#146010
  * Move the run parts for extra files into the image target. Document
    this ./debian/image.d/ directory, as well as the ./debian/postinstall
    script, and pass in the location of the top of the package being
    build, as well as the kernel version, to the scripts, and document
    that as well.

 -- Manoj Srivastava <srivasta@debian.org>  Mon,  6 May 2002 10:15:47 -0500

kernel-package (8.001) unstable; urgency=low

  * Do not talk about lilo optional flags unless we are using lilo
  * Added a "then" in a dialogue.                            closes: Bug#145720
  * fix location of kernel sources.                          closes: Bug#145395
  * Added a run-parts ./debian/image.d/ to allow patches to install
    arbitary files (like /boot/Kerntypes-${KVERSION}) in the deb, or take
    other action.                                            closes: Bug#145695
  * For initrd images, do not remove modules.dep even on depmod
    failure. Instead, issue dire warnings spelling out the effect of a
    malfunctioning or missing modules.dep. For non-initrd kernels, just
    delete modules.dep as always, it gets recreated on boot. closes: Bug#145739

 -- Manoj Srivastava <srivasta@debian.org>  Sat,  4 May 2002 14:16:39 -0500

kernel-package (7.112) unstable; urgency=medium

  * Use a simple string match, not a regexp match, when comparing
    versions.                                                closes: But#144489

 -- Manoj Srivastava <srivasta@debian.org>  Thu, 25 Apr 2002 09:28:01 -0500

kernel-package (7.111) unstable; urgency=medium

  * Fix typo in the rules file                               closes: Bug#144301
  * Don't mention that /etc/mbr.b comes from the mbr package.closes: Bug#144370

 -- Manoj Srivastava <srivasta@debian.org>  Thu, 25 Apr 2002 02:27:55 -0500

kernel-package (7.110) unstable; urgency=medium

  * Really allow using lables in fstab                       closes: Bug#144095

 -- Manoj Srivastava <srivasta@debian.org>  Tue, 23 Apr 2002 02:00:29 -0500

kernel-package (7.109) unstable; urgency=low

  * Add grub to the recommends list whenever we reocmmend lilo. 
                                                             closes: Bug#143954

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 22 Apr 2002 08:31:00 -0500

kernel-package (7.108) unstable; urgency=low

  * Fixed a typo in the postinst (removed a .)               closes: Bug#143822
  * A first cut at documenting the patches applied automatically to a
    kernel image.                                            closes: Bug#143819

 -- Manoj Srivastava <srivasta@debian.org>  Sun, 21 Apr 2002 17:37:27 -0500

kernel-package (7.107) unstable; urgency=low

  *  marks debian as phony and removes it from stamp-* dependencies where
    stamp-debian is used instead. Thanks to Herbert Xu for the patch.
                                                             closes: Bug#142773

 -- Manoj Srivastava <srivasta@debian.org>  Sun, 14 Apr 2002 11:52:46 -0500

kernel-package (7.106) unstable; urgency=medium

  * Only move initrd symlinks when we move image symlinks.

 -- Manoj Srivastava <srivasta@debian.org>  Fri, 12 Apr 2002 21:11:28 -0500

kernel-package (7.105) unstable; urgency=medium

  * Fixed various typos in the kernel-doc package descriptions. 
                                                             closes: Bug#140709
  * Changed the bash complewtions function name.             closes: Bug#142492
  * Fixed a last check to aid cross compilation              closes: Bug#142044
  * Fixed a bunch of typos in diagnostics.                   closes: Bug#142234
  * Really remove dangling symlinks on purge.                closes: Bug#141483
  * Only move image symlinks around if we are not being upgraded. Thaks to
    Herbert Xu for suggesting this.

 -- Manoj Srivastava <srivasta@debian.org>  Fri, 12 Apr 2002 15:02:14 -0500

kernel-package (7.104) unstable; urgency=low

  * Fix the rules file to short circuit a twisty set of confusing
    dependencies for configuration related targets.  The bug it closes
    used an non-standard build method (--rootcmd fakeroot is how I do it),
    but it used to work before, and it should do so again. Hopefully
    nothing else broke.                                      closes: Bug#140455

 -- Manoj Srivastava <srivasta@debian.org>  Fri, 29 Mar 2002 09:59:40 -0600

kernel-package (7.103) unstable; urgency=low

  * Added the potential value AUTO for PATCH_THE_KERNEL, which is useful
    when you want the patches applied whenever you set
    --applied-patches. One would not want to set the variable to YES,
    since that would apply all patches willy nilly when you did not use
    the --applied-pacthes option.                            closes: Bug#140047

 -- Manoj Srivastava <srivasta@debian.org>  Tue, 26 Mar 2002 21:23:49 -0600

kernel-package (7.102) unstable; urgency=low

  * revert the last change, since rebuilding the kernel-image may well be
    too onerous. Also, this may not actually fix 39276. closes: Bug#139606
    BTW, I don't think this was important, this is merely a normal bug. 

 -- Manoj Srivastava <srivasta@debian.org>  Sat, 23 Mar 2002 11:30:38 -0600

kernel-package (7.101) unstable; urgency=low

  * It is supposed to be $(filter-out), not $(filler-out).   closes: Bug#139272
  * Hmm. Make the modules tarhet depend on stamp-image, so make knows not
    to try and build the modules packages is the kernel-image build
    fails. It does mean though that you need a stamp-image file in the
    diretory in order to build the modules -- not a biggie since building
    modules fails anyway                                     closes: Bug#139276
  
 -- Manoj Srivastava <srivasta@debian.org>  Thu, 21 Mar 2002 09:52:23 -0600

kernel-package (7.100) unstable; urgency=low

  * Hmm. There was a bug report that said kernel-package does not call
    make correctly when concurrency is set; however, this happens to be a
    mischaracterization. The top level make call a recursive make: $(MAKE)
    -j2; the level 2 make then calls another sub make, and the level 3
    make spits out the error that it is running with -j1, as documneted. I
    have cleaned up soe of the rules involved to get greater transparency
    in the phenomena. Also, remove benign warning about not finding the
    MODULES_LOC dir.                                         closes: Bug#139132
  * Make the bash completions file go in the right place.

 -- Manoj Srivastava <srivasta@debian.org>  Tue, 19 Mar 2002 23:11:59 -0600

kernel-package (7.99) unstable; urgency=high

  * The last fix broke kernel-package.                       closes: Bug#138684

 -- Manoj Srivastava <srivasta@debian.org>  Sat, 16 Mar 2002 23:25:26 -0600

kernel-package (7.98) unstable; urgency=low

  * Changed a potentially confusing postinst message.

 -- Manoj Srivastava <srivasta@debian.org>  Sat, 16 Mar 2002 11:19:02 -0600

kernel-package (7.97) unstable; urgency=low

  * Don't issue a boot block warning if we are not installing a boot
    loader.                                                  closes: Bug#138534
  * Thanks to "Dr. Rafael Sepulveda" <drs@gnulinux.org.mx>, we havce a
    bash completions file for make-kpkg.

 -- Manoj Srivastava <srivasta@debian.org>  Sat, 16 Mar 2002 01:38:48 -0600

kernel-package (7.96) unstable; urgency=low

  * Support labels in /etc/fstab. closes: Bug#121127, Bug#136949

 -- Manoj Srivastava <srivasta@debian.org>  Tue,  5 Mar 2002 14:53:47 -0600

kernel-package (7.95) unstable; urgency=low

  * Added an undocumented feature: if ./debian/post-install exists, it
    shall be executed during the image build process. This allows people
    (well, this is designed for kernel-image maintainers) to hack the
    package before dpkg-* are called.                        closes: Bug#136735
  * Fixed missed up $(DEB_BUILD_ARCH) -> $(DEB_HOST_ARCH)    closes" Bug#136738

 -- Manoj Srivastava <srivasta@debian.org>  Mon,  4 Mar 2002 16:42:12 -0600

kernel-package (7.94) unstable; urgency=low

  * bumped the default version.                              closes: Bug#136432

 -- Manoj Srivastava <srivasta@debian.org>  Sun,  3 Mar 2002 12:09:00 -0600

kernel-package (7.93) unstable; urgency=low

  * Kernel-package currently has no proper bootloader handling for
    mipsel. This patch, provided by (a modification by the origina;l
    written by Guido Guenther <agx@debian.org>) Karsten Merker
    <karsten@excalibur.cologne.de>, adds this capability.    closes: Bug#136331

 -- Manoj Srivastava <srivasta@debian.org>  Fri,  1 Mar 2002 11:56:50 -0600

kernel-package (7.92) unstable; urgency=low

  * Cross-compiling a PowerPC kernel fails after the modules_install step
    because ARCH isn't passed.  There are also some other places where the
    PowerPC logic assumes you're running on the target (not
    cross-compiling). Thanks to "Eric C. Cooper" <ecc@cmu.edu> for the
    patch.                                                   closes: Bug#136080

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 27 Feb 2002 12:48:18 -0600

kernel-package (7.91) unstable; urgency=low

  * When cross compiling, if System.map is present, and we call
    modules_install, depmod is run. Howevr, we may call modules_install
    when packaging the kernel, and depmod then fails. Therefore, if
    KERNEL_CROSS is defined, move System.map put of the way before calling
    modules_install, and move it back afterwards.           closes: Bug#135974

 -- Manoj Srivastava <srivasta@debian.org>  Tue, 26 Feb 2002 21:40:27 -0600

kernel-package (7.90) unstable; urgency=low

  * clarified the --added-patches option.                    closes: Bug#135254

 -- Manoj Srivastava <srivasta@debian.org>  Fri, 22 Feb 2002 14:05:45 -0600

kernel-package (7.89) unstable; urgency=low

  * Bah. Make vars are $(BLAH), not $BLAH. Silly typos. Thanks for the
    catch go to James Mayer <james.mayer@acm.org>            closes: Bug#134921
  * Go the whole hog and provide preinst and prerm hooks as well, so
    people can do what they wish.                            closes: Bug#134891

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 20 Feb 2002 22:52:59 -0600

kernel-package (7.88) unstable; urgency=low

  * ramdisk = 0 settings in lilo.conf prevent initrds from working
    (duh). Despite feeling of unease abot creeping featuritis, I have
    added this to the preinst check that image packages perform if you
    are installing an initrd image. Adding complexity to the maintainer
    scripts make it more likely to have bugs, and I don't really think
    kernel image packages should be lilo lints.              closes: Bug#134556

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 18 Feb 2002 15:36:43 -0600

kernel-package (7.87) unstable; urgency=low

  * Since the usage messaes are so long, do not output usage on error,
    since they may mask the error; instead tell the user how to get
    command line or target help.                             closes: Bug#134116
  * Added a patch from Guido Guenther <agx@sigxcpu.org> to add bootloader
    support for mips ip22.  It furthermore changes the default kernel
    format from ecoff to elf on mip since this is what the bootloader
    expects. People needing an ecoff kernel(for whatever reason) can
    easily convert the elf kernel to ecoff using elf2ecoff(from the mips
    tools package).                                          closes: Bug#134560
  * Well, since I have reports that only 2.2 kernels can't meke dep in
    parrallel, I have now re-enabled make dep in parrallel for post 2.3
    kernel versions. I wish there was somew better way to determine if
    make -jN dep were feasible instead of guessing by version numbers.

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 18 Feb 2002 09:07:41 -0600

kernel-package (7.86) unstable; urgency=low

  * Changed the man page and update the warning message for a pre existing
    version.h file.
  * Apparently, one should not tun make -j2 dep. So, do not make deb in
    parrallel even when OCNCURRENCY_LEVEL is set.            closes: Bug#134263

 -- Manoj Srivastava <srivasta@debian.org>  Sat, 16 Feb 2002 12:37:17 -0600

kernel-package (7.85) unstable; urgency=low

  * Add the two missing options in the run time help.        closes: Bug#132397
  * Add env section in man page.                             closes: Bug#132398

 -- Manoj Srivastava <srivasta@debian.org>  Tue,  5 Feb 2002 03:19:43 -0600

kernel-package (7.84) unstable; urgency=low

  * Well, apparently the space separated list of modules/patches is not
    working. Separating by commas still works. Since no one has complained
    before, I'm just discontinuing support for space separated lists (the
    quoting complexities are making my eyes cross).          closes: Bug#131157

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 28 Jan 2002 12:37:11 -0600

kernel-package (7.83) unstable; urgency=low

  * The boot-floppies normally create /etc/zipl.conf on s390 but when this
    file is not there a newly installed kernel creates one. However, it
    uses the syntax of lilo.conf which is totally wrong. The following
    patch fixes the problem, it always creates the same zipl.conf because
    you can't specify a root device there. Many thanks to Stefan Gybas
    <gybas@trustsec.de> for providing this patch.            closes: Bug#130561


 -- Manoj Srivastava <srivasta@debian.org>  Thu, 24 Jan 2002 10:34:13 -0600

kernel-package (7.82) unstable; urgency=low

  * Add the option minimal_swap,                             closes: Bug#128885

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 21 Jan 2002 21:50:28 -0600

kernel-package (7.81) unstable; urgency=low

  * Hmm. The fix for Bug#126319 and Bug#126739 instead broke all kinds of
    symlink creation, and really needed a lot more attention to detail. I
    think that is in place now.                              closes: Bug#128885
  * The initrd code has been revamped, and shoul no longer create postinst
    scripts that mysteriously think they are initrd scripts. closes: Bug#97956

 -- Manoj Srivastava <srivasta@debian.org>  Sun, 13 Jan 2002 00:46:09 -0600

kernel-package (7.80) unstable; urgency=low

  * Fix a last remaing reference to the old initrd image in the post rm. 
                                                             closes: Bug#128698

 -- Manoj Srivastava <srivasta@debian.org>  Fri, 11 Jan 2002 14:57:14 -0600

kernel-package (7.79) unstable; urgency=low

  * Fix some more problems with mipsel that would have been fixed had I
    applied the patch in #124128

 -- Manoj Srivastava <srivasta@debian.org>  Fri, 11 Jan 2002 00:46:53 -0600

kernel-package (7.78) unstable; urgency=low

  * Added more documentation pointing to the support for non-LILO boot
    loaders as well. 
  * Fixed a FLAVOURS patch in FLAVOURS.gz that may have caused some
    problems. 

 -- Manoj Srivastava <srivasta@debian.org>  Mon,  7 Jan 2002 09:46:26 -0600

kernel-package (7.77) unstable; urgency=low

  * Fix image.postrm to know about the new initrd name.      closes: Bug#126738
  * Fix the version checking to also flag a upstream version with no
    digits, since dpkg-deb chokes on that.                   closes: Bug#127240
  * Fixed a cramfs cleanup (fix from Herbert Xu)             closes: Bug#127072
  * Add an environment var for cross compile and arch opts. Also allow for
    a mismatch between the architecture and DEB_BUILD_ARCH to flag a cross
    compilation                                              closes: Bug#127887
  * Make sure that root_cmd is prefixed with -r even when set in the
    config file                                              closes: Bug#127828
  * Apparently we no longer want to ship coff images, and hence the patch
    in this bug report has been superceded by the one already applied.
                                                             closes: Bug#124128
  * Fix the bug in comparing the target of the /vmlinuz symbolic link to
    the image we are installing.  I do not like the \test, since it could
    be fooled by complex links, but I'll let this version stand until I
    have a test case of failures.                closes: Bug#126319, Bug#126739
  * Do not warn about versions unless there is a mismatch.   closes: Bug#127402

 -- Manoj Srivastava <srivasta@debian.org>  Sun,  6 Jan 2002 04:08:44 -0600

kernel-package (7.76) unstable; urgency=low

  * make the append-to-version and version.h warning be optionally turned
    off with an env var.                                     closes: Bug#122222
  * Fix the kernel_source target                             closes: Bug#126047
  * Fix mips/mipsel images in the rules file                 closes: Bug#123895
  * Include patch for s390                                   closes: Bug#123665
  * Apply spelling fixes to man page                         closes: Bug#122930
  
 -- Manoj Srivastava <srivasta@debian.org>  Fri, 21 Dec 2001 15:27:36 -0600

kernel-package (7.75) unstable; urgency=low

  * fix the building of kernel images for mipsel and changes the name of
    the kernel-images from vmlinuz to vmlinux since it's not compressed at
    all.                                                     closes: Bug#119708
  * If /vmlinux.old does not exist, then it is not a symlink.  It would
    still be appropriate to clobber it.                      closes: Bug#119741
  * Fix typo in postinst.                                    closes: Bug#120419
  * Fix the cramfs cleanup, thanks to Herbert Xu closes: Bug#121145, Bug#119722
  * Fix the image.preinst to point users to /initrd.img      closes: Bug#121956
  * Fix problems linking to correct initrd                   closes: Bug#121960
  * Fix numbering problems in REAME.modules steps            closes: Bug#120981
  * The kernel headers now contain a .config file            closes: Bug#122009

 -- Manoj Srivastava <srivasta@debian.org>  Sat,  1 Dec 2001 18:22:39 -0600

kernel-package (7.74) unstable; urgency=low

  * The initrd image was wrongly named in /boot. Fixed,   

 -- Manoj Srivastava <srivasta@debian.org>  Tue, 13 Nov 2001 13:39:17 -0600

kernel-package (7.73) unstable; urgency=low

  * Delete scripts/cramfs before building the source pkg     closes: Bug#119375

 -- Manoj Srivastava <srivasta@debian.org>  Tue, 13 Nov 2001 01:58:23 -0600

kernel-package (7.72) unstable; urgency=low

  * Fixed an example file in which I was using source, and insisted it was
    POSIX, maligning the ash maintainer; oblivious to the fact that I was
    reading details of ex(1), not sh(1). I do apologize.    closes: Bug#116200

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 12 Nov 2001 14:55:18 -0600

kernel-package (7.71) unstable; urgency=low

  * exported all kinds of vars that give the location of kernel patches.
    This should help with Bug#118058
  * Added a new variable NO_UNPATCH_BY_DEFAULT.              closes: Bug#119268
  * Renamed the initrd symlink to /initrd.img so it no longer conflicts
    with a dir of the name people seem to have. Also added diagnostics if
    the target happens to be a dir, not a symlink or file. I added yet
    another backwards compatibility measure.                 closes: Bug#114487

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 12 Nov 2001 12:30:02 -0600

kernel-package (7.70) unstable; urgency=high

  * Added patches for s390, from Jochen <jr@debian.s390.org> closes: Bug#115713
  * remove /lib/modules/X.Y.Z/modules.ieee1394map            closes: Bug#115425
  * Remove some over aggressive version checks.  closes: Bug#117515, Bug#117896
                                                             closes: Bug#115097
  * Do not move symlinks about if either the old or the new symlink
    already points to the image being installed.             closes: Bug#117483

 -- Manoj Srivastava <srivasta@debian.org>  Fri,  2 Nov 2001 02:16:02 -0600

kernel-package (7.69) unstable; urgency=medium

  * Only complain about version mismatches on selected targets (read: not
    on clean)                                                closes: Bug#114330

 -- Manoj Srivastava <srivasta@debian.org>  Wed,  3 Oct 2001 11:50:30 -0500

kernel-package (7.68) unstable; urgency=medium

  * Hmm, perhaps clean should not check for rootness. (If sudo was used,
    make clean will fail if not run as root.                 closes: Bug#114129
  * Hmm. Overzealous versions checking.                      closes: Bug#114198

 -- Manoj Srivastava <srivasta@debian.org>  Tue,  2 Oct 2001 11:03:46 -0500

kernel-package (7.67) unstable; urgency=low

  * Hmm. Now error out if there is a version mis-match (say, because of
    forgeting a --append_to_version on subsequent calls      closes: Bug#113874

 -- Manoj Srivastava <srivasta@debian.org>  Mon,  1 Oct 2001 12:06:49 -0500

kernel-package (7.66) unstable; urgency=low

  * Optionally make --revision mandatory. (is this feeping creaturism
    yet?)                                                   closes: Bug#113934

 -- Manoj Srivastava <srivasta@debian.org>  Sun, 30 Sep 2001 03:59:09 -0500

kernel-package (7.65) unstable; urgency=low

  * Remember to unpatch the kernel even of the env varis not on during
    cleanup.                                                 closes: Bug#113560
  * Removed binaries from kernel-source packages             closes: Bug#113832
  * The man page now mentions that --revision has a default  closes: Bug#113702
  * Provide an upgrade path to the new initrd symlink loc    closes: Bug#113406

 -- Manoj Srivastava <srivasta@debian.org>  Sat, 29 Sep 2001 16:55:51 -0500

kernel-package (7.64) unstable; urgency=low

  * Added more customization to the default boot loader file created for
    hppa. Many thanks to  Richard Hirst <rhirst@linuxcare.com>, both for
    his contribution, and his patience with my thick headedness.
  * Fix a typo in the rules file (thanks to Bdale Garbee to finding
    this). I was totally oblivious to this now rather obvious typo.
                                                             closes: Bug#112444

 -- Manoj Srivastava <srivasta@debian.org>  Fri, 21 Sep 2001 22:32:09 -0500

kernel-package (7.63) unstable; urgency=medium

  * Suppress the question before running the boot loader (optionally).
  * AAArgh. $$(id -u) -eq 0; not $$(id -u) -ne 0.            closes: Bug#111881

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 10 Sep 2001 11:48:27 -0500

kernel-package (7.62) unstable; urgency=low

  * experimental change to allow root_cmd to be used on every target.
    This may break things.                       closes: Bug#95582, Bug#107561
  * Add an option to prevent the preinst from whining about existing
    /lib/modules/$version
  
 -- Manoj Srivastava <srivasta@debian.org>  Sat,  8 Sep 2001 16:08:33 -0500

kernel-package (7.61) unstable; urgency=low

  * Changed the message about preexisting /lib/modules/$version directory
    since that dir may exist due to a stand alone modules package being
    installed at the same time (we can not depend on any unpack
    ordering).                                               closes: Bug#110845
  * Change question asking whether or not to syumlink.       closes: Bug#111382
  * Do not pass in an empty CROSS_COMPILE= into the kernel build, since
    this breaks hppa builds.                                 closes: Bug#111452

 -- Manoj Srivastava <srivasta@debian.org>  Sat,  8 Sep 2001 13:44:30 -0500

kernel-package (7.60) unstable; urgency=low

  * Fix suggest dependency in the image package.             closes: Bug#110125
  * Changed the documentation not to suggest that ROOT_CMD is a viable way
    to use fakeroot.                                         closes: Bug#110292
  * The initrd symlinks were dangling symlinks, and were placed in
    /boot. The initrd symlinks are now in the same place as the vmlinuz
    symlinks are created. How come there was no bug report about this?
    Thanks to Roland Mas for pointing this out.
  * Include the config file for the headers package as well. Also include
    env varibles used in the tool chain ($GCC, $CC, CFLAGS, etc). This is
    based on Miquel van Smoorenburg's mail on debian-devel
  * Added some changes for ia64. Since elilo lives in /usr/bin, we change
    "/sbin/$loader" in to "$loaderloc". Also, for elilo, since it can ask
    the user for interactive input, we make the prompts visible to
    it. These changes were massaged from the ones generated by  Richard
    Hirst <rhirst@linuxcare.com>. Oh, and the image is now compressed.
                                                             closes: Bug#110826

 -- Manoj Srivastava <srivasta@debian.org>  Mon,  3 Sep 2001 13:09:56 -0500

kernel-package (7.59) unstable; urgency=low

  * Fixed a typo in installing a readme file for the doc package. 
                                                 closes: Bug#107026, Bug#108440
  * Fixed a problem with the mindless replacement of =L in the image
    postinst.                                                closes: Bug#107899
  * No longer suggest task-tcltk-dev, since it no lionger exists. Of
    course, there is not devcent way to suggest a tcl/tk devel env, so we
    silently ignore it. This Sucks.                          closes: Bug#108776
  * Fixed a typo in make-kpkg                                closes: Bug#107854
  * Disable the vbersion.h warning for official kernels      closes: Bug#108468
  * Added various bits of documentation about configuring for
    initrd. Changed the question in image.preinst, as well as changing the
    description of the kernel image packages.                closes: Bug#108624
  * After talking with the submitter, the slowdown reported in the bug was
    from unrelated reasons, and one can't explain the system.map
    glitch. We decided to chalk this up as perhaps a kernel issue, and to
    reopen this bug if we could get something that indicates otherwise. 
                                                             closes: Bug#103958

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 20 Aug 2001 01:30:21 -0500

kernel-package (7.58) unstable; urgency=low

  * disable the making of boot floppies for initrd kernels.  closes: Bug#107415

 -- Manoj Srivastava <srivasta@debian.org>  Thu,  2 Aug 2001 10:45:08 -0500

kernel-package (7.57) unstable; urgency=low

  * Incorporated s390 specific patches.                      closes: Bug#107402
  * Apparently, the APUS folks do not have a boot loader. So far, they had
    been saying no to all blandishments from the kernel image package to
    let it run lilo for them. This has now been corrected, thanks to a
    nifty patch from Colin Walters <walters@cis.ohio-state.edu>. This
    should do it.                                            closes: Bug#107278

 -- Manoj Srivastava <srivasta@debian.org>  Wed,  1 Aug 2001 22:23:44 -0500

kernel-package (7.56) unstable; urgency=low

  * an initial patch which at least prevents the generated postinst from
    trying to run QUIK on a NewWorld pmac from Colin Walters
    <walters@cis.ohio-state.edu>. 
  * Additional patches that turn off boot floppy creation on powermac
    harware altogether. These changes together              closes: Bug#100579

 -- Manoj Srivastava <srivasta@debian.org>  Tue, 31 Jul 2001 01:43:41 -0500

kernel-package (7.55) unstable; urgency=low

  * Fixed a typo in the grub example scripts.                closes: Bug#106387
  * Document that append_to_version is fragile.              closes: Bug#106276
  * make dep not run in parallel                             closes: Bug#106278

 -- Manoj Srivastava <srivasta@debian.org>  Tue, 24 Jul 2001 12:14:34 -0500

kernel-package (7.54) unstable; urgency=low

  * Nope, that wasn't it. Despite testing it, I needed to test both the
    official and the unofficial code paths. 

 -- Manoj Srivastava <srivasta@debian.org>  Thu, 19 Jul 2001 10:23:45 -0500

kernel-package (7.53) unstable; urgency=low

  * Out, out, damned spot -- will ye never go? Yet another attempt to fix
    Bug#101332, Bug#105275, Bug#105280, Bug#105469 

 -- Manoj Srivastava <srivasta@debian.org>  Thu, 19 Jul 2001 09:14:50 -0500

kernel-package (7.52) unstable; urgency=low

  * Added append_to_version back to make-kpkg. It had mysteriously
    disappeared.                                             closes: Bug#105270

 -- Manoj Srivastava <srivasta@debian.org>  Tue, 17 Jul 2001 21:33:49 -0500

kernel-package (7.51) unstable; urgency=low

  * Brown paper bag time. I was installing the readme file in
    ./debian/tmp-source even for pacjages that that dir was
    inappropriate.       closes: Bug#101332, Bug#105275, Bug#105280, Bug#105469
  * Only put one README file in the kernel-package /usr/share/doc
    heirarchy.                                               closes: Bug#105540

 -- Manoj Srivastava <srivasta@debian.org>  Tue, 17 Jul 2001 18:37:57 -0500

kernel-package (7.50) unstable; urgency=low

  * Ran all the maintainer perl scripts through a use strict; perl -wc
    check, which, alarmingly, caught a whole bunch of minor initialization
    errors. Need to do this more often. The errors were benign, so far,
    but still.

 -- Manoj Srivastava <srivasta@debian.org>  Fri, 13 Jul 2001 13:10:13 -0500

kernel-package (7.49) unstable; urgency=low

  * Made the append-to-version warning less ominous, since it is entirly
    resonable that people can encounter the circumstances that can trigger
    it while building stand alone modules.                   closes: Bug#104362

 -- Manoj Srivastava <srivasta@debian.org>  Thu, 12 Jul 2001 09:39:49 -0500

kernel-package (7.48) unstable; urgency=low

  * Fixed the location of the apus kernel image, hopefully this works
    now. 
  * Fix handling of the README.Debian files, as requested by            #101332
  * No longer have the asm link in the kernel-source packages. 
                                                             closes: Bug#104292
  * The m68 patch in the last revision actually              closes: Bug#103727
  * mips and mipsel support was added a few revisions ago.    closes: Bug#99731
  * corrct the documentation with regards to do_symlink, no_symlink, and
    reverse_symlink (should be do_symlinks, no_symlinks, and
    reverse_symlinks) closes:                                        Bug#100974

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 11 Jul 2001 16:27:00 -0500

kernel-package (7.47) unstable; urgency=low

  * Make sure that all other man pages do not refer to make-kpkg(8)
    anymore.                                                 closes: Bug#103696
  * "Nick Holgate" <nick_h@bvmltd.co.uk> provided a patch the
    * Tidied up m68k subarch guessing.
    * Added m68k VME subarch support.
    * Added vmelilo kernel image postinst support for m68k bvme6000 mvme147
      and mvme16x subarches.
    * Fixed problem checking for the existance of .config file in 'rules',
      make would always abort with error even if .config file was found. 
    * Also attached are up to the minute kernel configuration files as
      used to build the official m68k kernel-image packages.
  * Added a use_hard_links option to kernel-img.conf for people who use
    boot loaders that can't follow symlinks.

 -- Manoj Srivastava <srivasta@debian.org>  Fri,  6 Jul 2001 14:52:25 -0500

kernel-package (7.46) unstable; urgency=low

  * Fixed typo in image.postinst

 -- Manoj Srivastava <srivasta@debian.org>  Thu,  5 Jul 2001 13:37:24 -0500

kernel-package (7.45) unstable; urgency=low

  * Added the official README.Debian file to the image and headers
    packages as well.                                    closes: Bug#101332
  * hppa changes from Paul Bame <bame@debian.org> 
  * APUS changes from  Michel DÃÃ¯Â¿ÅÂ¯ÃÂ¿ÃÅÃÃÂâ¬nzer <michdaen@iiic.ethz.ch>
  * Added a message in the image preiinst, triggered only if the image is
    an initrd image _and_ has lilo as the default bootloader, which tells
    people how to configure lilo for initrd images. 

 -- Manoj Srivastava <srivasta@debian.org>  Thu,  5 Jul 2001 11:20:51 -0500

kernel-package (7.44) unstable; urgency=low

  * There was a problem  while installing a kernel with no modules created
    with a new, more helpful kernel-package, which tries to run depmod
    during install (This helps people who are replacing the running kernel
    with a new kernel with the same version).  I have now fixed the
    postinst to check whether the directory exists before calling depmod.
                                                            closes: Bug#99105
  * Fixed spelling errors in make-kpkg(1).                  closes: Bug#99454
  * Remove empty /lib/modules/$version dir in postinst if empty. dpkg did
    not remove the directory, obviously since there were files it was not
    aware of created by depmod, however these were removed by the postrm
    correctly, but it neglected to remove the empty directory. 
                                                             closes: Bug#99880 
  * Fixed another typo in the image postinst.                closes: Bug#101524
  * Changed the loaderdep= field for IA-64 to be 'elilo' instead of
    'lilo-efi'.                                              closes: Bug#100321
  * make kernel-pkg.conf(5) refer to ~/.kernel-pkg.conf, and not
    ~/kernel-pkg.conf.                                       closes: Bug#100709
  * make-kpkg doesn't work with 2.4.5 and up on PowerPC, since all of the
    *boot directories were merged, renamed and moved around. The included
    fixes this, and also removed the BeBox target bits.  BeBox isn't
    supported in Linux 2.2.x or 2.4.x                        closes: Bug#103032
  * Added support for mips and mipsel                        closes: Bug#102043
  * Added postrm grub example script, and config file. Added a README baed
    on the bug report                                        closes: Bug#103531
  * Now add documentation to the effect that if one runs make (menu|x)?config
    to configure the kernel, it creates `include/linux/version.h', which
    contains the kernel version without_ the append_to_version data. This
    file won't be updated by the make-kpkg run (make-kpkg creates
    version.h if it doesn't exist, but doesn't touch if exists), so the
    final kernel will _not_ have the append_to_version data in its version
    number. Now kernel-package moans about the file, and allows you to
    abort early.                                   closes: Bug#97202, Bug#98908
  
 -- Manoj Srivastava <srivasta@debian.org>  Wed,  4 Jul 2001 23:10:48 -0500

kernel-package (7.43) unstable; urgency=low

  * Added a local ~/.kernel-pkg.conf for per user configuration. 
    closes: Bug#97267

 -- Manoj Srivastava <srivasta@debian.org>  Sat, 12 May 2001 13:47:13 -0500

kernel-package (7.42) unstable; urgency=low

  * Softened the stance about hyphens in revision strings that was adopted
    in 7.28. The documentation still strongly deprecates the use of
    hyphens in the revision, since no checks are in place to ensure the
    resulting version is legal. Now, a warning is generated at the
    beginning warniong that this may cause a problem at the tail end of a
    long compile, and the user is responsible for selecting a version
    string that shall not cause dpkg and friends to choke. This is at the
    request of the official pcmlcia-modules maintainer (Hi Brian)
  * On investigation, it appears that bug 97202 is the same as 96784, and
    both were fixed by the previousl upload (we needed to export
    EXTRAVERSION) closes: Bug#97202

 -- Manoj Srivastava <srivasta@debian.org>  Sat, 12 May 2001 11:53:00 -0500

kernel-package (7.41) unstable; urgency=low

  * Also export EXTRAVERSION. This is useful if EXTRAVERSION was deduced
    from a APPEND_TO_VERSION variable. closes: Bug#96784
  * Changed the long description to be slightly more coherent.
    closes: Bug#96822

 -- Manoj Srivastava <srivasta@debian.org>  Thu, 10 May 2001 09:13:30 -0500

kernel-package (7.40) unstable; urgency=low

  * make sure that if the rules file did not interpolat the =I in the
    preinst we do not give a spurious warning.

 -- Manoj Srivastava <srivasta@debian.org>  Sat,  5 May 2001 11:57:18 -0500

kernel-package (7.39) unstable; urgency=low

  * Allow MODULE_LOC to be a symbolic link. closes: Bug#96379

 -- Manoj Srivastava <srivasta@debian.org>  Sat,  5 May 2001 00:59:42 -0500

kernel-package (7.38) unstable; urgency=low

  * Added missing ; in setting a patch directory. Also added checks for
    uninitialized patch directories while applying or unapplying a
    patch. closes: Bug#96327
  * libdv3 -> libdb3. closes: Bug#96271
  * export MODULE_LOC in case the modules need it. closes: Bug#96188

 -- Manoj Srivastava <srivasta@debian.org>  Fri,  4 May 2001 18:51:33 -0500

kernel-package (7.37) unstable; urgency=low

  * Added a new patch for FLAVOUR for 2.4.3 kernels.
  * Fix the second half of the postinst problem, really. closes: Bug#93963
  * fix the reference at the bottom of kernel-package(5) (make-kpkg is in
    section 1, not section 8).                           closes: Bug#95405
  * 2386 -> i386 in man kernel-package                   closes: Bug#95403
  * Fixed a missing \n.B in man make-kpkg (1)            closes: Bug#95654
  * Now support hyphens between words in long options    closes: Bug#95175

 -- Manoj Srivastava <srivasta@debian.org>  Sun, 29 Apr 2001 10:40:49 -0500

kernel-package (7.36) unstable; urgency=low

  * Fixed a typo in make-kpkg; closes: Bug#92238
  * Fixed a duplicate there in a warning in the ostinst, closes: Bug#92903
  * re boot -> reboot. closes: Bug#93018
  * Included the changes made for initrd kernel images from Herbert Xu
    <herbert@gondor.apana.org.au>. closes: Bug#89593
  * Documented the new initrd capabilities
  * Added a suggestion for libncurses-dev for kernel-package. closes: Bug#94984

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 25 Apr 2001 01:58:54 -0500

kernel-package (7.35) unstable; urgency=low

  * A whole bunch of spelling corrections and grammar changes, with many
    thanks to Diego Biurrun <diego@biurrun.de>
  * export a number of additional variables in the environment. These
    variables are: root_cmd FLAVOUR INT_SUBARCH APPEND_TO_VERSION
    UNSIGN_CHANGELOG  UNSIGN_SOURCE ROOT_CMD. This added information flow
    through should make the modules config more flexible
  * Missed an  $(EXTRAV_ARG) while installing modules, which cause d the
    modules to be installed in the wrong directory. Thanks to  Robert
    Bihlmeyer <robbe@orcus.priv.at> for catching this. closes: Bug#86727
  * Added and environement variable FLAVOUR_SEP that determines the
    seperator for the (deprecated) flavour variable
  * The spelling of documentation, fixed in last upload, closes: Bug#85194
  * Well, apparently insisting that the package name be lowercase is
    kosher. closes: Bug#57187
  * Now versioned patch directories no longer shadow unversioned patch
    directories; since the local admin may no longer have control over
    where the patches live. closes: Bug#89877
  * now suggest libdb3-dev, since some modules apparently depend on
    it. Really, this should be a kernel documentation issue. closes: Bug#90869
  * Fixed typo in man page section. closes: Bug#90893
  * Also remove /lib/modules/$version/modules.generic_string and 
    /lib/modules/$version/modules.parportmap. closes: Bug#93044
  * Use savelog to rotate lilo.conf if asked to overwrite the old
    one. savelog is part of debianutils, a required package. closes: Bug#93963

 -- Manoj Srivastava <srivasta@debian.org>  Tue, 24 Apr 2001 03:08:17 -0500

kernel-package (7.34) unstable; urgency=medium

  * It is spelled Documentation, not Docuementation. 
  * Added more documentation on Flavours (making it deprecated and
    obsolete). The addition of --append_to_version closes: Bug#74148

 -- Manoj Srivastava <srivasta@debian.org>  Tue,  6 Feb 2001 09:54:00 -0600

kernel-package (7.33) unstable; urgency=low

  * There was a bug in the sed exporession that chopped off the first line
    of the extraversion if it started with a t  closes: Bug#84698
  * Added Documentation/Changes to /usr/doc/kernel-image. closes: Bug#84738

 -- Manoj Srivastava <srivasta@debian.org>  Sun,  4 Feb 2001 12:22:35 -0600

kernel-package (7.32) unstable; urgency=low

  * Added provides kernel-{image,doc,headers}-X.X (as opposed to X.X.XX,
    at the request of the libc maintainer. 
  * depmod uses the current kernel's symbols to resolve a new kernel's
    modules unless the -F option is specified. Fix thanks to JP Sugarbroad
    <taral@taral.net> closes: Bug#84187
  * Added support for ia64/hppa, thanks to Randolph Chung
    <tausq@debian.org> closes: Bug#84332
  * Implement a append_to_version flag for make-kpkg, that does not
    require editing kernel Makefiles. Thanks toa suggestion by  Yann
    Dirson <ydirson@altern.org> closes: Bug#84160

 -- Manoj Srivastava <srivasta@debian.org>  Thu,  1 Feb 2001 12:53:46 -0600

kernel-package (7.31) unstable; urgency=medium

  * Hmm. Need to make the revision checking regexp a non greedy one. A one
    char addition to make-kpkg, at line number 700.

 -- Manoj Srivastava <srivasta@debian.org>  Sun, 28 Jan 2001 02:19:06 -0600

kernel-package (7.30) unstable; urgency=medium

  * Remove an extraneous close paren from make-kpkg. closes: Bug#83808

 -- Manoj Srivastava <srivasta@debian.org>  Sat, 27 Jan 2001 23:33:22 -0600

kernel-package (7.29) unstable; urgency=medium

  * Finally fixed the --revision handling, thnaks to Diego Biurrun
    <diego@biurrun.de>. 
  * Fixed the problem which occurred when one specified either -uc or -us
    without also specifying -r. Thanks go to Ruediger Kuhlmann
    <uck4@rz.uni-karlsruhe.de>. 

 -- Manoj Srivastava <srivasta@debian.org>  Sat, 27 Jan 2001 00:31:34 -0600

kernel-package (7.28) unstable; urgency=low

  * Modified the make-kpkg man page to reflect the fact that --rootcmd
    flag needs an argument. The examples and the run time help were
    correct, which may explain why no one pointed this error out
    before. closes: Bug#82939, Bug#82943
  * We now check and dissallow all hyphens in revision string. The
    software and the documentation was inconsistent as to the format of
    the revision flag: the man page and the command line help insisted
    that hyphens were not allowed; the README and the software itself
    would allow hyphens, but no checks were then in place to ensure the
    resulting version was legal. This caused problems at the tail end of a
    fairly expensive kernel compile. I think I am going to standardize on
    not allowing hyphens, cause then the checks already in place are
    sufficient, and I think it is reasonable not to have debian revisions
    for kernel-image-X.X.XX packages (in a way, these packages are really
    Debian only). So, now you may no longer sneak in a hyphen and thus
    debian revisions into the ekrnel-image versions (and thus it shall
    remain unless there is a public outcry). closes: Bug#82034
  * Added more verbose messages when we f;ag a revison as violating the
    all lowercase requirements of Debian policy; you see, the FLavour and
    extrav_version variables become part of the kernel-image package name
    (the name is kernel-image-VERSION-FLAVOUR, where VERSION also contains
    the EXTRA_VERSION var). Added checks to make-kpkg as well, and added
    more docs in the check. closes: Bug#83169

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 22 Jan 2001 15:13:53 -0600

kernel-package (7.27) unstable; urgency=low

  * For folks using grub, there are now postinst_hook and postrm_hook
    variables that can be pointed to scripts that add or remove a line
    from the grub menu list at kerel image install and remove times. A
    sample script to add lines to a grub menu file is included in the dir
    /usr/share/doc/kernel-pacakage/. The script, called
    kernel_grub_conf.sh, is coutesy of Junichi Uekawa <dancer@debian.org>
    with minor modifications by yours truly.
  * Added a postrm_hook variable that can be used to add a script to run
    when removing a kernel image package

 -- Manoj Srivastava <srivasta@debian.org>  Fri, 19 Jan 2001 13:34:56 -0600

kernel-package (7.26) unstable; urgency=low

  * Documentation fixes, thanks to Ulf Jaenicke-Roessler
    <ujr@physik.phy.tu-dresden.de> .

 -- Manoj Srivastava <srivasta@debian.org>  Fri, 19 Jan 2001 12:07:08 -0600

kernel-package (7.25) unstable; urgency=low

  * Fixed a typo in the postinst that caused a warning to be issued when
    the user hook script executed correctly (and no warnings on error),
  * The software and the documentation was inconsistent as to the format
    of the revision flag: the man page and the command line help insisted
    that hyphens were not allowed; the README and the software itself
    would allow hyphens, but no checks were then in place to ensure the
    resulting version was legal. This caused problems at the tail end of a
    fairly expensive kernel compile. I think I am going to standardize on
    not allowing hyphens, cause then the checks already in place are
    sufficient, and I think it is reasonable not to have debian revisions
    for kernel-image-X.X.XX packages (in a way, these packages are really
    Debian only). So, now you may no longer sneak in a hyphen and thus
    debian revisions into the ekrnel-image versions (and thus it shall
    remain unless there is a public outcry). closes: Bug#77423

 -- Manoj Srivastava <srivasta@debian.org>  Fri, 19 Jan 2001 11:51:49 -0600

kernel-package (7.24) unstable; urgency=low

  * In the images postrm, ensure that modules.{isapnpmap,pcimap,usbmap}
    are also removed. closes: Bug#81559
  * Added a user specified postinst script, run by the kernel image
    postinst after creating all the symlinks, but before calling the
    bootloader or offering to create a boot floppy. closes: Bug#82742
  * changed the long description to not suggest tk4.x-dev packages (long
    gone from Debian). Now we just say tkX.X-dev package. closes: Bug#81305
  * The user specified postinst should address the needs of people using
    grub who want a nerw line in the grub menu. closes: Bug#81419
  * Allow the kerel-image package creator to specify additional
    documentation that shall be installed in the documentation directory
    /usr/share/doc/kernel-image-X.X.XX/ . 

 -- Manoj Srivastava <srivasta@debian.org>  Fri, 19 Jan 2001 00:23:23 -0600

kernel-package (7.23) unstable; urgency=low

  * add missing space tp the DEB_HOST_GNU_TYPE macro. closes: Bug#78840
  * Add a patch to make-kpkg to accomodate the kenel-image
    maintainer. closes: Bug#79142
  * if we need bin86, and we do not have it, warn the user early. 

 -- Manoj Srivastava <srivasta@debian.org>  Tue, 19 Dec 2000 00:32:53 -0600

kernel-package (7.22) unstable; urgency=low

  * Added S/390 patch.. closes: Bug#77796
   Thanks to  Chu-yeon Park <kokids@debian.org>
  * If we are planning on deleting the ./debian/ directory, and we have
    been supplied with a new revision to use, use that new revision when
    we regenerate the ./debian/changelog file.
  * optionally remove the /lib/modules/$version/build symbolic link. The
    default is to remove the link from official packages, but not
    otherwise. 

 -- Manoj Srivastava <srivasta@debian.org>  Thu, 30 Nov 2000 18:41:17 -0600

kernel-package (7.21) unstable; urgency=low

  * Changed suggestion to move old /lib/modules dir out of the
    way. closes: Bug#72141
  * include call to --arch while invoking dpkg-architecture. This
    closes: Bug#70759
  * The breakage in kernel-paclage that caused make lean to break has been
    fixed for a couple of versions now. closes: Bug#72294
  * kernel-pkg.conf.5 corrects the PATCH_THE_KERNEL documentation
    issue. closes: Bug#74533
  * The problem reported in 75439 can't be reproduced by either the alsa
    maintainer or me, and it should not happen. The reporter agrees to let
    us  close this issue until it recurs. closes: Bug#75439
  * make-kpkg.1 now corrctly states it is a section 1 man page. 
    closes: Bug#76039
  * Fixed the readme.modules file to reflect the fact that the revison
    option supplied while building the kernel shall over ride the revison
    supplied for the modules. closes: Bug#77020
  * Make a zimage for netwinders, since the old buggy loaders have been
    fixed. closes: Bug#77430
  * re boot --> reboot. closes: Bug#77461

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 20 Nov 2000 22:45:21 -0600

kernel-package (7.20) unstable; urgency=low

  * There was a long standing cut and paste error in handling selected
    patches. Masato Taruishi <masato@cmd.taru.net> caught that ewrror, and
    graciously provided a patch. closes: Bug#72873

 -- Manoj Srivastava <srivasta@debian.org>  Sat, 30 Sep 2000 22:51:03 -0500

kernel-package (7.19) unstable; urgency=low

  * A missing close quotes in make-kpkg escaped. closes: Bug#72651

 -- Manoj Srivastava <srivasta@debian.org>  Thu, 28 Sep 2000 01:12:23 -0500

kernel-package (7.18) unstable; urgency=low

  * Make sure the dpkg-architecture calls takes into account the ARCH
    variable, if set. closes: Bug# 70759
  * Fixed address of the FSF. closes: Bug#70984
  * use print-gnu-build-architecture. closes: Bug#65157
  * Do not attempt to set user and group to root.root in the configure
    phase, since dpkg-buildpackage does not run that target with
    fakeroot. closes: Bug#72297
  * make make-kpkg use ./debian/rules if appropriate.

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 27 Sep 2000 13:33:39 -0500

kernel-package (7.17) unstable; urgency=low

  * Take the depends out of the kernel source package if kernel version is
    greater than 2.4. closes: Bug#68771
  * fixed a typo in the image postinst. closes: Bug#69082
  * Made sure there is a trailing / in the destination dir. closes: Bug#69176
  * Fixed a typo in kernel-img.conf.5. closes: Bug#69305

 -- Manoj Srivastava <srivasta@debian.org>  Sun, 20 Aug 2000 14:34:51 -0500

kernel-package (7.16) unstable; urgency=low

  * Added dpkg-architecture invocation to the rules file, and export the
    corresponding variables. Hopefully this closes: Bug#67909
    There was a comment in the reprt about this holding up test-cycle-3,
    I can back port this to potato if needed. 
  * Added CROSS_COMPILE=$(KERNEL_CROSS) for the modules_install target as
    well. This closes: Bug#67904
    Thanks go to Chris Rutter <chris@willow.armlinux.org> for tracjing
    these down.

 -- Manoj Srivastava <srivasta@debian.org>  Sat, 29 Jul 2000 23:32:23 -0500

kernel-package (7.15) unstable; urgency=low

  * Fixed up the sample kernel moules rules and control file
    examples. Hopefully, this is closer to being useable. I also dealt
    with the issue of epochs explicitly in these sample files. 
    closes: Bug#67150
  * There was a feature request; namely, the ability to select a set of
    patches to apply, instead of the current all or nothing schema. This
    is an initial implementation. Please test. 

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 26 Jul 2000 21:41:58 -0500

kernel-package (7.14) unstable; urgency=high

  * Fixed a bug in the image postinst where we were not chompingb the
    newline off the dir returned by pwd. closes: Bug#67093

 -- Manoj Srivastava <srivasta@debian.org>  Tue, 11 Jul 2000 15:46:45 -0500

kernel-package (7.13) unstable; urgency=low

  * Added a new configuration directive for the target machine, namely,
    realtive_links. Normally, the kernel image postinst shall do a
    relative link if possible, or else it shall make an absolute
    link. With this directive, the postinst shall go to extraordinary
    lengths to make sure that the link is relative. The previous release
    also closed a but, namely: closes: Bug#65116

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 10 Jul 2000 23:14:04 -0500

kernel-package (7.12) unstable; urgency=low

  * Fixed implementation of the --config target in make-kpkg, to allow
    operation when there is no .config file present. really closes: Bug#64786
  * Fixed the FILES section in kernel-package(5)/ closes: Bug#65730
  * Try and make relative links when creating links to image files, if
    possible. This used to be the old behaviour, but did not work right
    for people who had the symbolic links created in non standard
    locations. This version should work better for most people. 
    closes: Bug#64949, Bug# 65116
  * Added to the information message that make-kpkg provides that the
    --revision option also has no effect ewhen making modules; the values
    that were used when the last kernel_image were made are sued (which is
    what one wants anyway). closes: Bug#65212
  * Updated the README about the gcc/kernel issues (which are now mostly
    solved), made the footnote appear more like one, and stuff. 
    closes: Bug#65386
  * Make sure we remove modules.dep when the kernel-image package is
    removed, so that we do not get messages from dpkg saying that
    /lib/modules/<version> was not removed because it was not empty. This
    closes: Bug#66341
  * Added a warning in the make floppy routine of the image postinst to
    warn if the kernel is larger than some hard coded limit. This breakage
    should really be fixed in the kernel. closes: Bug#66596
  * Since it is just a suggestion in the packaging manual, do not force
    all flavours to be downcased. (make-kpkg shall still complain). 
  * Added a new arch section for sparc64. closes: Bug#64866
  * cleaned up the postrm, now it should warn people putting the
    symlinks in non-standard places and still using lilo about removing a
    kernel that may have been used in lilo. closes: Bug#65737

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 10 Jul 2000 01:22:27 -0500

kernel-package (7.11) unstable; urgency=low

  * Cleaned up the postinst some more; make sure that we always know which
    directory we are in.
  * Use absolute paths for the kernel image files real location, os we can
    manipulate stuff independent of the current working directory. Either
    one of these would fix the problem that Igor Mozetic
    <igor.mozetic@uni-mb.si> has reported.
  * Fixed the rules file to corect the misapplied patch for pmac. This
    fixes bug # 63559

 -- Manoj Srivastava <srivasta@debian.org>  Sat, 20 May 2000 16:00:30 -0500

kernel-package (7.10) unstable; urgency=high

  * Forgot to set decent default for do_bootloader; and the default is not
    to run lilo. This can be disastrous; this is a hihg priority fix. 

 -- Manoj Srivastava <srivasta@debian.org>  Fri, 12 May 2000 09:44:32 -0500

kernel-package (7.09) unstable; urgency=low

  * Added stuff to README.modules mentioning that make dep is a required
    step before running make modules_image, if one wishes to skip building
    the kernel image itself. 
  * Added links to more documentation in the /usr/share/doc/kernel-package
    directory. 

 -- Manoj Srivastava <srivasta@debian.org>  Thu, 11 May 2000 04:20:11 -0500

kernel-package (7.08) unstable; urgency=low

  * Added a space after a question the postinst asks.
  * Added a spacs after --backup=t while copying. This would cause things
    to break otherwise. 
  * Added a / in the error message when no_symlinks is on.
  * Fix the README to talk about no_symlinks, and not no_symlink. 
    fixes Bug # 63606
  * Added three more directives for kernel-imge.conf, namely,
    do_boot_enable, do_bootfloppy, and do_bootloader. All default to YES.
    closes: Bug#63607
  * Added a check in the makefloppy routine to make sure the image we are
    trying to write exists. This closes: Bug#63558
  * Capture the stderr too when testing the bootloaders. This fixes Bug
    63599 
  *  Fixed PPC setup to handle new powermacs. This was a (grave) RC
    bug. This fixes Bug# 63559
  * Added checks and guards to ensue that 63558 would be caught and more
    information provided. Insufficient data as yet to figure out what is
    causing it. 

 -- Manoj Srivastava <srivasta@debian.org>  Sun,  7 May 2000 12:07:08 -0500

kernel-package (7.07) unstable; urgency=low

  * Fix a (cosmetic) bug in the preinst that printed a message in the
    wrong fork. closes: Bug#63409
  * Hmm. chdir to / before testing whether something is a directory. test
    for it being a dir before stripping the leading / off. Either one of
    these changes would fix the bugs reported. closes: Bug#63419, Bug#63388

 -- Manoj Srivastava <srivasta@debian.org>  Wed,  3 May 2000 01:45:29 -0500

kernel-package (7.06) unstable; urgency=low

  * Somehow, kernel-doc-blah was never made to have /usr/doc links; it is
    fixed in this version. 
  * Added a new option to kernel package to allow specifying which modules
    one means to compile when doing the modulkes targets - this also
    allows people to use kernel-package to compile modules in non standard
    location, by giving a full path for the module directory. 
    closes: Bug#54807

 -- Manoj Srivastava <srivasta@debian.org>  Sun, 30 Apr 2000 15:51:37 -0500

kernel-package (7.05) unstable; urgency=low

  * Changed image postinst to allow people to specify they want the image
    moved from /boot into some other location (for example, loadlin users)
    closes: Bug#61832
  * Changed the default version number from 1.00. closes: Bug#62836
  * Can't reproduce .config being deleted (and indeed, there is not code
    in lernel-package that directly deletes that file). I'm closing this
    bug until we get a reproducible problem, or at least more
    details. Until then, just chalk it up to happenstance. 
    closes: Bug#61606
  * Make sure we ignore spaces in the value of the HOSTCC and CC env
    variables. 
  * Make the source package suggest task-tcltk-dev, rather than tk-dev,
    since the latter is no longer provided by modern packages (apparently
    it was not meant to be a publically used virtual package)
  * Rewrote the preinst to pay attention to the kernel-img.conf. Added a
    variable called clobber_modules that shall have the preinst move
    /lib/modules/version dir out of the way silently. (I strongly suggest
    that this varible not be set unless you know what you are
    doing). closes: Bug#62745
  * Added (courtesey of Peter Moulder) a new option called --config to
    make-kpkg, which allows you to specify what configure target shallb e
    used by make-kpkg. Defaults to oldconfig. This was added so you can
    run your usual config step _after_ the kernel has been patched by
    make-kpkg. closes: Bug#61503
  * Added a new target to make-kpkg, called debian, which essentially
    creates a ,.debian directory and runs the kernel patch process. This
    is so you have an alternative to using --config; you can just call
    make-kpkg debian, make menuconfig, make-kpkg ....

 -- Manoj Srivastava <srivasta@debian.org>  Sun, 30 Apr 2000 03:14:18 -0500

kernel-package (7.04) frozen unstable; urgency=low

  * Make sure that version specific kernel-patch subdirectories are
    supported for the all directory as well (they were supported for arch
    specific patches already). closes: Bug#61915
  * Fixed misplaced backslash (it was one char off)  - bad if a patch
    changes the location the kernel will search for its modules!  This is
    RC for powerpc kernel images. closes: Bug#62015

 -- Manoj Srivastava <srivasta@debian.org>  Sun,  9 Apr 2000 13:05:07 -0500

kernel-package (7.03) frozen unstable; urgency=low

  * Aaargh. A single space got inserted into thepostinst after my
    testing. I was just adding comments, I swear. I'll not add anything
    after the test, I promise. "$_/$loader_exec " => "$_/$loader_exec".  
    This fixes an important bug, which caused lilo not to be run on
    installing the kernel image. closes: Bug#61646

 -- Manoj Srivastava <srivasta@debian.org>  Mon,  3 Apr 2000 11:16:06 -0500

kernel-package (7.02) frozen unstable; urgency=low

  * Added a dependency on fileutiles >=4.0, since the package would fail
    to install with older fileutils. This prevents a failure to install
    when upgrading from slink. 
  * Added a simple check on upppercase chars in the version
    string. closes: Bug#61213
  * Made the dependency in kernel-source packagesbe for libncurses-dev |
    ncurses-dev, since the latter is being phased out. This is an
    important fix.
  * The changes added in 7.00 are required to be in potato. The changes
    were: Allow the official kernel-* package maintainer some leeway in
    providing official control files (just like they can provide their own
    changelog files now).

 -- Manoj Srivastava <srivasta@debian.org>  Thu, 30 Mar 2000 10:19:28 -0600

kernel-package (7.01) unstable; urgency=low

  * Added more documentation to the install time configuration file
    kernel-img.conf.5. Modified the image postinst to be more lax in
    parsing configuration options

 -- Manoj Srivastava <srivasta@debian.org>  Tue, 21 Mar 2000 10:37:46 -0600

kernel-package (7.00) unstable; urgency=low

  * Allow the official kernel-* package maintainer some leeway in
    providing official control files (just like they can provide their own
    changelog files now).
  * On user request, do not fail to make symbolic links in / merely
    because the system does not ahve the default bootloader installed --
    people are using alternative boot loaders out there. Instead there is
    a config file that can provide the answer -- oif the config file does
    not exists, the postinst asks the user, and creates the config file. 
    closes: Bug#60693
  
 -- Manoj Srivastava <srivasta@debian.org>  Tue, 21 Mar 2000 00:43:09 -0600

kernel-package (6.42) unstable; urgency=low

  * Fixed suggests line to accept either libncurses-dev or
    ncurses-dev. The latter is obsolete, and present for backwards
    compatibility. closes: Bug#57077

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 15 Mar 2000 09:14:00 -0600

kernel-package (6.41) unstable; urgency=low

  * Added the version number of the kernel to both the short and the long
    description, to help people decide what packages are installed and
    which new ones they may wish to install. 
  * Make sure one uses absolute symlinks where required, when creating
    /usr/doc symlinks
  * Do not make symlinks in / if the boot loader is not in the path. 
    closes: Bug#60413

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 15 Mar 2000 01:00:02 -0600

kernel-package (6.40) frozen unstable; urgency=low

  * Path up modules_install in the kernel_image target to include some new
    module categories in 2.3.XX kernels. In order that this does not, in
    the futire, inconvenience people, use the kernel Makefile to install
    modules when we can. The cases we can't use the kernel makefile is for
    2.0.XX and older kernels (since the prefix to modlib was not present
    then). closes: Bug#59516
  * Fixed some typos. closes: Bug#59528

 -- Manoj Srivastava <srivasta@debian.org>  Fri,  3 Mar 2000 09:55:47 -0600

kernel-package (6.39) frozen unstable; urgency=low

  * Fix typo in man page (FLAVOURS-->Flavours). closes: Bug#58502
  * Add support for cleaning out the modules directories, since we have
    targets that build stand alone modules. closes: Bug#58733
  * Fixed an upgrade bug when /usr/doc happens to be a symlink, and does
    not point to /usr/share/doc. A couple of people were bitten by this. 

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 28 Feb 2000 22:27:05 -0600

kernel-package (6.38) frozen unstable; urgency=low

  * Emphasize the need to run make-kpkg clean when attempting to change
    either a version number or a flavour -- or else the old values may
    come back to bite you. closes: Bug#57934
  * Added example files for module writers, Thanks to Wichert Akkerman
    <wichert@cistron.nl> 

 -- Manoj Srivastava <srivasta@debian.org>  Tue, 15 Feb 2000 15:56:12 -0600

kernel-package (6.37) frozen unstable; urgency=low

  * Forgot to make the last upload to frozen. For the release manager:
  * The postinst was vulnerable to being affected by symlinks (if, for
    some reason, the prerm failed). This has happended for latex2html; and
    created a grave bug. 
  * There was a bug in the postinst in a case statement, that caused
    installation to fail for certain situations.
  * Also fixed an lintian warning

 -- Manoj Srivastava <srivasta@debian.org>  Wed,  9 Feb 2000 22:29:52 -0600

kernel-package (6.36) unstable; urgency=low

  * The postinst was vulnerable to being affected by symlinks (if, for
    some reason, the prerm failed). This has happended for latex2html; and
    created a grave bug. 
  * There was a bug in the postinst in a case statement, that caused
    installation to fail for certain situations.
  * Also fixed an lintian warning

 -- Manoj Srivastava <srivasta@debian.org>  Tue,  8 Feb 2000 19:42:09 -0600

kernel-package (6.35) frozen unstable; urgency=low

  * Fix for the amiga branch (extra paren in patch). Problem pointed out
    by Daniel Jacobowitz <drow@false.org>. This makes kernel-package work
    for amigas, I think.
  * Fix warning in post inst about backups.

 -- Manoj Srivastava <srivasta@debian.org>  Mon,  7 Feb 2000 00:57:10 -0600

kernel-package (6.34) unstable; urgency=low

  * Prodded by Daniel Jacobowitz <drow@false.org>, made a few adjustments
    in the rules file to make make-kpkg parrallel make friendly.

 -- Manoj Srivastava <srivasta@debian.org>  Thu,  3 Feb 2000 10:51:36 -0600

kernel-package (6.33) frozen unstable; urgency=low

  * Make kernel-packageconfig escape single "'"s in the maintainer
    name. Now irish eyes should be smilin' again ;-). This is a bug fix,
    since it causes make-kpkg to fail for people with apostrophes in their
    names.
  * Add warning if using --revision with an official kernel source (in
    other words if ./debian/official exists). Added this also to the man
    page for make-kpkg; this apparently has been causing confudion.
  * closes: Bug#56506, Bug#56544, Bug#56632
  * Change the generated postinst for sparc kernel images to not require
    silo to be run (since it apparently does not need to be). closes: Bug#56580

 -- Manoj Srivastava <srivasta@debian.org>  Tue,  1 Feb 2000 01:49:05 -0600

kernel-package (6.32) frozen unstable; urgency=low

  * darnit. Forgot to mention frozen in the last upload. The current
    potato version is broken (a grave bug); this fixes it. This version
    also has undergone extensive testing, complete with building modules,
    and installing the results, on an i386 machine. I would consider this
    the final release for potato.
  * Fixed a minor typor "are are" --> "are" in the docs. closes: Bug#56290

 -- Manoj Srivastava <srivasta@debian.org>  Fri, 28 Jan 2000 13:26:22 -0600

kernel-package (6.31) unstable; urgency=low

  * Never release a version without a full install test. There were typos
    in 6.30 which made it not work
  * Pulled back the support for HOSTCC and CC variables in make-kpkg,
    since it caused all modules to fail. In fact, just setting CC=gcc
    causes havoc. modules tested: alsa-source, lmsensors, and
    others. Again, this is important. 

 -- Manoj Srivastava <srivasta@debian.org>  Thu, 27 Jan 2000 03:07:27 -0600

kernel-package (6.30) frozen unstable; urgency=low

  * Make sure we test for uid 0, not just root.
  * Make sure that we really support HOSTCC and CC variables Thanks go to 
    Filip Van Raemdonck <filipvr@xs4all.be> for this
  * Make sure we abort if there is a -j in MAKEFLAGS or MFLAGS
  * Actually warn if --revision is used when stamp-configure exists. I owe
    some people an apology. **This is an important fix**

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 26 Jan 2000 23:56:34 -0600

kernel-package (6.29) frozen unstable; urgency=low

  * Make sure we stop the build if removing a patch fails as well.
  * Make sure that the KDVERS var we pass to modules is the one that is
    actually used. **This is an important fix**
  * Also document ARCH_IN_NAME in the kernel-pkg.5 man page

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 26 Jan 2000 10:46:05 -0600

kernel-package (6.28) frozen unstable; urgency=high

  * Made kernel source depend on bzip2. This was a major braino, and
    created a whole slew of bugs.
    closes: Bug#52708, Bug#54308, Bug#54820, Bug#55071
  * Fixed a minor typo in the readme file. closes: Bug#55880
  * Make sure we honour the IMAGE_DESTDIR setting. closes: Bug#54871
    Thanks go to Gerrit Pape <pape@innominate.de>
  * removed a spurious istall docs -r from package prerm. closes: Bug#54123
  * Reversed fix to 47766 that was preventing kernel-package from changing
    symlinks in /. closes: Bug#54510, Bug#54667, Bug#54097, Bug#54126 
  * Removed obsolete dependency on gas, which no longer seems to exist. 
    closes: Bug#54033
  * Applied a APUS patch from Sven LUTHER <luther@dpt-info.u-strasbg.fr>,
    and made it possible to optionally ignore .config.save files. 
    closes: Bug#53010
  * Try and stop build if a patch application failed. closes: Bug#51780
  * strip spaces from the root command, which could cause
    dpkg-buildpackage to fail. closes: Bug#52272
  * We do now warn about users using the --revision flag. closes: Bug#51133
  * Add a note that we do not track Makefile, and the Flavours patch may
    not apply cleanly. closes: Bug#47731

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 26 Jan 2000 03:43:34 -0600

kernel-package (6.27) unstable; urgency=low

  * Removed mention of psdatabase from the man page, since we stopped
    updating that ages ago. closes: Bug#50965
  * Fixed include.prerm to not remove libcgi docs. closes: Bug#50226
  * Removed include.postrm, which should no longer be required. (I dobt if
    anyoe really has a /usr/src/.linux-version registry in there,
    anyway). closes: Bug#51361
  * Stop and inform the users of there is any problems with the modules
    command. closes: Bug#50513
  * Added a few more taget dependencies for the target debian. This should
    close a number of bugs. closes: Bug#47156, Bug#47503, Bug#48087, Bug#50928
  * Added a concurrency level option to kernel-package, so that the
    kernel-compile and the modules can be built with make -jN. Should
    please the SMP folks out there. closes: Bug#50480
  * Dixed the Multi-Arch document so that the patch and unpatch example
    scripts do not wipe out stamp files. Also noted that the files in the
    unpatch dir should probably be numbered in reverse order from the
    files in the patch directory, so the unpatching is done in the
    appropeiate order, All this courtesy of "David Huggins-Daines"
    <dhd@eradicator.org> closes: Bug#47228
  * The contents of /proc/hardware changed somehow between 2.0.36 and
    2.2.10, making the subarchitecture determination break on m68k
  * Determination of CONFDIR needs to be moved after
    /etc/kernel-package.cfg is read (I think that's the problem - in any
    case, this fixes the problem where make-kpkg wouldn't read the config
    file from /usr/src/kernel-patches/<arch>), These lst two courtesy of
    "David Huggins-Daines" <dhd@eradicator.org> closes: Bug#47232
  * Fixed a typo in image.postinst that was preventing the lkernel image
    from backing up older images with the same version. Thanks to the
    analysis by seh@cnw.com (Steven E. Harris). closes: Bug#47766
  * The sources are now in bzip2 format, if supported by tar at package
    build time. closes: Bug#42137
  * kernel-headers are not really arch independent. modified make-kpkg s
    that the documentation reflects the truth. Patch by Joost Kooij
    <kooij@pc47.mpn.cp.philips.com> closes: Bug#47930

 -- Manoj Srivastava <srivasta@debian.org>  Tue, 30 Nov 1999 00:15:04 -0600

kernel-package (6.26) unstable; urgency=low

  * make sure the ./debian directory exists before trying to build the
    image package. closes: Bug#47062, Bug#47054

 -- Manoj Srivastava <srivasta@debian.org>  Sun, 10 Oct 1999 15:09:29 -0500

kernel-package (6.25) unstable; urgency=high

  * Fixed stupid little typos that made the package unusable. 
    closes: Bug#46982, Bug#46986

 -- Manoj Srivastava <srivasta@debian.org>  Fri,  8 Oct 1999 23:43:11 -0500

kernel-package (6.24) unstable; urgency=low

  * updated module installation for the latest set of kernels (2.0.38,
    2.2.12, and 2.3.18, at the time of writing). closes: Bug#44959
  * use bzip2 instead of gzip for the kernel source tar ball, if tar
    supports bzip2 (falls back to gzip for older tar versions). This may
    close  Bug#42137.
  * patched rules to accomodate the official kernel packages maintainer
    (configure things only when one absolutely needs to). closes: Bug#46161
  * Removed install of LinkPolicy, since we no longer do that (we provide
    a tarball instead). closes: Bug#45090
  * The normal upload closes: Bug#45471, Bug#44483, Bug#45427
    which were fixed in the NMU
  * Moved kernel-package and all generated packages to FHS compliance. 
  * No longer unlink modules.dep. closes: Bug#46729,

 -- Manoj Srivastava <srivasta@debian.org>  Fri,  8 Oct 1999 05:40:31 -0500

kernel-package (6.23.1) unstable; urgency=low

  * NMU, as Manoj is busy with RL(ok'd by Manoj).
  * Fixed typo in rules file, which kept arch-patches from applying.
    closes: Bug#45471, Bug#44483
  * Changed location of GPL in /usr/share/kernel-package/README.
    closes: Bug#45427

 -- Adam Heath <doogie@debian.org>  Tue, 21 Sep 1999 02:34:02 -0500

kernel-package (6.23) unstable; urgency=low

  * Added a smallish patch. This patch allows kernel-package to detect
    whether it should build a sparc32 or sparc64 kernel on sparc
    architectures. This shall allow for use of the FAKE_SPARC env to
    decide which kernel to build. closes: Bug#43313

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 30 Aug 1999 23:20:26 -0500

kernel-package (6.22) unstable; urgency=low

  * Removed bashims from the examples for multi-arch. Thanks to
    Gregory T. Norris <haphazard@socket.net>. closes: Bug#41691
  * Made the usage messages go to stdout rather than stdin. 
    closes: Bug#42011
  * Changed readme to stop referring to fakeroot explicitly -- so we no
    longer need to track usage. closes: Bug#42798
  * fixed typo in usage message. closes: Bug#43129
  * Added support for arch independent patches. closes: Bug#42313

 -- Manoj Srivastava <srivasta@debian.org>  Thu, 19 Aug 1999 01:55:14 -0500

kernel-package (6.21) unstable; urgency=low

  * Added documentation about potential gcc problems with the kernel
    compiles. Added a stamp-build stamp (thanks to Chris Butler
    <chrisb@sandy.force9.co.uk>). 

 -- Manoj Srivastava <srivasta@debian.org>  Thu, 15 Jul 1999 15:20:53 -0500

kernel-package (6.20) unstable; urgency=low

  * moved make-kpkg to /usr/bin. closes: Bug#39428
  * Fixed man page for makle-kpkg. closes: Bug#39233
  * Mention the fact that a broken grep can also cause strangely numberred
    packages. 
  * Fix readme, since it disaalowed hyphens, though they were acceptable
    (the version with hyphens is thought to have a debian revision). 
    closes: Bug#39397
  * Added -uc and -us options to make-kpkg to pass on to
    dpkg-buildpackage (this may be opening a can of worms -- I may have to
    implement a dpkg-buildpackage options option)
  * Added documentation for people who want to minimize the time spent as
    fake root, and who want to see the users name (not root) when they run
    uname -a. Provide a secret exra target for thos folks to use. 
  * Removed mention of link manipulation in /usr/src, since kernel-package
    no longer does that. closes: Bug#40430
  * Moved make-kpkg to /usr/bin from /usr/sbin, since building debs can
    all be done in user space. closes: Bug#39428
  * Partially moved to policy 3.0.0.0 (no /usr/doc/ move yet)
  * depends on perl5, as per new perl policy.

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 14 Jul 1999 10:24:03 -0500

kernel-package (6.19) unstable; urgency=low

  * In the postrm, change return 0 to exit 0. closes: Bug#38770
  * Humpf. ANother version checker bug (I knew there was a reason I had
    not implemented this before). closes: Bug#38771

 -- Manoj Srivastava <srivasta@debian.org>  Wed,  2 Jun 1999 17:21:04 -0500

kernel-package (6.18) unstable; urgency=low

  * Fixed the revioson checking reg exp to alos allow epochs. The check
    was added in 6.12. closes: Bug#38377
  * Documented the fact that recompilations, especially ones which change
    the revision, directly or indirectly, amy need an intervening
    make-kpkg clean. closes: Bug#38320
  * Added documentation enhancements based on feedback from Remo Badi. 

 -- Manoj Srivastava <srivasta@debian.org>  Tue,  1 Jun 1999 13:01:48 -0500

kernel-package (6.17) unstable; urgency=low

  * It would help if I actually installed the new man page.
  * Another teeny fix for powerpc sub archs

 -- Manoj Srivastava <srivasta@debian.org>  Tue, 25 May 1999 15:52:27 -0500

kernel-package (6.16) unstable; urgency=low

  * Another rules typo involving cross compilation
  * Added a kernelpackage.5 man page, which should make finding the docs
    for make-kpkg easier.

 -- Manoj Srivastava <srivasta@debian.org>  Tue, 25 May 1999 15:03:14 -0500

kernel-package (6.15) unstable; urgency=low

  * Some days you can't win. Yet another cut and paste error in powermac
    rules. 
  * closes: Bug#38078, Bug#38094

 -- Manoj Srivastava <srivasta@debian.org>  Fri, 21 May 1999 12:10:30 -0500

kernel-package (6.14) unstable; urgency=low

  * Darn it!. Used () in regexp instead of [].

 -- Manoj Srivastava <srivasta@debian.org>  Thu, 20 May 1999 23:54:53 -0500

kernel-package (6.13) unstable; urgency=low

  * Typo fixes for powerpc stuff.

 -- Manoj Srivastava <srivasta@debian.org>  Thu, 20 May 1999 11:08:51 -0500

kernel-package (6.12) unstable; urgency=low

  * Added a warning if the --revision flag is given and a stamp-configure
    file already exists, since the --revision flag has no effect. Also
    require the revision flag to only contain anlphanumerics and . and +,
    and error out if otherwise. closes: Bug#35951
  * The control file is fed $architecure, which needs be a valid arch
    string. The additional -D option to dpkg-gencontrol is needed for
    cross compilation (the default arch that dpkg-gencontrol guesses is
    not the target architecture). So dpkg-gencontrol has to be told what
    is in the control file. closes: Bug#37998

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 19 May 1999 23:56:30 -0500

kernel-package (6.11) unstable; urgency=low

  * A cut and paste error in kernel rules file was corrected. 
    closes: Bug#37877

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 17 May 1999 22:30:58 -0500

kernel-package (6.10) unstable; urgency=low

  * Added new patch for flavours that works with 2.2 kernel Makefiles. 
    closes: Bug#37857

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 17 May 1999 15:40:43 -0500

kernel-package (6.09) unstable; urgency=low

  * Added new changes for PowerMacs (boy do those sub archs multiply out
    there) Thanks to Hartmut Koptein <koptein@debian.org>
  * On a purge, kernel-image deletes either /vmlinuz or /v,linuz.old if it
    is a dangling symlink, after warning the user. closes: Bug#33522

 -- Manoj Srivastava <srivasta@debian.org>  Sat, 15 May 1999 11:26:37 -0500

kernel-package (6.08) unstable; urgency=low

  * Allow all lowercase subarch names for the power pc family (mostly for
    the sake of people who specif the subarch on the command line).
  * Add test and kernel arch change for ultrasparc (patch posted on the
    debian-sparc list)
  * explicitly mentioned where people can find README.modules. 
    closes: Bug#36562
  * Fix typo in rules file that would cause tar to clobber files. 
    closes: Bug#37527
  * Added patches to allow cross compiling kernels.closes: Bug#36863 

 -- Manoj Srivastava <srivasta@debian.org>  Sat, 15 May 1999 01:50:59 -0500

kernel-package (6.07) unstable; urgency=low

  * Changed ?= rules in the makefile, since there are reports that
    variables may not be getting interpolated correctly. Revert to old
    fashined syntax. closes: Bug#32770
  * Added section and priority in the genrated kernel packages, so that
    user compiled packages also have a priority. coses: Bug#32848
  * incorporated the ARM patch from Tor Slettnes. closes: Bug#33447

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 22 Feb 1999 01:14:55 -0600

kernel-package (6.06.1) unstable; urgency=low

  * Changed ARM build target from `vmlinux' to `Image'.  This is required
    for 2.2.x kernels on the Corel Netwinder.

 -- Tor Slettnes <tor@slett.net>  Fri, 12 Feb 1999 19:17:32 -0800

kernel-package (6.06) unstable; urgency=low

  * Removed an extra packaging of the Documentation tree (quite
    benign). closes: BUG#32682


 -- Manoj Srivastava <srivasta@debian.org>  Mon,  1 Feb 1999 01:18:26 -0600

kernel-package (6.05) frozen unstable; urgency=high

  * This fixes a bug introduced in the previous upload to frozen, in the
    handling of the new extraversion. Most of the changes are bug fixes,
    there is no new code.
  * Tightened the reg exp for determining the extraversion to ignore
    whitespace. Use builtin strip to remove leading and trailing
    space. fixes: BUG#32457 
  * If the changelog exists, use it to guess at the debian version (this is
    merely setting the default value). If there is no changelog, the
    default is still 1.00.
  * If the .config file exists, use that to guess the subarch for intel
    platforms. 
  * Install debian/rules if it does not exist, regardless of
    stamp-configure or debian/official.  fixes: BUG# 31823.

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 27 Jan 1999 18:34:15 -0600

kernel-package (6.04) unstable; urgency=low

  * Tightened the reg exp fr determining the extraversion to ignore
    whitespace. fixes: BUG#32457 

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 27 Jan 1999 02:14:33 -0600

kernel-package (6.03) frozen unstable; urgency=high

  * This update fixes a release critical bug, and only includes bug fixes
    since the previous version in frozen, apart from making the package
    2.2.X ready (mostly EXTRAVERSION support). I strongly feel that this
    should be allowed in frozen, even in deep freeze.
  * Added an option arch_in_name to ask kernel package to embedd the sub
    architecture in the kernel image name (this reverses the default of
    always embedding the arch in the name). Note that only the image
    package _name_ is affected. fixes: BUG#31972
  * The new Power macs report themselves as Power Macintoshes rather than
    PwerMac's. Changed reg expression to allow either. fixes: BUG#32262
  * Also install NET_MISC_MODULES modules. fixes: BUG#31934, BUG#31936

 -- Manoj Srivastava <srivasta@debian.org>  Fri, 22 Jan 1999 09:29:15 -0600

kernel-package (6.02) unstable; urgency=low

  * Make kernel-doc-XXX now suggest kernel-image-=V=SA(that is, now we
    include the architecture string that kernel-image packages may
    optionally have. fixes: Bug#30291
  * The EXTRAVERSION support in the NMU fixes: BUG#31290, BUG#31331, BUG#31444
  * Added docuemntation about more variables in the makefile, namely, the
    locations of the modules, patches, and configuration files, and how
    one may modify the defaults.

 -- Manoj Srivastava <srivasta@debian.org>  Thu,  7 Jan 1999 23:28:50 -0600

kernel-package (6.01.1) unstable; urgency=low

  * NMU; adds EXTRAVERSION support for 2.2.0-preblah kernels

 -- Ben Gertzfield <che@debian.org>  Tue, 29 Dec 1998 20:02:24 -0800

kernel-package (6.01) unstable; urgency=low

  * Added support for netwinders. closes: BUG#29333
  * Modified modules support to not assume everything in /usr/src/modules
    is a directory. 

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 25 Nov 1998 01:39:43 -0600

kernel-package (5.13) frozen unstable; urgency=low

  * Fixed setting email address for modules. closes: BUG#29217
  * Made it possible to set the subarch to be different from the one one
    is on (as long as the subarch being set is a valid sub arch of the
    current architecture). This should help the ppc folks.
  * Added to the module compilation documentation by incorporating part of
    the pcmcia-source documentation. This should hopefully make compiling
    stand-alone modules easier to compile

 -- Manoj Srivastava <srivasta@debian.org>  Mon,  9 Nov 1998 18:12:23 -0600

kernel-package (5.12) unstable; urgency=low

  * Add things to the changelog file for the sub packages. Also, fix a
    trailing space problem from the rules file that affected the ppc
    folks. closes: Bug#28535

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 28 Oct 1998 13:56:59 -0600

kernel-package (5.11) frozen unstable; urgency=low

  * Fix the handling of config files.

 -- Manoj Srivastava <srivasta@debian.org>  Fri, 16 Oct 1998 13:54:35 -0500

kernel-package (5.10) frozen unstable; urgency=medium

  * Add the variable KDREV to pass the debian revision to the modules
    while compiling.
  * Added powerpc fixes from Hartmut Koptein <koptein@et-inf.fho-emden.de>
    These were needed to have things work at all.
  
 -- Manoj Srivastava <srivasta@debian.org>  Fri, 16 Oct 1998 12:37:39 -0500

kernel-package (5.09) unstable; urgency=high

  * Fixed missing / on a pattern match,. This essentially hosed
    make-kpkg. closes: Bug#27937

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 14 Oct 1998 16:29:27 -0500

kernel-package (5.08) unstable; urgency=low

  * Added documentation of the tecra kernel issue in the README. 
  * Added README.tecra as astandalone file documenting the tecra laptop
    issue. 
  * Added README.modules to document the way that addon modules may hook
    into the kernel package and be kept compiled in synchrony with new
    kernel compilations.
  * Documented the fact that Flavours should be all lower case to meet the
    strictures of the Packaging manual. closes: BUG#26843
  * Added default values to prompts in kernel-packageconfig, since the
    prompts were most unplesaing. closes: BUG#27289
  * Fixed the dir modules are installed in to honour the flavour
    setting. closes: BUG#27311
  * Fixed typo in postinst. closes: Bug#25749

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 14 Oct 1998 01:04:29 -0500

kernel-package (5.07) unstable; urgency=low

  * Make the long description for kernel-source emphasize the need to get
    bin86. 
  * Fixed a typo in the rules file that created the wrong symlink on
    sparcs. closes: BUG#26790

 -- Manoj Srivastava <srivasta@debian.org>  Thu, 17 Sep 1998 10:28:23 -0500

kernel-package (5.06) unstable; urgency=low

  * Use tweo $ signs to protect shell variable in rules. Affected m68k and
    powerpc archs.

 -- Manoj Srivastava <srivasta@debian.org>  Fri, 11 Sep 1998 12:36:15 -0500

kernel-package (5.05) unstable; urgency=low

  * Fix documentation about using the rootcmd option. closes: BUG#25566
  * fixed source postinst so it no longer expects an untarred
    /usr/src/kernel-source-VERSION directory. closes: BUG#25650, 26511
  * allow clean to work even if .config does not exist. closes: BUG#26265
  * Fix case in the name of the Flavours file. closes: BUG#26434
  * Made the images go into $(IMAGE_DESTDIR), which defaults to
    /boot. This can now be set by loadlin folks in the config file to
    whatever they wish. Also changed the postinst to not freak out when
    the image apparently goes missing. 
  * Added the support for different config files depending on architecture
    and sub arch. A set of config files for different archs are shipped in
    /usr/lib/kernel-package/Config/. This is useful for people who compile
    for several architectures.
  * Major cleanup and rewrite for mutiarchitecture support. All arch
    related stuff is catured in a section on top. There is no need to edit
    it into the kernel makeile, we can now determine subarchs ourselves. 
  * Also pass along the maintainers email address while compiling the
    modules, not just the name. 
  * Make sure that sparcs use the vmlinux file, and gzip it. This 
    closes: BUG#26199
  * Cleaned up the modules installation part. Now it conforms more closely
    to the kernel makefile, and indeed, it uses the kernel Makefile for
    the newer kernles where the module install path is modifiable using
    the new INSTALL_MOD_PATH variable.

 -- Manoj Srivastava <srivasta@debian.org>  Tue,  8 Sep 1998 14:45:30 -0500

kernel-package (5.04) unstable; urgency=low

  * Backed out of System.map changes introduced in 5.02 since the patch
    provided was fauly. reimplemented the system.map installation. This 
    closes: Bug#24845
  * Fixed the ifneq statement. Again, this was due to misapplied fixes for
    the alpha. closes: Bug#24780
  * Fixed typo in kernel image preinst. closes: Bug#24766

 -- Manoj Srivastava <srivasta@debian.org>  Thu, 23 Jul 1998 01:20:40 -0500

kernel-package (5.03) unstable; urgency=low

  * Applied numerous spelling corrections and punctuation fixes from
    Nathan E Norman <finn@midco.net>.
  * Make kernel-source packages suggest bin86, and mention in the
    description that this is only applicable to Intel architectures. 
  * Added documentation to make-kpkg, and its man page, to point to
    /usr/doc/kernel-package. I, too, have doubts about the efficacy of
    this step.
  * Tighten the regular expression that snag the kernel version and
    sublevel information. closes: BUG#24629

 -- Manoj Srivastava <srivasta@debian.org>  Fri, 17 Jul 1998 12:40:09 -0500

kernel-package (5.02) unstable; urgency=low

  * Changed the pre rm warning message while removing a image mentioned in
    the boot loader config file to be more explicit. closes: BUG#23423
  * Make sure that we do not try to install the loader docs or the
    System.map if they do not exist. closes: BUG#23800
  * use dpkg --print-installation-architecture in the post inst. 
    closes: BUG#24207
  * Added an preinst script for kernel images so that we do not overwrite
    the modules file gratuitously.
  * Added more documentation about kernel-package, as there were
    complaints that it was not advertized at all. 
  * Modified the README.headers file to reflect reality. 
  * Added a subarch option to make-kpkg for the alpha people. 
    closes: BUG#24147
  * This version should compile on the alpha as well. closes: 23143

 -- Manoj Srivastava <srivasta@debian.org>  Tue, 14 Jul 1998 16:08:00 -0500

kernel-package (5.01) unstable; urgency=low

  * Added rudimentary support for the alpha. Please note that locations of
    the image may change in the future.
  * No longer ship unpacked sources in kernel-source-VERSION
    packages. This makes sure that dpkg can handle removal gracefully, and
    people may unpack the sources where they wish.
  * Fixed typo in make-kpkg -help, closes: BUG#23276
  * Documented --flavours argument of make-kpkg, which should bring the
    man page uptodate. closes: BUG#23280
  * Doh! A dangling symlink does not return true on an -e test; a valid
    symlink does! Fixed error on logic that made dangling sym links cause
    kernel-image packages to fail. closes: BUG#23273
  * make the process not error out when there is no config.precious
    file. 

 -- Manoj Srivastava <srivasta@debian.org>  Thu, 11 Jun 1998 15:15:13 -0500

kernel-package (4.11) frozen unstable; urgency=low

  * Clarified the rootcommand usage in the error message when make-kpkg
    thinks that the rootcmd options has been invoked in vain.
  * This should also go into frozen. 

 -- Manoj Srivastava <srivasta@debian.org>  Tue, 12 May 1998 13:57:58 -0500

kernel-package (4.10) unstable; urgency=low

  * Only put libc-kheaders in the control file is asked. I think this is
    better in the long run than the solution suggested in Bug#22295. 
    closes: Bug#22295

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 11 May 1998 01:56:11 -0500

kernel-package (4.09) frozen unstable; urgency=low

  * Add a missing end of line \ in the kernel rules file
  * Added make-kpkg support for kernel Flavours. Reported by Rainer
    Clasen. closes: Bug#21694
  * Added a config file option do_clean, and an env variable CLEAN_SOURCE
    to control whether the source dir is cleaned after a kernel build. 
    closes: Bug#22219

 -- Manoj Srivastava <srivasta@debian.org>  Fri,  8 May 1998 04:38:57 -0500

kernel-package (4.08) frozen unstable; urgency=low

  * Made the reboot now message mention that one should probably wait
    until after installation is finished before rebooting, since one may
    not be able to reboot before then. closes: Bug#21840
  * Fixed a syntax error in the kernel rules file. closes: Bug#21967
  * Changed all the changelog file names to changelog.Debian, as opposed
    to changelog.debian. closes: Bug#21968

 -- Manoj Srivastava <srivasta@debian.org>  Fri,  1 May 1998 14:19:45 -0500

kernel-package (4.07) frozen unstable; urgency=low

  * BUGFIX: fixed a typo in image.postinst; should be s/// not m////
  * BUGFIX: Fix typo in the powerpc patch; unneeded quotes were getting
    into the control file for the kernel-image-* packages.
  * Install a README.Debian file from the official package if it exists
    (it contains information about the patches applied, and, presumably,
    how to compile a kernel image .deb file).

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 27 Apr 1998 14:24:20 -0500

kernel-package (4.06) frozen unstable; urgency=low

  * Added the libc-kheaders package.
  * Make sure that upstream sources do not stomp over the users .config
    file. However, allow the user to carry though the .config file.
  * Put a README.Debian file in the kernel-source package main directory. 
                                                              closes: Bug#21129
  * Do not use -o root when installing the .config file, so that build
    does not require root privileges.                        closes: Bug#21324
  * Added patch for powerpc stuff.                            closes: Bug#21377.
  * Ignore legal leading spaces in a fstab line. This s a bug, though not
    formally reported.
  * Added a patch that get rids of an unfulfilled dependency on LILO for
    architectures that do not have any boot loader. 

 -- Manoj Srivastava <srivasta@debian.org>  Tue, 21 Apr 1998 11:48:58 -0500

kernel-package (4.05) unstable; urgency=low

  * Fixed the long description of the kernel-* packages, which had gotten
    quite outdated. This should clear some confusion.

 -- Manoj Srivastava <srivasta@debian.org>  Wed,  1 Apr 1998 16:28:19 -0600

kernel-package (4.04) frozen unstable; urgency=low

  * Made kernel-package depend on fileutils (>= 3.16-4), since we use the
    -p flag of install, which was not added until then. closes: Bug#20427 

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 30 Mar 1998 11:44:50 -0600

kernel-package (4.03) unstable; urgency=low

  * Fixed a typo which mistakenly warned about rootcmd. closes: Bug#20286
  * Added the klogd patch from Yann Dirson <ydirson@a2points.com> to the
    Flavours file, which allows klogd to not choke on non-numeric kernel
    version numbers. This is also logged as Bug 20135.

 -- Manoj Srivastava <srivasta@debian.org>  Fri, 27 Mar 1998 12:37:04 -0600

kernel-package (4.02) unstable; urgency=low

  * Added stuff for the powerpc boot loader, and fixed a few typos in the
    kernel rules file.

 -- Manoj Srivastava <srivasta@debian.org>  Thu, 19 Mar 1998 03:02:10 -0600

kernel-package (4.01) frozen unstable; urgency=low

  * In order to do cross compilation, I was asked to export a variable
    called ARCH which is set to the Debian architecture (dpkg
    --print-architecture). Unfortunately, this breaks for PowerPCs: 
    although Debian calls the architecture powerpc, the kernel knows it as
    ppc. Things get very confused. This fix is essential for PowerPC
    compilations. 

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 18 Mar 1998 01:14:04 -0600

kernel-package (4.00) unstable; urgency=high

  * Fix a thinko in lilo run that could be a security hole.

 -- Manoj Srivastava <srivasta@debian.org>  Sun, 15 Mar 1998 15:49:30 -0600

kernel-package (3.65) unstable; urgency=low

  * Rewrote /vmlinuz as symlink handling in image.postinst. This should
    correctly handle the bug. closes: Bug#19473

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 11 Mar 1998 14:02:14 -0600

kernel-package (3.64) unstable; urgency=low

  * Add a make recommendation for kernel source package as well. 
    closes: Bug#19223
  * Added a note to the Flavours document to specify a System.map file for
    klogd in /etc/init.d/syslog

 -- Manoj Srivastava <srivasta@debian.org>  Tue, 10 Mar 1998 16:06:10 -0600

kernel-package (3.63) unstable; urgency=low

  * Added a recommends to shut up lintian; however, we already depended on
    packages that depended on make, so this is a no op.

 -- Manoj Srivastava <srivasta@debian.org>  Sun,  8 Mar 1998 15:12:28 -0600

kernel-package (3.62) unstable; urgency=low

  * Mentioned rootcmd and fakeroot in the README. Mention where one need
    to be root all over too.
  * Added error message from a machine that need the --zimage option to
    the Problems file.
  * Mentioned in the rationale that the kernel image configuration files
    are kept in /boot for further reference.
  * Modified README.headers to indicate why kernel-source did not provide
    the headers required by libc6, but kernel-headers does.
  * Brought the headers README up to date.
  * Make the kernel-image suggest SILO on the sparcs rather than LILO.

    Made a series of changes for sparc architecture machines. Since the
    patches are hand installed, please test this version carefully
  
  * Added documentation for actions take for SILO
  * Created a special config.sparc for sparc machines
  * Changed the image prerm to look for and deal with silo as well as lilo
    installations
  * Major changes in image.postinst for SILO. 
  * Added loader specific variables, and passed them in to the control
    file and to the postinst scripts. Added support for config.sparc. Make
    the unpatch happen before cleaning out the debian directory. Do not
    remove the debian directory after applying the kernel patch. Make
    kernel-doc in the binary-indeo area. Let sparcs also have compressed
    kernels
  * closes: Bug#18845, Bug:18846

 -- Manoj Srivastava <srivasta@debian.org>  Thu,  5 Mar 1998 17:08:04 -0600

kernel-package (3.61) unstable; urgency=low

  * There were bugs in 3.60, which are fixed in this release. Since the
    changes since pre-3.60 are so drastic, I am including the changelog
    entry again (as most people shall not see 3.60)
  * Fixed copyright files for all generated packages. This is one lintian
    warning less to worry about
  * This is a major change in the source/header packages. In architectures
    different from i386, `kernel-headers-*' and `kernel-source-*' are
    incompatible. This also has an effect on libc6-dev, which depends on
    kernel-headers-2.0.3x | kernel-source-2.0.3x, which is only true on
    i386 architectures. One possible solution would be to make libc6-dev
    depend on kernel-headers-2.0.32, but that won't work because
    kernel-source provides kernel-headers. In fact, since kernel-headers
    are arch dependent, but kernel-source is arch: all, kernel-source-*
    should not provide kernel-header* at all. 
    
    Once kernel source stops providing kernel-header*, and libc6-dev
    depends on kernel-headers-2.0.32 and links /usr/include/{linux,asm} to
    /usr/src/kernel-headers-2.0.32 (nor /usr/src/linux-2.0.32) things
    would work again in a Multi arch compatible fashion.
  
    Hence, now kernel-source-* packages compiled with this kernel-package
    shall not provide any sort of kernel-headers. For the sake of
    backwards compatibility, /usr/src/linux-$version symlinks are still
    being provided (as people may upload newer kernels while keeping an
    older libc6-dev around, which depends on /usr/src/linux-2.0.32. 
  
    However, I have been badgered enough about this that I shall remove
    the /usr/src/linux-$version symlinks at some point. This version no
    longer registers stuff in /usr/src/.linux-versions, and is no longer
    as paranoid about /usr/src/linux; but it does not outright remove
    those files either, so as not to cause people with older kernels
    having a problem during removal.As soon as it is deemed permissible,
    we shall get less paranoid about /usr/src/linux-$version as well. 

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 18 Feb 1998 17:00:06 -0600

kernel-package (3.60) unstable; urgency=low

  * This is a major change in the source/header packages. In architectures
    different from i386, `kernel-headers-*' and `kernel-source-*' are
    incompatible. This also has an effect on libc6-dev, which depends on
    kernel-headers-2.0.3x | kernel-source-2.0.3x, which is only true on
    i386 architectures. One possible solution would be to make libc6-dev
    depend on kernel-headers-2.0.32, but that won't work because
    kernel-source provides kernel-headers. In fact, since kernel-headers
    are arch dependent, but kernel-source is arch: all, kernel-source-*
    should not provide kernel-header* at all. 
    
    Once kernel source stops providing kernel-header*, and libc6-dev
    depends on kernel-headers-2.0.32 and links /usr/include/{linux,asm} to
    /usr/src/kernel-headers-2.0.32 (nor /usr/src/linux-2.0.32) things
    would work again in a Multi arch compatible fashion.
  
    Hence, now kernel-source-* packages compiled with this kernel-package
    shall not provide any sort of kernel-headers. For the sake of
    backwards compatibility, /usr/src/linux-$version symlinks are still
    being provided (as people may upload newer kernels while keeping an
    older libc6-dev around, which depends on /usr/src/linux-2.0.32. 
  
    However, I have been badgered enough about this that I shall remove
    the /usr/src/linux-$version symlinks at some point. This version no
    longer registers stuff in /usr/src/.linux-versions, and is no longer
    as paranoid about /usr/src/linux; but it does not outright remove
    those files either, so as not to cause people with older kernels
    having a problem during removal.As soon as it is deemed permissible,
    we shall get less paranoid about /usr/src/linux-$version as well. 
  * closes: Bug#18277

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 18 Feb 1998 16:44:31 -0600

kernel-package (3.59) unstable; urgency=low

  * Fixed README to also mention libc6-dev, and to remind people that some
    of the dependencies mentioned may already be present on their
    machines. closes: Bug#18306
  * Fixed the copyright to refer to version 2 of the GPL.
  * Added the rationale, and install it in kernel-package kernel source
    packages. 

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 18 Feb 1998 01:10:54 -0600

kernel-package (3.58) unstable; urgency=low

  * Added SUBARCH, which is used to distinguish Amiga, Atari, Macintosh,
    etc. kernels for Debian/m68k, and may well be required for the alpha,
    from what I hear. Unlike the FLAVOURS variable, which affects
    everything it can lay its grubby hands on (kernel image, headers,
    source, doc package versions, and where the modules are looked for
    under /lib/modules), this only affects the naming of the kernel-image
    as the source and doc packages are architecture independent and the
    kernel-headers do not vary from one sub-architecture to the
    next. These changes are courtesy of James Troup <J.J.Troup@scm.brad.ac.uk>

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 16 Feb 1998 16:47:08 -0600

kernel-package (3.57) unstable; urgency=low

  * Mention mawk as a provider of awk in the README/ closes: Bug#18156

 -- Manoj Srivastava <srivasta@debian.org>  Fri, 13 Feb 1998 13:06:19 -0600

kernel-package (3.56) unstable; urgency=low

  * Mentioned in the copyright file that the GPL and Artistic licences are
    available on the file system.
  * Ensure that the /usr/src/linux and /usr/src/linux-<version> links
    always exist, no matter what. Apparently, upgrading from
    kernel-source-2.0.32_2.0.32-1 to kernel-source-2.0.32_2.0.32-3 does
    not create /usr/src/linux-<version>, which breaks libc6-dev.
  * Toned down the language about LILO, so as not to startle new sparc users

 -- Manoj Srivastava <srivasta@debian.org>  Thu, 12 Feb 1998 21:56:50 -0600

kernel-package (3.55) unstable; urgency=low

  * Added ARCH to make called, this allows for cross compiling kernels
    (added on a request by  James Troup <J.J.Troup@scm.brad.ac.uk>)
  * Make kernel-headers arch: any, so we can indeed have different headers
    for different architectures.
  * m68k can now handle vmlinuz, so reverse that behaviour in the rules
    file. AFAIK m68k still uses zImage.
  * Improvements to /usr/doc/kernel-patch/MultiArch.gz, based on
    suggestions by James Troup <J.J.Troup@scm.brad.ac.uk>/
  * Upgraded to standards version 2.4.0.0
  * Fixed old FSF address in copyright file.
  * This fixes all known lintian warnings.

 -- Manoj Srivastava <srivasta@debian.org>  Mon,  9 Feb 1998 17:34:02 -0600

kernel-package (3.54) unstable; urgency=low

  * Fixed rootcmd typos in make-kpkg. fixes: Bug#17618
  * Re-did the Headers README file
  * Added a rationale to the LinkPolicy document. So far, it detailed
    *what* Debian did. Now, it also says *why* we do it.

 -- Manoj Srivastava <srivasta@debian.org>  Thu, 29 Jan 1998 19:13:58 -0600

kernel-package (3.53) unstable; urgency=low

  * Fixed a typo where we tried to dd /vmlinuz-2.0.32 rather than the
    correct /boot/vmlinuz-2.0.32 in image.postinst. How come this glaring
    an error has gone unreported until now?

 -- Manoj Srivastava <srivasta@debian.org>  Fri, 23 Jan 1998 14:36:34 -0600

kernel-package (3.52) unstable; urgency=low

  * Fixed Typo in kernel rules that put all modules into block (this
    is more of a thinko/cut and paste error. fixes: Bug#16697,Bug#16702
  * No longer a fatal error if there is no /vmlinuz (or
    equivalent). fixes: Bug#16899
  * Added language to the abort on /usr/src/linux not being a
    link. 
  * Documented the fact that if you re-run make-kpkg with a different
    revision number, you have to reconfigure the kernel. 
    fixes: Bug#16968
  * ignore obsolete fdformat in favour of superformat.

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 21 Jan 1998 03:27:35 -0600

kernel-package (3.51) unstable; urgency=low

  * Changed the kernel rules file not break on the sound modules of
    2.1.70+ kernels (I think it is a bug in the kernel Makefile, but this
    fix make make-kpkg handle the problem and be more robust).

 -- Manoj Srivastava <srivasta@debian.org>  Thu, 25 Dec 1997 01:30:49 -0600

kernel-package (3.50) unstable; urgency=low

  * Modified image.postinst to also cater to people on whose architecture
    the image is not called vmlinuz but something else (like vmlinux, for
    example). closes:Bug#16258
  * Fixed two minor doc typos for make-kpkg. closes:Bug#16224

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 24 Dec 1997 13:07:21 -0600

kernel-package (3.49) unstable; urgency=low

  * Made the postrms also know about the kernel version, not just the
    postinst. (Sorry). closes:Bug#15920
  * Changed include.postrm to be more careful about removing the symbolic
    link /usr/src/linux-X.Y.Z. Keep track if there is another package
    installed that could provide the link.

 -- Manoj Srivastava <srivasta@debian.org>  Sat, 13 Dec 1997 23:04:47 -0600

kernel-package (3.48) unstable; urgency=low

  * Important changes for kernel-source-* and kernel-header-* packages: now
    kernel-source-* packages also provide the exact kernel-header-* (libc6
    need only depend on kernel-header-* now.
  * The kernel-header-* and kernel-source-* packages now also maintain the
    /usr/src/linux-X.YY.ZZ links (in addition to the /usr/src/linux links)
    This is used in the libc6 package.

 -- Manoj Srivastava <srivasta@debian.org>  Sat, 13 Dec 1997 12:46:47 -0600

kernel-package (3.47) unstable; urgency=low

  * Added HAM modules to the module we know about, these were introduced
    in 2.1.70.
  * Added configure as a valid target to make-kpkg, so people can
    make sure that edits to configuration files are not stomped over by
    make-kpkg (most people can ignore this)

 -- Manoj Srivastava <srivasta@debian.org>  Tue,  9 Dec 1997 23:27:04 -0600

kernel-package (3.46) unstable; urgency=low

  * Because of new option rootcmd (for sudo and fakeroot and such), one
    can't just use -r as a shortcut for -revision (since it is now
    ambiguous). Fixed README to reflect this. closes:Bug#15016
  * Added documentation of rootcmd to the help message (make-kpkg
    -h). This, along with the above, closes:Bug#15078
  * Fixed a type in a rules command (negated test). This closes:Bug#15276 
  * Added documentation about problems with encaps to the problems file. 

 -- Manoj Srivastava <srivasta@debian.org>  Mon,  1 Dec 1997 13:54:20 -0600

kernel-package (3.45) unstable; urgency=low

  * Ignore unmounted devices while looking for a root file system. Much
    thanks to Thomas Kocourek <tko@westgac3.dragon.com> for noticing
    this. 
  * Added handling for root_cmd in the rules file. This should be set to
    `sudo' or `fakeroot' and is only used in the target buildpackage (it
    calls dpkg-buildpackage -r$root_cmd)
  * Made the rules file notice the env variable ROOT_CMD and over ride the
    site wide default.
  * Added a rootcmd option to make-kpkg and have it set the root_cmd
    variable via ROOT_CMD env variable.
  * Document all the above. closes:Bug#14539
  * Make sure that the copyright file for the kernel-doc package is not
    compressed. closes:Bug#14403,Bug#14405
  * Added internal utility kpkg-vercheck to test the validity of the
    package version.
  * Make the kernel rules file abort immediately if the version number is
    not valid, rather than have the it happen towards the end (after a
    long compile). closes:Bug#14597

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 10 Nov 1997 10:37:08 -0600

kernel-package (3.44) unstable; urgency=low

  * Install the README.headers in the right place for the source
    package. closes:Bug#14552.
  * Handle the new NLS_MODULES that have appeared in the newest 2.1.6x
    kernels. closes:Bug#14527.

 -- Manoj Srivastava <srivasta@debian.org>  Wed,  5 Nov 1997 23:30:48 -0600

kernel-package (3.43) unstable; urgency=low

  * Added README.headers to the kernel-source package as well, since the
    information _is_ relevant to compiling kernels. Since kernel source
    packages have higher visibility than kernel header packages, this may
    help avoid some FAQs from being asked.
  * Expand on epoch numbers on standard kernel packages. Now the README
    file actually encourages epochs (horrors).

 -- Manoj Srivastava <srivasta@debian.org>  Sat, 25 Oct 1997 01:59:19 -0500

kernel-package (3.42) unstable; urgency=low

  * Changed image postinst not to use the obsolete -d option to
    superformat. Removed extra spaces from the exec option, so that it is
    more likely to work. Noticed by Joost Kooij <kooij@mpn.cp.philips.com>
    as BUG#14022
  * Note that the proposed two level versioning scheme fails if standard
    kernels use epochs. Further note that one may introduce epochs even in
    custom kernels. This fixes BUG#14067.

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 22 Oct 1997 02:47:22 -0500

kernel-package (3.41) unstable; urgency=low

  * Handle obsolete /System.map and /System.old links left around by older
    kernel-package packages. All the programs that look at the information
    in the map files (including top, ps, and klogd) also will look at
    /boot/System.map-<version>, we just need to ensure that that file is
    present, and no longer require the symbolic link. 
    Actually, having the symbolic link in / is technically detrimental
    (apart from cluttering up /); many programs, though looking in /boot,
    still allow /System.map to override. If you use LILO to choose between
    multiple kernels, then the /System.map symbolic link only applies to
    one such kernel, for all other choices the symbols loaded will be
    wrong. Not having the symbolic links at all prevents this. 
    Therefore, the new image.postinst file shall offer to remove the
    symbolic links in /. This should fix BUG#13359

 -- Manoj Srivastava <srivasta@debian.org>  Fri, 26 Sep 1997 10:44:39 -0500

kernel-package (3.40) unstable; urgency=low

  * Added the proposal for the new multi architecture support. Documented
    the new variable patch_the_kernel and the ENV override.  
  * Mentioned new behaviour of depmod and friends Re non .o files in
    /lib/modules in the problems file.

 -- Manoj Srivastava <srivasta@debian.org>  Thu, 18 Sep 1997 00:02:55 -0500

kernel-package (3.39) unstable; urgency=low

  * Fixed handling of modules.dep in the image.postinst. We do not attempt
    to recreate a modules.dep, since the man page admits the file so
    created may be incorrect. We warn the installer that there maybe
    problems loading modules into the kernel until reboot iff the version
    being installed is the same as the version currently running.
  * This fixes BUG#13009.

 -- Manoj Srivastava <srivasta@debian.org>  Tue, 16 Sep 1997 15:07:02 -0500

kernel-package (3.38) unstable; urgency=low

  * Mentioned other kernel source sites in the copyright file. This fixes
    BUG#11951.
  * Install files while preserving the timestamp (use install -p) 
  * This could be considered a release candidate, as long as a fixed
    dpkg-dev is also provided at the same time. This has been extensively
    tested on the authors machine, and there have been no bugs reported in
    nearly a month.

 -- Manoj Srivastava <srivasta@debian.org>  Fri, 29 Aug 1997 12:10:37 -0500

kernel-package (3.37) unstable; urgency=low

  * No longer create a System.map symlink in /, since that may confuse
    klogd when choosing kernel images using LILO. Since top, ps, and klogd
    look at /boot/System.map-<version>, we just need to make sure that
    file is present. This makes us friendlier to multiple images of the
    same kernel version.
  * No longer redirect output to a file in /tmp for security reasons (we
    use a log file in /var/log instead). This fixes BUG#11765,
    BUG#11766 and BUG#11847 
  * Added support for different flavours of the same kernel version for
    people who need them. This is based on the ideas and work of Bill
    Mitchell <mitchell@mozcom.com> and Noel Maddy <ncm@biostat.hfh.edu>.
    This should make us fully compliant to having multiple flavours of the
    same kernel version.
  * Added dependencies to targets in rules. Now things should work as
    expected if one edits a .config file. 
  * Fixed destination for the Buildinfo file. This fixes BUG#11884.

 -- Manoj Srivastava <srivasta@debian.org>  Mon,  4 Aug 1997 13:03:38 -0500

kernel-package (3.36) unstable; urgency=low

  * All kernel packages produced now list the version of kernel-package
    used in the file /usr/doc/Buildinfo. This is a bit of a Hack.
  * The image prerm will allow you to remove an running kernel image and
    hose your system. You will be warned. (under protest).
  * Added a variable to choose a no symlink option, which puts the real
    images in /vmlinuz and /vmlinuz.old, not symlinks (similarly for
    System.map). This makes it potentially less useful, since unless other
    action is taken one would have only two images on the machine at the
    time. This has been added for people who use file systems that do not
    implement symlinks.
  * Added a variable to ask for reverse symlinks, that is, vmlinuz is the
    real file, vmlinuz-2.0.30 is the link. This also restricts the system
    to two image files unless the user save a copy, added for people with
    boot on umsdos (can't see symlinks in dos mode) but who want the links
    to see what the image versions are in Linux. Mutually exclusive with
    the no symlink option. (apart from the symlinks, it is identical to
    the no symlink option). These should fix Bug#11395.
  * Fixed typo in control file for kernel-doc description. This fixes
    Bug#11568.

 -- Manoj Srivastava <srivasta@debian.org>  Tue, 29 Jul 1997 17:50:51 -0500

kernel-package (3.35) unstable; urgency=low

  * Preserve owner when copying the config file around. This fixes
    BUG#11022. 
  * Added final newline in the control file. This fixes BUG#11024.

 -- Manoj Srivastava <srivasta@debian.org>  Sun,  6 Jul 1997 22:04:22 -0500

kernel-package (3.34) unstable; urgency=low

  * Ran spell check on the README file.
  * Added a missing endif in the rules file

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 25 Jun 1997 02:32:42 -0500

kernel-package (3.33) unstable; urgency=low

  * No longer carries around an extra uncompressed kernel image, and does
    not anymore create /boot/psdatabase-X.X.XX. The psdatabase file does
    not seem to be required anymore.
  * Removed all references to psdatabase.

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 18 Jun 1997 13:13:15 -0500

kernel-package (3.32) unstable; urgency=low

  * First version to be built with cvs-buildpackage.
  * Added patches to support m68k from "Frank Neumann"
    <Frank.Neumann@Informatik.Uni-Oldenburg.DE>.
  * Added patched to support sparcs from Eric Delaunay
    <delaunay@lix.polytechnique.fr> 
  * This fixes Bug#10231.

 -- Manoj Srivastava <srivasta@debian.org>  Mon,  2 Jun 1997 18:38:57 -0500

kernel-package (3.31) unstable; urgency=low

  * Added a version number to the dependency on dpkg-dev, we now require at
    least version 1.4.0.9., since dpkg-gencontrol fails with an error:
    failure: chown new files list file: Illegal seek
    This fixes BUG#10121.
  * Added problems with older versions of dpkg-dev to the problems file.

 -- Manoj Srivastava <srivasta@debian.org>  Sun, 25 May 1997 22:33:47 -0500

kernel-package (3.30) unstable; urgency=low

  * Tested with 2.0.30 and 2.1.40.
  * Moved config to /boot, where it arguably should have gone to in the
    first place. The /boot directory contains other information pertinent
    to the kernel, such as the System.map file, and the psdatabase.  The
    information about exactly what was configured into the kernel was
    missing, and it can get quite critical on some machines.  Also, the
    config file may serve as a base for compiling the next kernel. This
    file is not really a configuration file (not when packaged as part of
    the kernel-image package), hence it does not belong in /etc (no amount
    of changing this file will have any affect on system behaviour).  

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 21 May 1997 01:44:17 -0500

kernel-package (3.29) unstable; urgency=low

  * Kernel-image and kernel-doc now suggest each other.
  * Also recognize powerpc as a synonym for ppc in determining whether
    we use zImage or bzImage by default.
  * Fixed up some typos in documentation
  * Added rules target kernel_doc. This fixes BUG#9138
  * Also install .config file under /usr/doc. This fixes BUG#9298

 -- Manoj Srivastava <srivasta@debian.org>  Fri, 2 May 1997 14:34:51 -0500

kernel-package (3.28) frozen unstable; urgency=low

  * No longer install text files in the modules directory, since depmod
    in modutils-2.1.34 fails when it finds a non-ELF file in modules
    directory. This fixes Bug#9243.

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 30 Apr 1997 15:24:51 -0500

kernel-package (3.27) frozen unstable; urgency=low

  * Really add in all the changes sent in by Herbert Xu. The changes are: 
    * Changed to source package name back to kernel-source-=V again. 
    * Changed the installs to be without -o root -g root since it is no
      longer useful as the chowns are done before the packages are built. It
      also means that if it is used in targets like stamp-configure which may
      be run by anyone it won't not generate an error.
    * Made rules file generate the control file.
    * Fixed some typos in chown commands while generating the header
      packages. 

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 21 Apr 1997 15:12:19 -0500

kernel-package (3.26) frozen unstable; urgency=low

  * Made the default image for ppc architecture zImage. This fixes Bug#8696 .
  * Forgot to mention that the source package for the kernel packages
    (produced by make-kpkg buildpackage, for example) has been changed to
    not contain the kernel version as part of the name (all the deb files
    produced have not changed), so we now get kernel-image-xxx_yy_zz.deb,
    kernel-source-xxx_yy_zz.deb, and kernel-headers-xxx_yy_zz.deb, along
    with kernel-source.tar.gz and kernel-source_yy.diff.gz
  * Added config dependencies for module targets

 -- Manoj Srivastava <srivasta@debian.org>  Fri, 18 Apr 1997 00:53:24 -0500

kernel-package (3.25) frozen unstable; urgency=low

  * Added changes sent in by the kernel packages maintainer.

 -- Manoj Srivastava <srivasta@debian.org>  Sun, 13 Apr 1997 00:03:36 -0500

kernel-package (3.24) frozen unstable; urgency=medium

  * Fixed a bash 2.0 inconsistency

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 9 Apr 1997 13:33:58 -0500

kernel-package (3.23) frozen unstable; urgency=medium

  * Fixed typos in rules for generating external modules

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 9 Apr 1997 12:41:45 -0500

kernel-package (3.22) frozen unstable; urgency=medium

  * Documented constraints on the debian revision field. This is important
     enough that I am reproducing the text of the admonition here.
     The revision number (the argument supplied after the --revision flag)
     has certain constraints: it may contain only alphanumerics and the
     characters + . (full stop, and plus) and should contain a digit.
     NOTE: No hyphens allowed. (Look at Chapter 5 of the Programmers manual
     for details)

     This is because dpkg imposes an ordering on version numbers, so that
     it can tell whether packages are being up or downgraded and so that
     dselect can tell whether a package it finds available is newer than
     the one installed on the system.

 -- Manoj Srivastava <srivasta@debian.org>  Fri, 4 Apr 1997 11:48:42 -0600

kernel-package (3.21) frozen unstable; urgency=low

  * Tested source package creation for 2.1.30
  * set umask to copy the kernel source files untainted by package creators
    umask. 
  * set umask to copy the kernel header files untainted by package creators
    umask. 

 -- Manoj Srivastava <srivasta@debian.org>  Tue, 1 Apr 1997 11:04:42 -0600

kernel-package (3.20) frozen unstable; urgency=low

  * Could not reproduce BUG#8274, neither could the original reporter. I have
    made some changes in the postinst to allow leading whitespace in the
    user responses, and tested it on three different kernel-source
    versions.  I believe this bug is fixed now (I have 3 suitable boot
    floppies as evidence). 
  * image postinst no longer aborts when the user gives up on formatting a
    floppy, but now offers a choice to proceed with a preformatted floppy. 
  * Fixed spelling errors in kernel image postinst, fixing BUG#8409
  * Offer to user superformat if it exists.
  * Tested boot floppy creation.
  * Tested on 2.0.29, 2.1.29, and 2.1.30
  * Spell check the Problems file, mention setfdprm in there.
  * Mention setfdprm in postinst if fail to format floppy.
  * Fix a typo in code determining which floppy drive to use
  * Allow leading whitespace in responses
  * Added required packages to the README file.

 -- Manoj Srivastava <srivasta@debian.org>  Sun, 23 Mar 1997 22:53:13 -0600

kernel-package (3.19) unstable; urgency=low

  * Tested again on 2.1.27 kernel.
  * Added correct Handling for ipv6 modules in rules file

 -- Manoj Srivastava <srivasta@debian.org>  Sat, 1 Mar 1997 13:52:15 -0600

kernel-package (3.18) unstable; urgency=high

  * Successfully compiled a 2.1.27 kernel.
  * Made make-kpkg not look for modules directory; that directory is
    removed by a make-kpkg clean.
  * Mentioned that ncurses-dev is required for make menuconfig in the
    README file.

 -- Manoj Srivastava <srivasta@debian.org>  Sat, 22 Feb 1997 23:36:30 -0600

kernel-package (3.17) unstable; urgency=low

  * Stupid @#$%$%@! vi changed Feb to February in the changelog messing up
    gencontrol. 

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 17 Feb 1997 19:29:02 -0600

kernel-package (3.16) unstable; urgency=low

  * Started compiling a list of known problems with compiling kernel images.
    This is now available as /usr/doc/kernel-package/Problems.
  * Moved to standards version 2.1.2.2.
  * Removed extra root checks in the rules file.
  * Added error messages to failed root check in the rules file.

 -- Manoj Srivastava <srivasta@debian.org>  Thu, 13 Feb 1997 14:40:41 -0600

kernel-package (3.15) unstable; urgency=low

  * Fixed kernel rules file so that one does not depend on the existence of 
    modules. This fixes BUG#6898.

 -- Manoj Srivastava <srivasta@debian.org>  Tue, 28 Jan 1997 22:15:27 -0600

kernel-package (3.14) unstable; urgency=low

  * Made image.postinst conform to standards version 2.1.2.2.

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 27 Jan 1997 09:09:37 -0600

kernel-package (3.13) unstable; urgency=low

  * Silly typo in postinst (never code when sleepy).

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 27 Jan 1997 00:56:48 -0600

kernel-package (3.12) unstable; urgency=low

  * Added more injunction to run make-kpkg clean regularly
  * Remove /lib/modules/$version/modules.dep if it exists.  Recreate 
    immediately with depmod -a.  This will help reinstall the same kernel
    version more than once.

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 27 Jan 1997 00:38:59 -0600

kernel-package (3.11) unstable; urgency=low

  * Added suggestions for fdutils and LILO for the kernel_image package.
  * Fixed typo in include.postinst.  Fixes BUG#6692.
  * Added warnings about possible (recent?) failure to autodetect floppy
    drives if using old fdformat from miscutils while creating a boot disk.
    This addresses BUG#6037.

 -- Manoj Srivastava <srivasta@debian.org>  Mon, 20 Jan 1997 12:03:31 -0600

kernel-package (3.10) unstable; urgency=low

  * *ALERT*.  Changed how customization variables are handled. All
    variables are given reasonable (IMHO) defaults.  Then the site
    customization file /etc/kernel-pkg.conf is read in, which can
    over-ride the defaults. THEN, the environment/command line variables
    are used to over-ride the values.
  * New env variables: KPKG_MAINTAINER, KPKG_EMAIL, IMAGE_IN_BOOT,
    IMAGE_TYPE 
  * new customization variables: kimage, image_in_boot
  * Edited README to give bare bones documentation for user customizable
    vars. 
  * Added man page kernel-pkg.conf.5.
  * Normalized existing man pages according to the templates floating
    around on the list.
  * Added copyright statements to the man pages.
  * Documented changes in make-kpkg
  * Added --bzimage option to make-kpkg for completeness.
  * Added a --zimage option to make-kpkg, (with support in the rules file),
    to make a zImage kernel rather than a bzImage kernel (the default). 
    Useful for people having problems with bzImage kernels. Suggested by 
    Richard G. Roberto <richr@Bear.COM>
 -- Manoj Srivastava <srivasta@debian.org>  Tue, 7 Jan 1997 12:44:00 -0600

kernel-package (3.09) unstable; urgency=low

  * Added documentation to the effect that make-kpkg is part of
    kernel-package in various READMEs. 
  * Made the final location of vmlinuz configurable (since one may have
    it under /boot as well as /).

 -- Manoj Srivastava <srivasta@debian.org>  Thu, 2 Jan 1997 11:27:06 -0600

kernel-package (3.08) unstable; urgency=low

  * Added a man page for internal script kernel-packageconfig.  This fixes
    BUG#6304.

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 1 Jan 1997 22:02:03 -0600

kernel-package (3.07) unstable; urgency=low

  * Fixed typo in kernel image postinst script

 -- Manoj Srivastava <srivasta@debian.org>  Sun, 29 Dec 1996 23:40:31 -0600

kernel-package (3.06) unstable; urgency=low

  * Allow local configuration of the destination of all kernel related
    deb file (the default remains ..).  Now one can set it to directories
    like ../kernel-deb or /boot/archive/deb or whatever by setting the
    variable DEB_DEST in the conf file.
  * Offer user a choice about floppy drive to use. Also make it explicit
    which floppy drive is being used. This fixes BUG#6037.
  * Warn Intel users that they should get bin86 as well, if they intend
    to compile a custom kernel.  This fixes BUG#6144.

 -- Manoj Srivastava <srivasta@debian.org>  Fri, 27 Dec 1996 18:09:51 -0600

kernel-package (3.05) unstable; urgency=low

  * The package needs dpkg-gencontrol to do any work whatsoever, so it
    should depend on dpkg-dev, instead of merely recommending it.  
    This fixes BUG#6040.

 -- Manoj Srivastava <srivasta@debian.org>  Sat, 21 Dec 1996 01:54:01 -0600

kernel-package (3.04) unstable; urgency=low

  * Added dpkg (>= 1.4) to the dependencies, since older versions do
    not understand the new dpkg --build syntax.  This fixes BUG#6041
  * Fixed target modules config in kernel/rules. This fixes BUG#5836
  * Latest default kernel config file

 -- Manoj Srivastava <srivasta@debian.org>  Wed, 27 Nov 1996 15:11:12 -0600

kernel-package (3.03) frozen unstable; urgency=medium

  * changed priority of kernel-source package to optional
  * changed priority of kernel-image package to optional
  * Recommended dpkg-dev since kernel/rules call binaries from there
    This fixes a problem that a number of people have reported on the
    lists, though it never made it as a formal bug report.

 -- Manoj Srivastava <srivasta@debian.org>  Fri, 22 Nov 1996 11:02:31 -0600

kernel-package (3.02) unstable; urgency=low

  * kernel-source-X.XX now no longer recommends bin86, since bin86 is only
    available Intel platforms.  It now merely mentions it in the
    description. 

 -- Manoj Srivastava <srivasta@debian.org>  Thu, 7 Nov 1996 22:18:15 -0600

kernel-package (3.01) unstable; urgency=low

  * Changed one last typo in postinst. This (finally) fixes Bug#4234. 
  * Also, version 3.00 fixed Bug#4500 and Bug#4624
  * kernel-source-X.XX now recommends bin86, which fixes Bug#4443
  * Added short, succinct (and potentially dangerous) instructions on
    compiling kernels at the top of the README file.  This fixes Bug#4445.

 -- Manoj Srivastava <srivasta@datasync.com>  Wed, 6 Nov 1996 23:58:35 -0600

kernel-package (3.00) unstable; urgency=medium

  * Changed the kernel-package to the new packaging schemes.
  * Removed the dist, source, and diff targets for make-kpkg, added
    binary-arch, binary-indep, and buildpackage targets.
  * Changed make-kpkg to reflect reorganization of the
    /usr/lib/kernel-package/ tree.
  * Changed Author email.
  * Removed dithering about ./debian/* in kernel sources, now make-kpkg
    looks only at /usr/lib/kernel-package/ (clears confusion about older
    versions of kernel-package).
  * Modified make-kpkg.8 to reflect changes in make-kpkg, and ran a spell
    check. 
  * Renamed debian/package.config to kernel-packageconfig, and removed
    (obsolete) references to dchanges)
  * Moved *.README to copyright.*, and changed the rules files to
    conform. 
  * Added explanation for kernel-headers-X.XX (and why we need this
    package in spite of having headers in libc5-dev)
  
 -- Manoj Srivastava <srivasta@datasync.com>  Mon, 4 Nov 1996 16:19:33 -0600

kernel-package (2.03) unstable; urgency=low

  * Fixed typo in make-kpkg man pages where it insisted that it was
    make-dpkg ;-) 
  * Made the close brackets agree with open brackets in the man page
    synopsis.   This fixes Bug#3960

 -- Manoj Srivastava <srivasta@debian.org>  

kernel-package (2.02) unstable; low

  * Made image.postinst more polite.
  * Also enabled kernel-{source,image,headers} targets in kernel.rules 
  * Changed make-kpkg to also accept the new targets.
  * Fixed typo in man page.
  * The man page says it is an administrators man page rather than a 
    programmers man page.
  * Recommended libc-dev for kernel-source and kernel-package
  * source suggests ncurses3.0-dev, tk40-dev and the description explains 
    you could use make menuconfig rather than plain old make config if you
    had these packages.
  * Fixed typo in the rules for modules in /usr/src/modules/ directory
  * Made the rules for such modules ignore errors (since they are not
    really a part of this package, error there should not halt this build
    (or so people seem to want it)
  * Look for modules in the kernel config file (or the default config file
    if the user has not supplied a config file), and only make modules and
    install them if modules have been configured in the config file. This 
    could be tested better.
  * Fixed the make-kpkg.8 man page so that it now does not seem to mandate
    a source and diff file for additional modules installed under the 
    directory /usr/src/modules/ (whether these files are produced is at
    the discretion of the maintainer of that modules package.
  * Make configure depend on stamp-configure which in turn depends on
    .config Hopefully, this will remake the image target if one changes
    the config file Hopefully, this will not cause the image target to
    build needlessly. 

 -- Manoj Srivastava <srivasta@debian.org>  

kernel-package (2.01) unstable; urgency=low

  * Changed the scripts to refer to /usr/bin/perl rather than /bin/perl.
  * Added an extended description to the image control file.
  * Added a note that the dist target requires a PGP key.
  * Fixed a typo (missing DEBDIR) in debian.rules.
  * Fixed the targets expected by make-kpkg (kernel_image rather than 
    kernel-image, etc).
  * In image.postinst, made arguments to system be a single argument if  
    the arguments contain shell meta-characters, (this way perl passes
    them to sh -c).
  * Made make-kpkg accept non floats as revision numbers, to facilitate  
    local names.
  * Fixed silly bug in makefloppy in image.postinst.
  * Fixed the extended description of the kernel-package package.
  * Updated the image postinst to install the mbr, if it exists, and to
    activate the root partition, and to not overwrite the mbr (oops).
  * Changed maintainer email address to debian.org (I'll be in a state of  
    flux soon)


 -- Manoj Srivastava <srivasta@pilgrim.umass.edu>  


