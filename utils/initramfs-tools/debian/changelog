initramfs-tools (0.64) unstable; urgency=low

  RELEASE o bella, ciao! bella, ciao!

  * debian/initramfs-tools.install: Add /etc/initramfs-tools/modules conffile,
    instead of a cp from postinstall. (closes: #368043)

  * debian/control, update-initramfs.8, mkinitramfs.8: Capitalize RAM + NFS.
    Rephrase nfs root support.

    Thanks to Jeff Bailey <jbailey@raspberryginger.com> and
    Steinar H. Gunderson <sesse@debian.org> for the review.

 -- maximilian attems <maks@sternwelten.at>  Thu, 22 Jun 2006 20:45:59 +0200

initramfs-tools (0.63) unstable; urgency=low

  * init: Use redirection '>' for touching /dev/.initramfs-tools.

  * debian/control, update-initramfs.8, mkinitramfs.8:
    s/an (cpio archive)/a gzipped \1/.
    Thanks to Andy Somerville <andy.somerville@gmail.com>.

 -- maximilian attems <maks@sternwelten.at>  Thu, 22 Jun 2006 01:11:17 +0200

initramfs-tools (0.62) unstable; urgency=low

  * debian/control: We need at least udev 0.086-1, since earlier versions
    had hooks, which don't load ide-disk automatically for 2.6.15 kernels.
    Can't lower dependency to sarge version as it has no coldplug support
    to escape udev dependency loop on upgrade. (closes: #358360, #362816)

  * hook-functions: Add arcmsr to the scsi modules list.

  * debian/NEWS: Add Notice about confdir mv as version 0.61.

 -- maximilian attems <maks@sternwelten.at>  Wed, 21 Jun 2006 09:22:23 +0200

initramfs-tools (0.61) unstable; urgency=low

  Release "O partigiano portami via"

  * debian/TODO: update to latest state.

  * debian/bug: Fix reportbug script shebang line, add some descriptive echos.
    Use exec to open file descriptor 3 for reportbug.

  * debian/control: Pump to 3.7.2 standard version without changes.

  * init: Use 10M as tmpfs_size for the udev /dev, that can be overriden in
    /etc/udev/udev.conf. (closes: #352434)

  * /etc/initramfs-tools: Use the much more intituive conf dir location.
    Thanks for the idea to Andres Salomon <dilinger@debian.org>.

  * debian/initramfs-tools.preinst: mv /etc/mkinitramfs /etc/initramfs-tools
    on upgrade as this should work even with drive space issues.
    Thanks to Jeff Bailey <jbailey@raspberryginger.com> for the posix atomic
    mv hint and Daniel Blaschke <blaschke@hep.itp.tuwien.ac.at> for testing.

  * mkinitramfs: Set CONFDIR to /etc/initramfs-tools.

  * mkinitramfs.8, initramfs-tools.8: Document the new pathes.

  * debian/control: Change Build-depends-indep to Build-depends as we need
    debhelper and cdbs for the clean target, fulfills policy 7.6.

  * debian/initramfs-tools.preinst: Warn and bail out if /etc/initramfs-tools
    already exists.

 -- maximilian attems <maks@sternwelten.at>  Thu, 18 May 2006 17:27:44 +0200

initramfs-tools (0.60) unstable; urgency=low

  "E ho trovato l'invasor"

  * scripts/functions: Allow boot scripts to modify exported boot parameters.
    Thanks David Härdeman <david@2gen.com> for the patch. (closes: 348147)
    This allows the inclusion of cryptoroot hooks to cryptsetup!

  * init: add cryptopts parsing and export.

  * init: Move parse_numeric down to the "mounting root" block.

  * init, scripts/local: Allow rootflags to be passed in kernel cmdline.
    Thanks Thomas Luzat <thomas.luzat@gmx.net> for the patch. (closes: #358917)

  * init: Allow passing nfs root mount option in kernel cmdline.  Thanks
    Brian Brunswick <bdb@forbidden.co.uk> for the patch. (closes: #358649)

  * update-initramfs: s/ALL/all/, fix it to actually run on update in non
    verbose mode. (closes: #362568)

  * update-initramfs: Warn in big letters about grub and lilo installs.
    (closes: #362816)

  * debian/bug: Add reportbug script with info about cmdline, fs and lsmod.

  * initramfs-tools(8): Document the /conf/param.conf feature.

  * mkinitramfs-kpkg(8): Spell out, why the wrapper script is needed.

 -- maximilian attems <maks@sternwelten.at>  Tue, 18 Apr 2006 13:33:18 +0200

initramfs-tools (0.59b) unstable; urgency=low

  * mkinitramfs-kpkg: Intialialize the variables. 
    (closes: #359355, #359620, #359613, #359666, #359681)

 -- maximilian attems <maks@sternwelten.at>  Tue, 28 Mar 2006 16:30:59 +0200

initramfs-tools (0.59) unstable; urgency=low

  * debian/copyright: Add years of copyright and authors.

  * Resync with 0.40ubuntu28:
    - hooks/md: Add raid10 module.
    - scripts/local: Move the "loop waiting for the root filesystem" code from
      the udev premount script to the local mountroot() function where it truly
      belongs.
    - scripts/local-top/udev_helper: Leave the remaining ide-generic part
      there, should be taken over by udev itself.
    - make the md local-top scripts pre-requisite the udev one.
      thanks Scott James Remnant <scott@ubuntu.com> 

 -- maximilian attems <maks@sternwelten.at>  Sun, 26 Mar 2006 22:35:15 +0200

initramfs-tools (0.58) unstable; urgency=low

  * hook-functions: Be more carefull about the minor parsing. The fix of
    #357332 works for 3 digit roots, but not for hdc6 aka root=1606.
    Thanks Martijn Pieters <mj@zopatista.com> for report
    (closes: #358354, #358740).

  * hook-functions: Add gdth to the scsi modules.

  * mkinitramfs-kpkg: Use set -eu to capture full /boot.
    Really (closes: #350875)

  * Add dependency on module-init-tools. (closes: #358632)

  * Don't include full path for man page reference. (closes: #358371)

 -- maximilian attems <maks@sternwelten.at>  Sun, 26 Mar 2006 16:39:37 +0200

initramfs-tools (0.57b) unstable; urgency=low

  * mkinitramfs, update-initramfs, hook-functions:
    On verbose mode show, which modules gets added to the initramfs.

  * hook-functions: Add cpqarray to the scsi modules - thanks for the patch
    to Petter Reinholdtsen <pere@hungry.com>. (closes: #357980)

  * initramfs-tools.8: Document that `-' is not allowed to be used in a script
    filename - the filenames get used as shell variable.  (closes: #344639)

  * mkinitramfs: Don't exit succesfully in a case of a full fs. Leaves the
    linux-image unconfigured. Thanks martin f krafft <madduck@debian.org>
    for pointing to that potential boot failure. (closes: #350875)

 -- maximilian attems <maks@sternwelten.at>  Tue, 21 Mar 2006 11:56:29 +0100

initramfs-tools (0.56) unstable; urgency=low

  * hooks/md: Add linear module - thanks to Moshe Yudkowsky <moshe@pobox.com>.

  * scripts/functions: Fix numerical minor parsing - thanks for the patch to
    Wolfgang Weisselberg. (closes: #357332)

  * mkinitramfs.8: Correct wrong referenced filename.

  * update-initramfs.8: Define the argument 'version' - thanks to "Susan G.
    Kleinmann" <sgk@debian.org>. (closes: #357282)

  * scripts/init-premount/udev_helper: Source the relevant definition to get
    it really run. Thanks to Maurice Massar <massar@unix-ag.uni-kl.de>.
    (closes: #357450)

 -- maximilian attems <maks@sternwelten.at>  Fri, 17 Mar 2006 19:09:11 +0100

initramfs-tools (0.55b) unstable; urgency=low

  * Thanks to Frederik Schüler for pointing to leftovers.

 -- maximilian attems <maks@sternwelten.at>  Wed, 15 Mar 2006 13:23:51 +0100

initramfs-tools (0.55) unstable; urgency=low

  * scripts/init-premount/udev_helper: Fix modprobe args.
    Thanks Frans Pop <fjp@debian.org> for testing 0.54.

  * scripts/local: Use quiet to load the fs. (closes: #339092)

  * hook-functions: Really add the ieee1394 modules.
    Thanks to Michael Prokop <mikap@grml.org> for testing the fix.

  * update-initramfs: Run lilo on updates if no grub is around.
    Thanks Adeodato Simó <adeodato@debian.org> for finding the issue.
    (Closes: #356850)

 -- maximilian attems <maks@sternwelten.at>  Wed, 15 Mar 2006 11:29:12 +0100

initramfs-tools (0.54) unstable; urgency=low

  * hooks/lvm: lvm10 has also an vgchange - exit if no lvm2 libs.
    (closes: #354708)

  * debian/copyright: Meniton current bzr archive. (closes: #352738)

  * hook-functions: Add dac960 scsi driver. (closes: #355162)

  * scripts/init-premount/udev_helper: add code by Scott James Remnant
    <scott@ubuntu.com> from the ubuntu udev hook. We now wait on scsi
    and usb devices to settle, load ide-generic on ide boot only if
    no root device appeared.
    The udev hook is adding ide.agent so no longer duplicate that code.

  * hook-functions: auto_add_modules, split 1000 char wide lines up.
    Should allow better diffing. Splitting them out in proper files with
    each modules / line costs too much initramfs generation time.
    Should allow easier diffing.

  * hook-functions: Add sata_mv thanks Kenshi Muto <kmuto@debian.org>.
    (closes: #355486)

  * hook-functions: Add dasd class to auto_add_modules and dd zfcp module.
    Thanks to s390 support Bastian Blank <waldi@debian.org>. (closes: #355595)

  * hook-functions: Add it821x. (closes #352460)

 -- maximilian attems <maks@sternwelten.at>  Wed,  8 Mar 2006 17:34:25 +0100

initramfs-tools (0.53c) unstable; urgency=low

  * update-initramfs: Really reset takeover to zero.

 -- maximilian attems <maks@sternwelten.at>  Mon,  6 Mar 2006 07:59:34 +0100

initramfs-tools (0.53b) unstable; urgency=low

  * scripts/init-premount/udev_helper: Renamed from udev-helper.
    Thanks to Tollef Fog Heen <tfheen@err.no> (closes: #355235)

 -- maximilian attems <maks@sternwelten.at>  Sat,  4 Mar 2006 15:26:13 +0100

initramfs-tools (0.53) unstable; urgency=high

  * update-initramfs: set_current_version needs to check against
    /boot/initrd-`uname -r` and not /boot/vmlinu?-`uname -r`.
    Otherwise this builds initramfs for newer handbuild trees too.

  * Resync with 0.40ubuntu24:
    - New conf.d dir for config snippet.
    - mptspi already included.
    - keep nfsmount for now, we don't want to add further busybox deps.
    - adds mptfc and mptsas modules (closes: #341930)
    - adds MODULES=netboot support (closes: #352669)
  * Further reduce ubuntudiff:
    - scripts/functions: remove duplicate dir check.
    - scripts/nfs: add quiet to modules loading.

  * mkinitramfs-kpkg: Add kernel-package compat stuff, behaves like mkinitramfs,
    but adds the sha1sum for update-initramfs. Reset takeover=0.
    (closes: #353809) Add small mkinitramf-kpkg.8.

  * init: Move the ROOT export up, so we actually source the hardcoded device
    in initramfs.conf. (closes: #352958)

  * mkinitramfs: When invoked with -r switch pass the hardcoded root device to
    /etc/mkinitramfs/conf.d/root inside the initramfs.

  * hook-functions: First shot at IEEE1394 support - add ohci1394 and sbp2.

 -- maximilian attems <maks@sternwelten.at>  Mon, 27 Feb 2006 10:20:03 +0100

initramfs-tools (0.52b) unstable; urgency=high

  * update-initramfs: Set takeover=1. This allows hooks to regenerate the
    latest initramfs per default. No need for an kpkg wrapper, as
    kernel-package doesn't call update-initramfs, but mkinitramfs.

 -- maximilian attems <maks@sternwelten.at>  Mon, 20 Feb 2006 13:30:54 +0100

initramfs-tools (0.52) unstable; urgency=low

  * hooks/lvm: manual_add_modules dm_snapshot, will allow boot from lvm
    snapshot.

  * init: Fix maybe_break test for the bottom stage.

  * scripts/init-premount/udev-helper: Renamed from scripts/init-premount/ide.

  * update-initramfs: s/was/has/ been altered.
    (closes: #351939, #352633, #353087, #353668)

  * update-initramfs(8), mkinitramfs(8): The point of the first is to be used
    on your local box. Highlight its mode of operations. The second cmd is
    only needed for advanced usage.

 -- maximilian attems <maks@sternwelten.at>  Fri, 17 Feb 2006 21:41:11 +0100

initramfs-tools (0.51) unstable; urgency=low

  * scripts/functions: Call panic on circular deps to get rescue shell.

  * mkinitramfs: Use ${CONFDIR} everywhere.

  * Sync with 0.40ubuntu16:
    - skip 0.40ubuntu15 udev gets fixed to only call update-initramfs
      when /etc/mkinitramfs/initramfs.conf is there.
    - 0.40ubuntu13 don't take over all initramfs images in Debian.

  * hook-functions: auto_add_modules atkb and i8042.

  * scripts/functions: on panic modprobe atkb and i8042 - work around for
    broken configs, where those are not build in. (Closes: #337497)

  * scripts/functions: update_progress check if /dev/.initramfs/ exists
    before writing into it.

 -- maximilian attems <maks@sternwelten.at>  Tue, 24 Jan 2006 13:11:24 +0100

initramfs-tools (0.50c) unstable; urgency=low

  "E so io muoio da partigiano"

  * hook-functions: Fix MODULES=dep as `modprobe --show-depends' prints not
    only the insmod commands, but also the install ones.  Thanks for the patch
    to Jean Charles Delepine <delepine@nnx.com>. (Closes: #342616)

  * hooks/evms, scripts/local-top/evms: EVMS takes care of it's own hooks, rm.
    Thanks Steinar H. Gunderson <sesse@debian.org>. (Closes: 340258)

 -- maximilian attems <maks@sternwelten.at>  Sat, 14 Jan 2006 17:40:48 +0100

initramfs-tools (0.49) unstable; urgency=low

  * Pump dephelper to 4.1.0 dependency as pointed out by linda.

  * initramfs-tools.8: Add DEBUG section, cheat how to check the initramfs.

  * Add optional sarge busybox-cvs-static dep to ease backport.

 -- maximilian attems <maks@sternwelten.at>  Thu, 12 Jan 2006 17:28:42 +0100

initramfs-tools (0.48) unstable; urgency=low

  * mkinitramfs: klibc 1.1.14 moved from /usr/lib/klibc/lib to /lib
    Bonus: You can now execute any klibc bin directly.
    Cope with the move and pump dep. (Closes: 345949)

 -- maximilian attems <maks@sternwelten.at>  Wed,  4 Jan 2006 16:11:25 +0100

initramfs-tools (0.47) unstable; urgency=low

  * mkinitramfs: Don't complain about missing /bin/sh - use rm -f.
    Minor cleanup for the newer packaging of klibc 1.1.14.

 -- maximilian attems <maks@sternwelten.at>  Sat, 31 Dec 2005 14:17:31 +0100

initramfs-tools (0.46) unstable; urgency=low

  * Don't include .bzr dirs in source upload.
    Thanks Frederik Schüler <fs@debian.org>

 -- maximilian attems <maks@sternwelten.at>  Thu, 29 Dec 2005 14:23:46 +0100

initramfs-tools (0.45) unstable; urgency=high

  "Che mi sento di morir."

  * Unset debug before calling init, confuses /etc/init.d/rc.

  * scripts/init-premount/ide: Load uncondionally for ide boots ide-generic
    and also ide-disk, as udev ignores them. High urgency upload for rc bugs.
    Thanks Frans Pop <fjp@debian.org> and Joey Hess <joeyh@debian.org> for
    testing! (Closes: #332824, #342925, #344754, #337045, #338406)

 -- maximilian attems <maks@sternwelten.at>  Thu, 29 Dec 2005 10:34:32 +0100

initramfs-tools (0.44) unstable; urgency=high

  "O partigiano portami via"

  * Urgency high upload to stay in sync with udev for testing.

  * initramfs.conf: Fix wording choice for resume option. (Closes: #337575)

  * hooks/kernelextras: Really fix #335505.
    Don't expand wildcase to current dir. (Closes: #342153)

  * Add initramfs-tools.8 describing how the hooks of initramfs-tools work
    and how to use them. Thanks David Härdeman <david@2gen.com> for the patch.
    (Closes: #339091)

  * initramfs.conf.5,  mkinitramfs.8, update-initramfs.8: Update
    cross-references of the different manpages.

  * TODO: update to current state.

  * scripts/functions: remove old duplicate suspend support.

  * Sync with 0.40ubuntu8. (Closes: #337318)
    - Revert the modprobe changes for now as modules-init-tools of
      testing doesn't have yet the wanted interface.

 -- maximilian attems <maks@sternwelten.at>  Mon, 12 Dec 2005 11:22:15 +0100

initramfs-tools (0.42) unstable; urgency=low

  * hook-functions: The mptspi module is required for at least some machines
    that use the mptscsih. Thanks dann frazier <dannf@hp.com> for the patch.
    (Closes: #341162)

  * Resync with 0.40ubuntu7.
    - Do the udev split by hand as we have a different udev invocation
      supporting linux < 2.6.15. Increment udev dep to the version with
      initramfs hooks.
    - Debian's klibc hasn't yet the nanosleep, waiting for unbroken
      linux-headers.
    - Don't remove resume support from /etc/mkinitramfs/initramfs.conf
      even if bootloader setting is preferred.

 -- maximilian attems <maks@sternwelten.at>  Mon,  5 Dec 2005 12:59:59 +0100

initramfs-tools (0.40ubuntu24) dapper; urgency=low

  * Add support for LSI Logic's Fusion MPT SAS and FC controllers as well.

 -- Adam Conrad <adconrad@ubuntu.com>  Thu, 23 Feb 2006 23:27:16 +1100

initramfs-tools (0.40ubuntu23) dapper; urgency=low

  * Grow a conf.d directory for config snippets, and toss the RESUME option
    in there, to stop editing our own conffile in our maintainer scripts.
  * Add a cleverly hackish preinst that will pull the RESUME setting from
    old config files, migrate it to conf.d/resume, and reset that part of the
    conffile to a factory fresh state.  This should fix the unwanted conffile
    prompt in breezy->dapper upgrades for people who made no local changes.

 -- Adam Conrad <adconrad@ubuntu.com>  Fri, 17 Feb 2006 15:34:53 +1100

initramfs-tools (0.40ubuntu22) dapper; urgency=low

  * Add mptspi to the list of SCSI modules put in the initramfs by default,
    which is required for some LSI Logic controllers and for the VMware SCSI
    controller in recent VMware versions (See launchpad.net/{27187,31229})
  * Fix typo of /dev/disk/by-*, which I wrote as /dev/disks/by-{uuid,label}
  * Load i2c-keywest before loading therm_pm72 in the PowerPC thermal hook,
    since the latter sometimes needs the former (Closes launchpad.net/27269)

 -- Adam Conrad <adconrad@ubuntu.com>  Tue, 14 Feb 2006 23:28:35 +1100

initramfs-tools (0.40ubuntu21) dapper; urgency=low

  * Don't update the progress bar once udev has taken /dev away;
    after all, we can't contact usplash anyway at this point.

 -- Scott James Remnant <scott@ubuntu.com>  Wed,  8 Feb 2006 14:34:10 +0000

initramfs-tools (0.40ubuntu20) dapper; urgency=low

  * Add ... to end of strings to match main boot sequence.

 -- Scott James Remnant <scott@ubuntu.com>  Tue,  7 Feb 2006 11:07:50 +0000

initramfs-tools (0.40ubuntu19) dapper; urgency=low

  * Change the first of many "Loading modules" to "Loading essential drivers"
    to improve debugging when people say it breaks at that stage.

 -- Scott James Remnant <scott@ubuntu.com>  Tue,  7 Feb 2006 11:05:15 +0000

initramfs-tools (0.40ubuntu18) dapper; urgency=low

  * Add support for selecting root by UUID or LABEL with syntax such as:
    root=LABEL=myrootfs or root=UUID=92addf34-0f02-4a0e-bfb2-cbaa1e907b77

 -- Adam Conrad <adconrad@ubuntu.com>  Fri,  3 Feb 2006 15:55:01 +0000

initramfs-tools (0.40ubuntu17) dapper; urgency=low

  * Make auto_add_modules take an argument, so you can use it to add only
    some of the auto* modules (like "net" or "ide"), and create a "netboot"
    option that only includes base and net (Closes launchpad.net/26426) 
  * Change the nfs script to use "mount -o nolock" instead of "nfsmount",
    to fix some timeouts for ltsp NFS roots (Closes launchpad.net/19196)

 -- Adam Conrad <adconrad@ubuntu.com>  Tue, 31 Jan 2006 11:55:11 +0000

initramfs-tools (0.40ubuntu16) dapper; urgency=low

  * Bump klibc-utils dependency to (>= 1.1.16-1), for hppa and ia64.

 -- Adam Conrad <adconrad@ubuntu.com>  Thu, 19 Jan 2006 04:00:39 +1100

initramfs-tools (0.40ubuntu15) dapper; urgency=low

  * Drop the udev dependency, so we always get configured before udev.
    We can get away with this now that udev hooks/scripts have been split
    into the udev package proper.  This should close Malone bug #28808.

 -- Adam Conrad <adconrad@ubuntu.com>  Wed, 18 Jan 2006 22:50:27 +1100

initramfs-tools (0.40ubuntu14) dapper; urgency=low

  * If copy_exec is asked to copy to the same location twice, check if
    we're copying the same file again.  If so, do nothing and carry on, if
    not, warn that we asked it for an impossibility, and don't overwrite.

 -- Adam Conrad <adconrad@ubuntu.com>  Thu, 12 Jan 2006 18:00:12 +1100

initramfs-tools (0.40ubuntu13) dapper; urgency=low

  * Default to taking over other initramfs images in Ubuntu, as this is
    more consistent with what our packaging expects to be able to do.
  * Make "update-initramfs -u" try to find the running kernel before it
    attempts to search the symbolic link list and its own sha1 list.

 -- Adam Conrad <adconrad@ubuntu.com>  Wed, 11 Jan 2006 16:25:20 +1100

initramfs-tools (0.40ubuntu12) dapper; urgency=low

  * Oops, move the progress state file into the new directory too.

 -- Adam Conrad <adconrad@ubuntu.com>  Mon,  9 Jan 2006 21:26:44 +1100

initramfs-tools (0.40ubuntu11) dapper; urgency=low

  * Move the state directory from /dev/initramfs to /dev/.initramfs

 -- Adam Conrad <adconrad@ubuntu.com>  Mon,  9 Jan 2006 21:17:50 +1100

initramfs-tools (0.40ubuntu10) dapper; urgency=low

  * Create the /dev/initramfs directory as soon as we mount /dev, so other
    packages that need a playground in /dev can do so in a uniform location.
  * Update the usplash progress bar every time we are asked to output a
    success or failure value from an init action, and write our progress to
    /dev/initramfs for sysv-init to gather up and pick up where we left off.
  * Export $DPKG_ARCH in both mkinitramfs (for use by hooks) and initramfs.
  * Use $DPKG_ARCH in the thermal hook/script to divide the x86 stuff from
    the powerpc stuff, not because we have to, but as an example to others.

 -- Adam Conrad <adconrad@ubuntu.com>  Mon,  9 Jan 2006 10:51:51 +1100

initramfs-tools (0.40ubuntu9) dapper; urgency=low

  * Make some changes to cope with the new and improved klibc packaging:
    - Add a force to the deletion of ${DESTDIR}/bin/sh, to avoid errors.
    - Cope with libklibc moving from /usr/lib/klibc/lib to /lib.
    - Bump dependency on klibc-utils to one new enough for the above.

 -- Adam Conrad <adconrad@ubuntu.com>  Thu,  5 Jan 2006 15:13:15 +1100

initramfs-tools (0.40ubuntu8) dapper; urgency=low

  * Call modprobe everywhere with "-Qb" to silence messages and allow user
    blacklisting.
  * Copy the entire /etc/modprobe.d directory to the initramfs, so we can
    pick up all user blacklists and options.
  * Remove the slumber for SCSI/USB devices from the local filesystem mount
    script, udev's init-premount script will take care of this when
    necessary.

 -- Scott James Remnant <scott@ubuntu.com>  Wed,  7 Dec 2005 16:18:12 +0000

initramfs-tools (0.40ubuntu7) dapper; urgency=low

  * remove "sleep 3" from the nfs script before the nfsmount command,
    its a leftover from debugging in breezy and slows down thin client 
    booting unnecessary

 -- Oliver Grawert <ogra@ubuntu.com>  Fri,  2 Dec 2005 11:45:05 +0100

initramfs-tools (0.40ubuntu6) dapper; urgency=low

  * When panicking, fork an interactive subshell rather than execing it, so
    that if the user fixes things up and exits, we continue rather than
    panic the kernel.
  * Call update-initramfs in postinst to regenerate the latest initramfs on
    upgrades

 -- Matt Zimmerman <mdz@ubuntu.com>  Thu,  1 Dec 2005 22:23:09 -0800

initramfs-tools (0.40ubuntu5) dapper; urgency=low

  * Wait up to 10 seconds for the root device to appear before failing,
    allowing SCSI and USB controllers time to settle.  There's almost
    certainly a more elegant way to do this generically for all mountroot
    functions, but for now this will suffice.

 -- Scott James Remnant <scott@ubuntu.com>  Thu,  1 Dec 2005 21:28:55 +0000

initramfs-tools (0.40ubuntu4) dapper; urgency=low

  * Mount /dev with mode 0755.

 -- Scott James Remnant <scott@ubuntu.com>  Thu,  1 Dec 2005 19:30:06 +0000

initramfs-tools (0.40ubuntu3) dapper; urgency=low

  "A true friend stabs you in the front."
  - Oscar Wilde 

  * hooks/acpid: Rename to ...
  * hooks/thermal: ... this.  Add therm_pm72 for ppc64 systems.

 -- Jeff Bailey <jbailey@ubuntu.com>  Wed, 30 Nov 2005 22:25:01 -0500

initramfs-tools (0.40ubuntu2) dapper; urgency=low

  * Rename scripts/init-premount/acpid to scripts/init-premount/thermal
    and add therm_pm72 to avoid "vaccum cleaner mode" on ppc64 systems.

 -- Adam Conrad <adconrad@ubuntu.com>  Thu,  1 Dec 2005 12:37:27 +1100

initramfs-tools (0.40ubuntu1) dapper; urgency=low

  * Use tmpfs for /dev, instead of ramfs; as tmpfs is swappable.
  * Move /proc and /sys to the real filesystem, rather than unmounting them;
    slightly reduces workload.
  * Replace /root with ${rootmnt} in final usage of /dev/console
  * Copy across modprobe blacklist as well as aliases

  * Change the panic/breaknow thing *again*.  There's now a break= option
    which can be any of top, modules, premount, mount, bottom, init and
    causes the initramfs to break at that point.  panic/breaknow is now
    break=top, without an argument is equivalent to break=premount.
  * Run depmod at the top of the init script, so init-top scripts can use
    modprobe.

  * Remove udev-specific code:
    - depend on the version of udev that includes all of these things itself
    - remove udevstart from init
    - remove code to move /dev to the real filesystem from init
    - remove /sys-based module loading from load_modules
    - remove boot_events functions from load_modules
    - remove udev copy from mkinitramfs
    - remove udev hook script

 -- Scott James Remnant <scott@ubuntu.com>  Thu, 24 Nov 2005 21:21:12 +0000

initramfs-tools (0.41) unstable; urgency=high

  "Una mattina mi sono svegliato"

  * High urgency upload to cope with newer udev upstream - bonus:
    condition to test against when udev is ready. (Closes: #341014)
    Thanks Marco d'Itri <md@linux.it> for guidance and 
    Heikki Henriksen <heikkih@gmail.com> for double check.

  * Pump udev dep on 0.076-3.

  * Special thanks to Paul Traina for previous udev / emvs work.

  * Sync with Ubuntu (0.36ubuntu6).

  * Kill udevd as late as possible. Thanks David Härdeman <david@2gen.com>
    for the patch. (Closes: #339093)

 -- maximilian attems <maks@sternwelten.at>  Mon, 28 Nov 2005 17:53:24 +0100

initramfs-tools (0.40) unstable; urgency=high

  * High urgency upload as udev changed under our feet. Fix RC bugs.

  * hooks/udev: Add needed bits: udevsynthesize. (Closes: #340257)
    Move good bits from global mkinitramfs.

  * Pump udev dep on 0.074-3.

  * Fix evms hooks properly until they get merged into the evms itself.
    (Closes: #337704)

  * Sync with Ubuntu (0.36ubuntu4).

 -- maximilian attems <maks@sternwelten.at>  Wed, 23 Nov 2005 10:31:57 +0100

initramfs-tools (0.39) unstable; urgency=medium

   * Setting urgency to medium to get this into testing.  This
     will make life easier for d-i.

  * Revert the mklibs-small usage patch - reduces needed dependencies:
    hook-fuctions: Readds copy_exec.
    mkinitramfs, hooks/{evms,lvm,md}: Use copy_exec.

  * mkinitramfs: Newer udev no longer uses /sbin/udev - remove usage.
    (Closes: #339568, #339365, #338814)

  * Pump udev dependency.

  * init: Pump timeout as there is currently no way to check which udevd
    processes are still running and why. 
    Cures hopefully breakage of missing devices on boot.

  * Sync with latest Ubuntu.

 -- maximilian attems <maks@sternwelten.at>  Thu, 17 Nov 2005 19:59:47 +0100

initramfs-tools (0.36ubuntu6) dapper; urgency=low

  * Rename "panic" to "breaknow"

 -- Scott James Remnant <scott@ubuntu.com>  Wed, 23 Nov 2005 10:23:54 +0000

initramfs-tools (0.36ubuntu5) dapper; urgency=low

  * Abort the boot sequence as early as possible if "panic" is placed on the
    kernel command-line, allowing debugging of scripts in init-top.

 -- Scott James Remnant <scott@ubuntu.com>  Mon, 21 Nov 2005 08:40:20 +0000


initramfs-tools (0.36ubuntu4) dapper; urgency=low

  * Replace all occurances of /etc/mkinitramfs in mkinitramfs with $CONFDIR,
    so -d can be used to point at a completely alternate tree (for example,
    when installing into a chroot).

 -- Scott James Remnant <scott@ubuntu.com>  Mon, 21 Nov 2005 08:34:03 +0000

initramfs-tools (0.36ubuntu3) dapper; urgency=low

  * mkinitramfs: only copy the klibc-*.so file, and not the development
    pieces that happen to sit alongside it.

 -- Scott James Remnant <scott@ubuntu.com>  Thu, 10 Nov 2005 16:44:08 -0500

initramfs-tools (0.36ubuntu2) dapper; urgency=low

  * Fix typos in the handling of the mkinitramfs -d option (thanks, Colin).

 -- Adam Conrad <adconrad@ubuntu.com>  Thu, 10 Nov 2005 12:12:32 -0500

initramfs-tools (0.38) unstable; urgency=low

  [ dann frazier ]

  * initramfs.conf: Reference correct manpage.  (Closes: #336095)

  [ maximilian attems ]

  * scripts/functions, scripts/local-premount/suspend: Fix suspend to disk
    by using decimal numbers. Thanks to Adrian Bridgett <adrian@smop.co.uk>
    for the patch. (Closes: #336936)

  * hooks/evms: manual_add_module dm_mod, now we no longer pull it in by
    default. Thanks to Steinar H. Gunderson <sesse@debian.org>
    (Closes: #336617)

 -- maximilian attems <maks@sternwelten.at>  Wed,  2 Nov 2005 07:21:29 +0100

initramfs-tools (0.37) unstable; urgency=low

  * scripts/functions, scripts/local-premount/suspend: Use of "stat"
    which isn' any more provided by busybox (1.01-3).
    Thanks to Adrian Bridgett <adrian@smop.co.uk> for the patch using awk.
    (Closes: #335801)

  * hooks/kernelextras: Check for existence of ${MODULESDIR}/initrd/:
    Exit if it doesn't exist before including current dir.
    Thanks to Jean Charles Delepine <delepine@nnx.com> (Closes: #335505)

  * hooks/lvm, hooks/md: Remove FIXME's at second thought.  You better want 
    to check against the binaries for your not yet created raid/lvm.

 -- maximilian attems <maks@sternwelten.at>  Wed, 26 Oct 2005 09:22:58 +0200

initramfs-tools (0.36) unstable; urgency=low

  "Sunny Autumn Release"
  
  * Minor cleanups in mkiniramfs.

  * Remove manpage section about return values. Needs to be rephrased.
    Not sure if it's important for the enduser.

 -- maximilian attems <maks@sternwelten.at>  Mon, 24 Oct 2005 19:51:51 +0200

initramfs-tools (0.35) unstable; urgency=low

  * mkinitramfs: Return 2 for failure path of --supported-(host|target)-version.

  * mkinitramfs: Run the hooks before mklibs-copy, broke evms.
    Thanks for fix and testing to Steinar H. Gunderson <sesse@debian.org>

  * Change name of virtual package that is provided into linux-initramfs-tool.

  * Add hooks/lvm allowing to remove dependency on lvm2.

  * Add hooks/md allowing to remove dependency on mdadm.

  * Remove the mdadm and lvm dependencies, they work as hooks when present.
    The lvm2 version in sarge is good enough to address issues mentioned in
    0.16. A woody backport will need newer lvm2 although..

 -- maximilian attems <maks@sternwelten.at>  Mon, 24 Oct 2005 19:16:14 +0200

initramfs-tools (0.32) unstable; urgency=low

  [ Bastian Blank ]
  * Use mklibs-copy.
  * Use udevsynthesize instead of udevstart.
  * hook-functions: Add ibmvscsic to list of scsi modules.

  [ Sven Luther ]
  * Added --supported-(host|target)-version support for the new post-2.6.13
    ramdisk-tool policy. Added linux-ramdisk-tool virtual package too.
    (Closes: #333856)

  [ maximilian attems ]
  * Resynchronise with latest upstream release.
  * Place shift after variable outfile assignment.
  * Fix strange chars in the Depends line resulting in no depends at all.
  * Thanks to Bastian Blank for the fixes concerning the new busybox version.
    (Closes: #334467)

  [ Jeff Bailey ]
  * scripts/nfs (mountroot): New variable: NFSOPTS, default to
    -o retranfs=10. (Ubuntu 12942)
    This can be overridden in the initramfs.conf file.
    Thanks to Oliver Grawert for testing this!

  * hook-scripts (auto_add_modules): Add jfs
    (dep_add_modules): Ditto. (Ubuntu #16742)
    Thanks to Colin Watson for this fix!

  [ Adam Conrad ]
  * Make us a bit more silent/tidy by default, unless "quiet" isn't on
    the kernel's command line (then we're just as verbose as ever)

  [ Jonas Smedegaard ]
  * Use GNU getopt (instead of bash builtin getopts) for improved long-
    opts handling.
  * Quote variables.
  * Use test options -n and -z.

 -- maximilian attems <maks@sternwelten.at>  Wed, 19 Oct 2005 17:42:08 +0200

initramfs-tools (0.31) unstable; urgency=low

  Quick fix for sluggish dep

  [ Bastian Blank ]
  * Use new busybox. (closes: #333755)

 -- maximilian attems <maks@sternwelten.at>  Mon, 17 Oct 2005 16:27:31 +0200

initramfs-tools (0.30) unstable; urgency=low

  Apparition Octobre Rouge

  [ maximilian Attems ]

  * Resynconise with latest upstream now we are in unstable.
  
  [ Jeff Bailey ]
  * debian/rules: Make sure hooks and scripts are chmod +x

  * hook-functions (auto_add_modules): Add advansys.

  * debian/init: Add "Loading, please wait..." message.
    Don't log for init-top scripts to avoid usplash noise.

  * init: Add start of debug command line option.

  * scripts/functions (log_begin_msg): Call usplash if available
    (log_end_msg): Call usplash if available
    (panic): Close usplash if available

  * scripts/functions (load_modules): Quote resume variable.
    Thanks to Christian Kellner for helping test that!

  * scripts/local-premount/suspend: Quote resume variable.

  * update-initramfs: Use basename on the link target to get the
     version number.

  * HACKING: Start of some notes on how this package actually works.
  * debian/initramfs-tools.docs: Install it.

  [ Matthew Garrett ]
  * scripts/functions (load_modules): Run udevstart after loading block
    drivers should fix resume from hibernate on non-LVM systems.

 -- maximilian attems <maks@sternwelten.at>  Fri, 30 Sep 2005 19:34:55 +0200

initramfs-tools (0.27) unstable; urgency=low

  * Remove unused BUSYBOX config option as we use busybox anyway.

  * Add Jeff Bailey and myself as Uploaders, Debian kernel team as
    MAINTAINER.

  * Upload to debian unstable - allows use of nondevfs kernel >= 2.6.13
    with initramfs image. (Closes: #312561, #315654)

  * Fix busybox dependency to the relevant debian package.

  * Reorder the initramfs.conf variables.

  * Add question mark to the getopts for the help message.

  * update-initramfs.8 New file install it.

  * The debian busybox-cvs-static installs into /bin/busybox:
    fix pathes vis-a-vis ubuntu version. make that a variable on top.

 -- maximilian attems <maks@sternwelten.at>  Tue, 20 Sep 2005 13:52:00 +0200

initramfs-tools (0.26) breezy; urgency=low

  "Experience is one thing you can't get for nothing."
  - Oscar Wilde 

  * scripts/local-top/lvm: Reduce -- to - in VG strings for feeding
    to vgchange.  (Ubuntu: #13387)

  * update-initramfs: New file
  * debian/dirs: Add /var/lib/initramfs-tools

  * hooks/evms: New file
  * scripts/local-top/evms: New file.
    Thanks to Jerry Haltom for helping test this!

  * debian/control: Bump klibc depends to 1.0.14-1ubuntu2 for jfs support

  * hook-scripts (manual_add_modules): Don't do unnecessary depmod
    (dep_add_modules): No need for a sleep 2 here.
    Thanks to Matt Zimmmerman for noticing these!

  * scripts/functions: Attempt resume before loading USB or Network
    modules to avoid resume issues with USB.
    Thanks to Matthew Garrett for this patch!

  * scripts/functions (ide_boot_events): Always load ide-generic
    before going further.  This allows us to catch any hidden
    IDE controllers that might not otherwise get found.

  * initramfs.conf.5: New file
  * debian/initramfs-tools.manpages: Install it.
    Thanks to maximilian attems for the manpage!

  * hook-functions (auto_add_modules): Add mptscsih (Ubuntu #15406)
    Thanks to Jesper Krogh for the bug report!

  * debian/dirs: Add etc/mkinitramfs/hooks, move all scripts subdirs
    into etc/mkinitramfs/scripts.

  * mkinitramfs: Set the umask.  Copy the scripts from  
    /etc/mkinitramfs/scripts into the image.
    Make sure that modules file lists is actually a regular file.

  * init: Use ${rootmnt} instead of hardcoded /root, use mount -n
    Fix typo.

  * hook-functions (catenate_cpiogz): Add sanity check.
    (add_modules_from_file): Document, quote variable, add warning.

  * docs/example_hook: Update
    Thanks to Karl Hegbloom for these previous 5 patches!

  * init: Create /var/lock on the initramfs
    Thanks to Jerry Haltom for noticing this!

  * debian/dirs: rename to ...
  * debian/initramfs-tools.dirs: ... this.

  * scripts/functions (scsi_boot_events): Don't attempt to look
    at ${device}/type if it doesn't actually exist.

 -- Jeff Bailey <jbailey@ubuntu.com>  Wed, 14 Sep 2005 14:12:24 -0400

initramfs-tools (0.25) breezy; urgency=low

  "If there was less sympathy in the world, there would be less
   trouble in the world."
  - Oscar Wilde

  * init: Module the /dev tmpfs earlier.  Make /dev/console, and
    /dev/null on it at the beginning, just in case.

  * debian/initramfs-tools.postinst: When copying the modules file over
    from initrd-tools installations, filter out ext2, ext3, ide-generic
    and ide-disk.  These are leftovers from Warty.
    (Ubuntu #14242)

  * hooks/udev: New File (Ubuntu #12915)

  * init: panic if ${init} doesn't exist on the target filesystem.

 -- Jeff Bailey <jbailey@ubuntu.com>  Thu,  1 Sep 2005 00:13:47 -0400

initramfs-tools (0.24) breezy; urgency=low

  "Experience is simply the name we give out mistakes."
  - Oscar Wilde

  * hook-functions (auto_add_modules): Add cciss
    (Ubuntu #14177) Thanks Fabionne!

  * scripts/functions (parse_numeric): Noop on empty parameter.
    Fixes LTSP boot failure.  Thanks to Oliver Grawert
    for testing!

  * scripts/local-top/md: Don't run modprobe when raidlvl is unset.
    Run mdadm if raidlvl has ever been set, not just if the most
    recent device checked was part of the raid setup.
    Thanks to Jeff Waugh for the bug report!

  * mkinitramfs: Feed the -o argument through readlink -f to
    get the canonical pathname.

 -- Jeff Bailey <jbailey@ubuntu.com>  Fri, 26 Aug 2005 09:35:32 -0400

initramfs-tools (0.23) breezy; urgency=low

  "This suspense is terrible. I hope it will last."
  - Oscar Wilde

  * scripts/local: Quote ${ROOT} so that an empty value causes us
    to drop to a shell.
    Thanks to Matt Zimmerman for this fix!

  * hook-functions (auto_add_modules): Add atiixp and opti621 to
    the IDE set.

  * hook-functions (dep_add_modules): Detect i2o and add i2o_block
    (auto_add_modules): Include i2o_block.

  * scripts/functions (i2o_boot_events): New function
    (load_modules): Call it. (Ubuntu# 13806)
    Thanks to Tollef Fog Heen for the i2o patch!

  * debian/control: Depend on udev.
    Thanks to Alexander Butenko for troubleshooting this with me.

  * init: Move the /dev directory to the root filesystem.
    Handle all the udev bind mounts as needed.
    Make sure input and output is associated with dev/console.

  * scripts/functions (parse_numeric): Exit if we're refering to a path.
    Otherwise override root setting to be /dev/root.
  * init: Call parse_numeric when setting the root variable.
  * scripts/local-top/lvm: When using a numeric root, call vgchange -ay
    Don't attempt to start LVM on regular partitions.
    (Ubuntu #13365, #13778, and some of #13399)

  * scripts/local-top/lvm: Cope with -'s in the Volume Group and
    logical volume names. (Ubuntu #13387)
    Thanks to Stephen Shirley for the patch!

 -- Jeff Bailey <jbailey@ubuntu.com>  Thu, 25 Aug 2005 11:48:15 -0400

initramfs-tools (0.22) breezy; urgency=low

  * Fix argument handling in force_load hook-function
  * Add "sleep 3" to scripts/nfs as a nasty hack around bug #12942

 -- Matt Zimmerman <mdz@ubuntu.com>  Fri, 19 Aug 2005 23:50:16 -0700

initramfs-tools (0.21) breezy; urgency=low

  "All that I desire to point out is the general principle that
   life imitates art far more than art imitates life."
   - Oscar Wilde

  * mkinitramfs: Define MODULESDIR and use it.

  * hook-functions: Use MODULESDIR
    (add_modules_from_file): Do not add .ko extension to file lists.
    Call force_load instead of twiddling conf/modules directly.
    (Ubuntu #13372)
    (force_load): New function.
    (copy_exec): Attempt to use non-optimsed libraries if available.
    (Ubuntu #13470)
    (auto_add_modules) Include forcedeth (Ubuntu #13448)

  * hooks/kernelextras: New file. (Ubuntu #13414)

  * debian/initramfs-tools.postinst: Preserve /etc/mkinitrd/modules if
    possible on new install. (Ubuntu #13372)

 -- Jeff Bailey <jbailey@ubuntu.com>  Thu, 18 Aug 2005 00:20:11 -0400

initramfs-tools (0.20) breezy; urgency=low

  * Depend on cpio.

 -- Colin Watson <cjwatson@ubuntu.com>  Fri, 12 Aug 2005 10:43:04 +0100

initramfs-tools (0.19) breezy; urgency=low

  "The basis of optimism is sheer terror."
  - Oscar Wilde

  * mkinitramfs: Honour MODULES=list and MODULES=dep.

  * hook-functions: New function dep_add_modules.

 -- Jeff Bailey <jbailey@ubuntu.com>  Wed, 10 Aug 2005 23:20:11 -0400

initramfs-tools (0.18) breezy; urgency=low

  "We are all in the gutter, but some of us are looking at the stars."
  - Oscar Wilde

  * debian/initramfs-tools.postrm: Use rm -f for removing the modules
    file, in case it doesn't exist for some reason. (Ubuntu #13335)
    Thanks to Colin Watson for the bug report!

  * mkinitramfs.8: Correct my email address to be jbailey@ubuntu.com
    Document /etc/mkinitramfs/DSDT.aml

  * debian/initramfs-tools.postinst: Attempt to inherit RESUME settings
    from initrd-tools.  Also copy the DSDT from /etc/mkinitrd/DSDT to
    /etc/mkinitramfs/DSDT.aml

 -- Jeff Bailey <jbailey@ubuntu.com>  Wed, 10 Aug 2005 13:09:44 -0400

initramfs-tools (0.17) breezy; urgency=low

  "The public is wonderfully tolerant. It forgives everything except
   genius."
  - Oscar Wilde

  * debian/initramfs-tools.postinst: Get the name of the config file 
    right when seeding RESUME=.  Also fix the sed expression.
    Thanks to Matthew Garrett for noticing this!  

 -- Jeff Bailey <jbailey@ubuntu.com>  Wed, 10 Aug 2005 11:54:07 -0400

initramfs-tools (0.16) breezy; urgency=low

  "It is through art, and through art only, that we can realise our
   perfection."
   - Oscar Wilde

  * mkinitramfs: Make sure all relevant ide modules are included.
    Add RESUME= support.

  * scripts/functions: Be silent when adding non-detected modules.

  * conf/mkinitramfs.conf: MODULES=most by default, BUSYBOX=y
    (Non-busybox isn't supported now.  It's not clear that it ever 
     will be).  Add RESUME line for resuming from suspend-to-disk.

  * scripts/local-premount/suspend: New script for suspend-to-disk.

  * debian/control: Bump depends on busybox-cvs-initramfs to
    20040623-1ubuntu19.  Add dependancy on lvm2.
    Bump standards version to 3.6.2.0 (no-op)

  * debian/control:
    Force version depend on lvm2 (>= 2.01.04-5) to make sure newer kernels
    will boot.
    Thanks for Andrew Mitchell for discovering this.

  * hooks/: New directory

  * debian/dirs: Move hooks to ...
  * debian/initramfs-tools.install: ... here.

  * hooks/acpid: New file.

  * scripts/init-premount/acpid: New file
    Thanks for the hint from Matthew Garrett for this.

  * debian/initramfs-tools.postinst: Add RESUME support on first install.

  * debian/mkinitramfs: Move functions to ...
  * debian/hook-functions: ... here.

  * debian/initramfs-tools.install: Install hook-functions

  * mkinitramfs.8: New file.
    Thanks to Maximilian Attems for contributing this!

  * scripts/local-top/md: Don't try to detect raid on non-existant devices
    or on whole devices.  Quiet other warning messages.

  * hook-functions: When generating initramfs, don't complain about missing
    modules.

 -- Jeff Bailey <jbailey@ubuntu.com>  Tue,  9 Aug 2005 23:35:08 -0400

initramfs-tools (0.15) breezy; urgency=low

  "Nothing looks so like innocence as an indiscretion."
  - Oscar Wilde

  * mkinitramfs: Handle putting DSDT.aml into the initramfs
    Add sata_nv to list of modules to import for main mode.

  * init: New scripts directory, init-premount for generic premount
    handling (like usplash)

  * debian/dirs: Make the /etc version of this directory for user
    addons.

  * debian/rules: Use prebuild, rather than debian-build-arch.

 -- Jeff Bailey <jbailey@ubuntu.com>  Tue,  9 Aug 2005 11:29:10 -0400

initramfs-tools (0.14) breezy; urgency=low

  "The world is a stage, but the play is badly cast."
  - Oscar Wilde

  * scripts/functions: Add scsi_boot_events and call it to load sd_mod

  * scripts/local-top/md: Autodetect raid level

  * scripts/local-top/lvm: Only activate the volumegroup required by
    the root device.  Don't bother with lvm if the root partition isn't
    /dev/mapper/FOO.

  * scripts/functions: Fix ide_boot_events.  This never worked, even
    if I thought it did.

  * init: init variable should be lower case.  Exported ROOT variable
    should be upper case.

 -- Jeff Bailey <jbailey@ubuntu.com>  Tue, 26 Jul 2005 20:30:57 -0400

initramfs-tools (0.13) breezy; urgency=low

  "We live in age when unnecessary things are our only necessities."
   - Oscar Wilde

  * Use detailed logging now for debian/changelog.  We have at least
    three people hacking now, and details would probably be useful.

  * debian/TODO: Update

  * debian/dirs: Sort and add usr/share/initramfs-tools/hooks

  * debian/initramfs-tools.examples: Add docs/example_hook and
    docs/example_hook_cpiogz

  * debian/initramfs-tools.install: Pretty Print.

  * debian/rules: Ensure that mkinitramfs is executable

  * docs/example_script: New file

  * init: Add concept of 'quiet', be verbose if not specified

  * mkinitramfs: Do not load script functions until needed
    Clear up comments / documentation
    Use DESTDIR instead of TMPDIR
    Add ability to link in extra hunks into the cpio file
    Cosmetic cleanups
    
  * scripts/functions: Add lsb stype log_FOO_msg functions

  * scripts/local: Add logging

  * scripts/nfs: Add logging

  Thanks to Karl Hegbloom for most of these patches!

  * debian/control: Get a much better description

  Thanks to Maximilian Attems for this!

  * scripts/functions: Add copy_exec function that copies a program
    and all libraries that it depends on.

  * mkinitramfs: Use it

  * scripts/local-top/lvm: New file

  * mkinitramfs: Specify the modules to copy rather than mass copying
    directories

  * scripts/functions: Always load ide-generic to cope with ide subsystem
    suckage.

 -- Jeff Bailey <jbailey@ubuntu.com>  Wed, 29 Jun 2005 23:50:56 +0000

initramfs-tools (0.12) breezy; urgency=low

  "I am not young enough to know everything." - Oscar Wilde

  * Don't complain if /etc/mkinitramfs/modules doesn't exist.

  * Make sure that raid1 is pulled in.

  * Include /etc/modprobe.d/aliases in the initramfs

  * Default to currently running kernel version.
    Based on a patch from maximilian attems, thanks!

  * Handle module arguments in /etc/mkinitramfs/modules

  * Do hookscripts at generation time.  Drop things into
    /usr/share/initramfs-tools/hooks or /etc/mkinitramfs/hooks

  * Make sure local-bottom and nfs-bottom get created
    Thanks to Karl Hegbloom for these three patches!

  * Prune stray echo from call_scripts

  * Load raid1 for now so that md setups will work.

  * Detect ide modules load
    Thanks to Jeff Waugh for initial testing of this!

 -- Jeff Bailey <jbailey@ubuntu.com>  Mon, 20 Jun 2005 23:05:04 +0000

initramfs-tools (0.11) breezy; urgency=low

  "Illusion is the first of all pleasures" - Oscar Wilde

  * Make the init much less noisy

  * Pull in all the dependancies for nfs and af_packet

  * Be compatible with misdocumented mkinitrd interface

  Thanks to Matt Zimmerman for the bug reports and testing!

  * Update debian/copyright to have the location of the bzr
    archive

 -- Jeff Bailey <jbailey@ubuntu.com>  Fri, 17 Jun 2005 21:23:25 +0000

initramfs-tools (0.10) breezy; urgency=low

  The "I can see you!" release.

  * Unconditionally require busybox.  Might revert this eventually
    but it's too much of a pain right now do this without
    a reasonably environment

  * Use modprobe to load modules

  * Iterate through /sys/bus/pci and /sys/bus/usb and load drivers
    based on their modalias

  * Start to use /sbin for things

  * Include depmod in the image.  Use it at boot time.

  * Edit config example to show the modules that do need to be included
    manually for this build.

 -- Jeff Bailey <jbailey@ubuntu.com>  Fri, 17 Jun 2005 12:45:07 +0000

initramfs-tools (0.9) breezy; urgency=low

  * Be consistent about y/n vs. yes/no values for the readonly variable

 -- Matt Zimmerman <mdz@ubuntu.com>  Thu, 16 Jun 2005 15:22:30 -0700

initramfs-tools (0.8) breezy; urgency=low

  The "We are one in the spirit..." release

  * Export the command line variables so that the various scripts
    can see them.

  * Honour command line 'ro' or 'rw' settings for nfs.

 -- Jeff Bailey <jbailey@ubuntu.com>  Tue, 14 Jun 2005 21:35:14 +0000

initramfs-tools (0.7) breezy; urgency=low

  The "CONFORM!" release.

  * Make command line arguments almost match mkinitrd.  The -m argument
    doesn't make any sense, so it's not supported.  Add support for
    overriding the confdir, and specifying version no longer expects -v.

  * Add sed and grep to the initramfs for now.  Will prune these
    eventually, but for now mdrun needs them.

  * Add mdadm and mdrun to the initramfs.

  * Add hookscript directories.

  * Call hookscripts

  Thanks to David Weinhall <tao@acc.umu.se> for the dependancy-based
  hookscripts.

 -- Jeff Bailey <jbailey@ubuntu.com>  Thu,  9 Jun 2005 17:08:01 +0000

initramfs-tools (0.6) breezy; urgency=low

  The "Sweep! ....  Off!" release.

  * Source in the net-${DEVICE}.conf file to get IP address information.

  * Add commandline parameters for NFSROOT and BOOT.

  * Moving loading of boot functions to after commandline parsing.

  * Allow NFSROOT variable to be set to auto to pick up value from DHCP
    Server.

 -- Jeff Bailey <jbailey@ubuntu.com>  Wed,  1 Jun 2005 12:02:40 -0400

initramfs-tools (0.5) breezy; urgency=low

  The "Climbing to the horizons" release.

  * Update for newer udev, call "udevstart" rather than "udev udevstart"

  * /etc/mkinitramfs/modules should not be a conffile.

  * Support busybox.

  * Fix bug where -k would delete the tmp files, and otherwise it would keep
    them.

  * Handle # for comments in the modules file.

  * arch:all, not arch:any

 -- Jeff Bailey <jbailey@ubuntu.com>  Tue, 31 May 2005 15:17:56 -0400

initramfs-tools (0.4) breezy; urgency=low

  * First upload to Ubuntu.

  * Handle glibc compiled udev for now.

 -- Jeff Bailey <jbailey@ubuntu.com>  Tue, 24 May 2005 14:30:07 +0000

initramfs-tools (0.3) unstable; urgency=low

  * Fix init and root variables

 -- Jeff Bailey <jbailey@ubuntu.com>  Sat, 29 Jan 2005 17:49:08 -0500

initramfs-tools (0.2) unstable; urgency=low

  * Include the modules in the initrd
  * Drop the .ko ending from the module loads.
  * Actually chain to the sub scripts.
  * kilbc is now named properly
  * First cut of an NFS root implementation

 -- Jeff Bailey <jbailey@ubuntu.com>  Fri, 28 Jan 2005 16:50:53 -0500

initramfs-tools (0.1) unstable; urgency=low

  * Initial Release.

 -- Jeff Bailey <jbailey@ubuntu.com>  Thu, 27 Jan 2005 15:23:52 -0500

